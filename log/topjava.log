2020-10-20 17:04:19,235 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:09:31,074 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:24:05,756 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:26:15,490 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:28:06,723 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 17:28:17,935 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:28:17,940 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 17:28:17,941 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime]
2020-10-20 17:28:17,945 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:28:17,945 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:28:17,948 DEBUG org.postgresql.Driver.loadDefaultProperties:137 - Loading driver configuration via classloader ParallelWebappClassLoader
  context: topjava_war_exploded
  delegate: false
----------> Parent Classloader:
java.net.URLClassLoader@b44e46

2020-10-20 17:28:17,949 DEBUG org.postgresql.Driver.connect:252 - Connecting with URL: jdbc:postgresql://localhost:5432/topjava
2020-10-20 17:28:17,955 DEBUG org.postgresql.jdbc.PgConnection.<init>:211 - PostgreSQL JDBC Driver 42.2.17
2020-10-20 17:28:17,956 DEBUG org.postgresql.jdbc.PgConnection.setDefaultFetchSize:1139 -   setDefaultFetchSize = 0
2020-10-20 17:28:17,956 DEBUG org.postgresql.jdbc.PgConnection.setPrepareThreshold:1148 -   setPrepareThreshold = 5
2020-10-20 17:28:17,964 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl:191 - Trying to establish a protocol version 3 connection to localhost:5432
2020-10-20 17:28:17,973 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect:140 - Receive Buffer Size is 65 536
2020-10-20 17:28:17,973 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect:141 - Send Buffer Size is 65 536
2020-10-20 17:28:18,115 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@12e43dd]
2020-10-20 17:28:18,116 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:28:18,116 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:28:18,116 DEBUG org.postgresql.Driver.connect:252 - Connecting with URL: jdbc:postgresql://localhost:5432/topjava
2020-10-20 17:28:18,116 DEBUG org.postgresql.jdbc.PgConnection.<init>:211 - PostgreSQL JDBC Driver 42.2.17
2020-10-20 17:28:18,116 DEBUG org.postgresql.jdbc.PgConnection.setDefaultFetchSize:1139 -   setDefaultFetchSize = 0
2020-10-20 17:28:18,117 DEBUG org.postgresql.jdbc.PgConnection.setPrepareThreshold:1148 -   setPrepareThreshold = 5
2020-10-20 17:28:18,117 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl:191 - Trying to establish a protocol version 3 connection to localhost:5432
2020-10-20 17:28:18,117 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect:140 - Receive Buffer Size is 65 536
2020-10-20 17:28:18,118 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect:141 - Send Buffer Size is 65 536
2020-10-20 17:28:18,153 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found
2020-10-20 17:28:18,153 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@12e43dd]: database product name is 'PostgreSQL'
2020-10-20 17:28:18,154 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: "ORDERED")
  Позиция: 38]; SQL was [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime] for task [PreparedStatementCallback]
2020-10-20 17:32:33,490 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 17:32:35,692 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:32:35,697 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 17:32:35,698 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime]
2020-10-20 17:32:35,702 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:32:35,702 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:32:35,869 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@12e43dd]
2020-10-20 17:32:35,869 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:32:35,870 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:32:35,905 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found
2020-10-20 17:32:35,905 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@12e43dd]: database product name is 'PostgreSQL'
2020-10-20 17:32:35,906 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: "ORDERED")
  Позиция: 38]; SQL was [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime] for task [PreparedStatementCallback]
2020-10-20 17:37:12,784 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 17:37:14,468 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:37:14,474 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 17:37:14,475 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime]
2020-10-20 17:37:14,482 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:37:14,482 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:37:14,644 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@5bdc79]
2020-10-20 17:37:14,645 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:37:14,645 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:37:14,681 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found
2020-10-20 17:37:14,681 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@5bdc79]: database product name is 'PostgreSQL'
2020-10-20 17:37:14,682 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: "ORDERED")
  Позиция: 38]; SQL was [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime] for task [PreparedStatementCallback]
2020-10-20 17:40:42,736 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 17:40:45,636 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:40:45,641 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 17:40:45,642 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime]
2020-10-20 17:40:45,646 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:40:45,646 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:40:45,810 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@5bdc79]
2020-10-20 17:40:45,811 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:40:45,811 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:40:45,846 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found
2020-10-20 17:40:45,847 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@5bdc79]: database product name is 'PostgreSQL'
2020-10-20 17:40:45,847 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: "ORDERED")
  Позиция: 38]; SQL was [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime] for task [PreparedStatementCallback]
2020-10-20 17:41:17,378 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 17:41:20,895 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:41:20,901 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 17:41:20,901 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  ORDERED BY datetime WHERE user_id=?]
2020-10-20 17:41:20,905 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:41:20,905 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:41:21,070 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@1c8ae39]
2020-10-20 17:41:21,071 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:41:21,071 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:41:21,107 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found
2020-10-20 17:41:21,107 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@1c8ae39]: database product name is 'PostgreSQL'
2020-10-20 17:41:21,107 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: "BY")
  Позиция: 30]; SQL was [SELECT * FROM meals  ORDERED BY datetime WHERE user_id=?] for task [PreparedStatementCallback]
2020-10-20 17:44:54,909 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 17:44:57,141 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:44:57,150 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 17:44:57,150 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=?]
2020-10-20 17:44:57,154 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:44:57,155 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:46:47,741 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 17:46:50,100 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:46:50,106 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 17:46:50,106 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=?]
2020-10-20 17:46:50,114 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:46:50,114 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:46:50,252 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 17:46:50,255 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'datetime' mapped to field 'datetime'
2020-10-20 17:46:50,256 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'description' mapped to field 'description'
2020-10-20 17:46:50,256 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'calories' mapped to field 'calories'
2020-10-20 17:46:50,256 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 17:58:42,624 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 17:58:45,512 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 17:58:45,518 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 17:58:45,519 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=?]
2020-10-20 17:58:45,526 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 17:58:45,526 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 17:58:45,662 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 17:58:45,666 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 17:58:45,667 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 17:58:45,667 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 17:58:45,668 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:04:28,168 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 18:04:31,140 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:04:31,146 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:04:31,146 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDERED BY datetime]
2020-10-20 18:04:31,150 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:04:31,151 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:04:31,418 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@8672e4]
2020-10-20 18:04:31,419 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:04:31,419 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:04:31,455 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found
2020-10-20 18:04:31,455 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@8672e4]: database product name is 'PostgreSQL'
2020-10-20 18:04:31,456 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: "ORDERED")
  Позиция: 39]; SQL was [SELECT * FROM meals  WHERE user_id=? ORDERED BY datetime] for task [PreparedStatementCallback]
2020-10-20 18:11:14,858 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 18:11:18,103 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:11:18,109 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:11:18,109 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:11:18,117 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:11:18,117 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:11:18,254 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:11:18,258 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:11:18,259 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:11:18,259 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:11:18,260 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:11:30,302 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100006 for user 100000
2020-10-20 18:11:30,303 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update
2020-10-20 18:11:30,303 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=? user_id=?]
2020-10-20 18:11:30,304 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:11:30,304 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:11:30,377 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@19aa9ee]
2020-10-20 18:11:30,378 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:11:30,378 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:11:30,415 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found
2020-10-20 18:11:30,415 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@19aa9ee]: database product name is 'PostgreSQL'
2020-10-20 18:11:30,415 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: "user_id")
  Позиция: 31]; SQL was [DELETE FROM meals WHERE id=? user_id=?] for task [PreparedStatementCallback]
2020-10-20 18:13:53,182 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 18:13:55,003 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:13:55,008 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:13:55,009 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:13:55,013 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:13:55,013 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:13:55,151 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:13:55,155 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:13:55,156 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:13:55,156 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:13:55,157 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:14:03,531 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100006 for user 100000
2020-10-20 18:14:03,532 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update
2020-10-20 18:14:03,532 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=? AND user_id=?]
2020-10-20 18:14:03,533 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:14:03,533 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:14:03,603 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@2da080]
2020-10-20 18:14:03,604 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:14:03,604 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:14:03,640 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found
2020-10-20 18:14:03,640 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@2da080]: database product name is 'PostgreSQL'
2020-10-20 18:14:03,641 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.doTranslate:289 - Unable to translate SQLException with SQL state '42883', error code '0, will now try the fallback translator
2020-10-20 18:14:03,641 DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate:98 - Extracted SQL state class '42' from value '42883'
2020-10-20 18:18:32,833 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 18:18:34,969 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:18:34,975 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:18:34,978 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:18:34,983 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:18:34,983 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:18:35,121 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:18:35,125 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:18:35,126 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:18:35,126 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:18:35,127 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:18:37,362 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100006 for user 100000
2020-10-20 18:18:37,363 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update
2020-10-20 18:18:37,363 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=?]
2020-10-20 18:18:37,363 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:18:37,363 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:18:37,403 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:18:37,403 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:18:37,403 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:18:37,403 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:18:37,403 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:18:37,437 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:18:37,437 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:18:37,437 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:18:37,437 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:18:37,437 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:18:38,873 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100007 for user 100000
2020-10-20 18:18:38,873 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update
2020-10-20 18:18:38,873 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=?]
2020-10-20 18:18:38,874 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:18:38,874 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:18:38,910 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:18:38,910 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:18:38,911 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:18:38,911 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:18:38,911 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:18:38,945 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:18:38,946 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:18:38,946 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:18:38,946 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:18:38,946 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:19:21,672 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 18:19:23,182 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:19:23,188 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:19:23,188 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:19:23,192 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:19:23,193 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:19:23,330 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:19:23,334 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:19:23,335 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:19:23,335 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:19:23,336 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:19:25,148 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100005 for user 100000
2020-10-20 18:19:25,148 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update
2020-10-20 18:19:25,149 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=? AND user_id=?]
2020-10-20 18:19:25,149 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:19:25,149 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:19:25,187 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:19:25,188 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:19:25,188 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:19:25,188 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:19:25,188 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:19:25,222 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:19:25,222 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:19:25,222 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:19:25,222 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:19:25,222 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:19:27,202 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100004 for user 100000
2020-10-20 18:19:27,202 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update
2020-10-20 18:19:27,202 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=? AND user_id=?]
2020-10-20 18:19:27,203 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:19:27,203 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:19:27,239 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:19:27,239 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:19:27,239 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:19:27,239 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:19:27,239 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:19:27,273 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:19:27,273 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:19:27,274 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:19:27,274 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:19:27,274 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:20:06,520 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-30 - 2020-01-30) time(00:00 - 11:11) for user 100000
2020-10-20 18:20:06,520 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:20:06,520 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:20:06,521 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:20:06,521 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:20:06,555 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:20:06,555 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:20:06,555 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:20:06,555 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:20:06,556 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:21:18,536 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 18:21:20,583 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:21:20,589 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:21:20,589 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:21:20,593 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:21:20,594 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:21:20,730 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:21:20,734 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:21:20,734 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:21:20,735 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:21:20,736 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:21:26,865 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(null - null) time(null - 11:11) for user 100000
2020-10-20 18:21:26,866 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:21:26,866 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:21:26,866 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:21:26,866 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:21:26,901 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:21:26,901 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:21:26,901 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:21:26,901 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:21:26,901 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:21:35,832 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-20T18:21, description='fdgdf', calories=1000} for user 100000
2020-10-20 18:21:35,834 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.checkCompiled:308 - JdbcInsert not compiled before execution - invoking compile
2020-10-20 18:21:35,836 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:21:35,836 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:21:35,874 DEBUG o.s.j.core.metadata.TableMetaDataProviderFactory.lambda$createMetaDataProvider$0:75 - Using PostgresTableMetaDataProvider
2020-10-20 18:21:35,875 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.initializeWithMetaData:150 - GetGeneratedKeys is supported
2020-10-20 18:21:35,875 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.initializeWithMetaData:174 - GeneratedKeysColumnNameArray is supported for PostgreSQL
2020-10-20 18:21:35,883 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:392 - Retrieving meta-data for null/public/meals
2020-10-20 18:21:35,890 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'id', sqlType=4, nullable=false
2020-10-20 18:21:35,890 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'datetime', sqlType=93, nullable=false
2020-10-20 18:21:35,890 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'description', sqlType=12, nullable=false
2020-10-20 18:21:35,890 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'calories', sqlType=4, nullable=false
2020-10-20 18:21:35,890 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'user_id', sqlType=4, nullable=false
2020-10-20 18:21:35,891 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.compileInternal:281 - Compiled insert object: insert string is [INSERT INTO meals (datetime, description, calories, user_id) VALUES(?, ?, ?, ?)]
2020-10-20 18:21:35,891 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.compile:264 - JdbcInsert for table [meals] compiled
2020-10-20 18:21:35,892 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.executeInsertAndReturnKeyHolderInternal:428 - The following parameters are used for call INSERT INTO meals (datetime, description, calories, user_id) VALUES(?, ?, ?, ?) with: [2020-10-20T18:21, fdgdf, 1000, 100000]
2020-10-20 18:21:35,893 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:891 - Executing SQL update and returning generated keys
2020-10-20 18:21:35,893 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement
2020-10-20 18:21:35,893 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:21:35,893 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:21:35,926 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.prepareStatementForGeneratedKeys:523 - Using generated keys support with array of column names.
2020-10-20 18:21:35,935 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:21:35,935 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:21:35,935 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:21:35,935 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:21:35,936 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:21:35,970 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:21:35,970 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:21:35,970 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:21:35,970 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:21:35,970 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:21:42,051 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-20T18:21, description='sdfsffff', calories=1000} for user 100000
2020-10-20 18:21:42,052 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.executeInsertAndReturnKeyHolderInternal:428 - The following parameters are used for call INSERT INTO meals (datetime, description, calories, user_id) VALUES(?, ?, ?, ?) with: [2020-10-20T18:21, sdfsffff, 1000, 100000]
2020-10-20 18:21:42,052 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:891 - Executing SQL update and returning generated keys
2020-10-20 18:21:42,052 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement
2020-10-20 18:21:42,052 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:21:42,052 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:21:42,085 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.prepareStatementForGeneratedKeys:523 - Using generated keys support with array of column names.
2020-10-20 18:21:42,089 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:21:42,089 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:21:42,090 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:21:42,090 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:21:42,090 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:21:42,123 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:21:42,123 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:21:42,123 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:21:42,123 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:21:42,123 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 18:21:53,074 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-20T18:21, description='1', calories=1} for user 100000
2020-10-20 18:21:53,074 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.executeInsertAndReturnKeyHolderInternal:428 - The following parameters are used for call INSERT INTO meals (datetime, description, calories, user_id) VALUES(?, ?, ?, ?) with: [2020-10-20T18:21, 1, 1, 100000]
2020-10-20 18:21:53,074 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:891 - Executing SQL update and returning generated keys
2020-10-20 18:21:53,074 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement
2020-10-20 18:21:53,074 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:21:53,074 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:21:53,208 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.prepareStatementForGeneratedKeys:523 - Using generated keys support with array of column names.
2020-10-20 18:21:53,212 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 18:21:53,212 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 18:21:53,212 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 18:21:53,212 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 18:21:53,212 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 18:21:53,347 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 18:21:53,348 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 18:21:53,348 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 18:21:53,348 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 18:21:53,348 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-20 19:38:28,316 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-20 19:38:30,754 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-20 19:38:30,759 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-20 19:38:30,760 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-20 19:38:30,764 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-20 19:38:30,764 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-20 19:38:30,927 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-20 19:38:30,932 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-20 19:38:30,933 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-20 19:38:30,933 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-20 19:38:30,934 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-22 22:31:23,322 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-22 22:31:25,797 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-22 22:31:25,802 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-22 22:31:25,803 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]
2020-10-22 22:31:25,807 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-22 22:31:25,807 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-22 22:31:25,999 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@1996434]
2020-10-22 22:31:26,000 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-22 22:31:26,000 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-22 22:31:26,137 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found
2020-10-22 22:31:26,137 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@1996434]: database product name is 'PostgreSQL'
2020-10-22 22:31:26,138 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.doTranslate:289 - Unable to translate SQLException with SQL state '42703', error code '0, will now try the fallback translator
2020-10-22 22:31:26,138 DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate:98 - Extracted SQL state class '42' from value '42703'
2020-10-22 22:32:08,056 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-22 22:32:10,193 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-22 22:32:10,198 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-22 22:32:10,199 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY date_time DESC]
2020-10-22 22:32:10,203 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-22 22:32:10,203 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-22 22:32:10,344 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-22 22:32:10,348 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'date_time' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-22 22:32:10,349 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-22 22:32:10,349 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-22 22:32:10,350 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-22 22:32:16,197 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-22T22:32, description='hbjjmh', calories=1000} for user 100000
2020-10-22 22:32:16,198 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.checkCompiled:308 - JdbcInsert not compiled before execution - invoking compile
2020-10-22 22:32:16,200 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-22 22:32:16,200 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-22 22:32:16,242 DEBUG o.s.j.core.metadata.TableMetaDataProviderFactory.lambda$createMetaDataProvider$0:75 - Using PostgresTableMetaDataProvider
2020-10-22 22:32:16,242 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.initializeWithMetaData:150 - GetGeneratedKeys is supported
2020-10-22 22:32:16,242 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.initializeWithMetaData:174 - GeneratedKeysColumnNameArray is supported for PostgreSQL
2020-10-22 22:32:16,248 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:392 - Retrieving meta-data for null/public/meals
2020-10-22 22:32:16,254 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'id', sqlType=4, nullable=false
2020-10-22 22:32:16,255 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'date_time', sqlType=93, nullable=false
2020-10-22 22:32:16,255 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'description', sqlType=12, nullable=false
2020-10-22 22:32:16,255 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'calories', sqlType=4, nullable=false
2020-10-22 22:32:16,255 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'user_id', sqlType=4, nullable=false
2020-10-22 22:32:16,256 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.compileInternal:281 - Compiled insert object: insert string is [INSERT INTO meals (date_time, description, calories, user_id) VALUES(?, ?, ?, ?)]
2020-10-22 22:32:16,256 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.compile:264 - JdbcInsert for table [meals] compiled
2020-10-22 22:32:16,257 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.executeInsertAndReturnKeyHolderInternal:428 - The following parameters are used for call INSERT INTO meals (date_time, description, calories, user_id) VALUES(?, ?, ?, ?) with: [2020-10-22T22:32, hbjjmh, 1000, 100000]
2020-10-22 22:32:16,257 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:891 - Executing SQL update and returning generated keys
2020-10-22 22:32:16,258 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement
2020-10-22 22:32:16,258 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-22 22:32:16,258 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-22 22:32:16,290 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.prepareStatementForGeneratedKeys:523 - Using generated keys support with array of column names.
2020-10-22 22:32:16,298 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-22 22:32:16,299 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query
2020-10-22 22:32:16,299 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY date_time DESC]
2020-10-22 22:32:16,299 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-22 22:32:16,299 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-22 22:32:16,333 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'
2020-10-22 22:32:16,333 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'date_time' to property 'dateTime' of type 'java.time.LocalDateTime'
2020-10-22 22:32:16,333 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'
2020-10-22 22:32:16,333 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'
2020-10-22 22:32:16,333 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'
2020-10-23 18:16:25,203 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-23 18:16:25,275 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-23 18:16:25,470 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-23 18:16:25,909 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-23 18:16:26,321 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-23 18:16:26,988 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-23 18:16:27,105 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-23 18:16:29,934 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-23 18:26:09,594 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-23 18:26:54,408 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-23 18:26:54,486 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-23 18:26:54,689 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-23 18:26:55,049 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-23 18:26:55,495 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-23 18:26:56,247 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-23 18:26:56,380 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-23 18:36:28,898 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-23 18:36:29,274 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-23 18:36:41,728 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1715d9d
2020-10-23 18:36:41,905 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-23 18:36:41,906 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-23 18:36:41,938 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-23 18:36:41,938 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-23 18:36:41,939 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-23 18:36:41,939 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-23 18:36:41,962 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-23 18:36:41,966 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-23 18:36:41,986 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]
2020-10-23 18:36:42,020 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-23 18:36:42,076 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-23 18:36:42,114 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-23 18:36:42,115 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-23 18:36:42,116 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-23 18:36:42,117 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-23 18:36:42,119 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-23 18:36:42,123 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-23 18:36:42,124 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-23 18:36:42,155 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-23 18:36:42,264 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-23 18:36:42,266 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-23 18:36:42,284 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-23 18:36:42,295 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-23 18:36:42,312 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-23 18:36:42,330 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-23 18:36:42,399 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-23 18:36:42,572 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-23 18:36:42,747 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-23 18:36:42,908 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-23 18:36:43,337 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-23 18:36:43,989 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-23 18:36:44,104 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-23 18:36:44,107 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-23 18:36:44,117 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-23 18:36:44,118 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-23 18:36:44,119 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-23 18:36:44,120 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-23 18:36:44,140 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-23 18:36:44,140 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-23 18:36:44,141 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-23 18:36:44,142 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-23 18:36:44,145 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-23 18:36:44,146 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-23 18:36:44,152 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'
2020-10-23 18:36:44,174 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-23 18:36:44,174 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-23 18:36:44,207 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]
2020-10-23 18:36:44,215 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles
2020-10-23 18:36:44,218 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals
2020-10-23 18:36:44,220 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users
2020-10-23 18:36:44,221 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq
2020-10-23 18:36:44,224 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000
2020-10-23 18:36:44,237 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )
2020-10-23 18:36:44,243 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)
2020-10-23 18:36:44,259 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-23 18:36:44,271 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-23 18:36:44,277 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)
2020-10-23 18:36:44,277 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 70 ms.
2020-10-23 18:36:44,277 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]
2020-10-23 18:36:44,279 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles
2020-10-23 18:36:44,279 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals
2020-10-23 18:36:44,280 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users
2020-10-23 18:36:44,281 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
2020-10-23 18:36:44,282 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')
2020-10-23 18:36:44,283 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)
2020-10-23 18:36:44,284 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)
2020-10-23 18:36:44,284 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
2020-10-23 18:36:44,286 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-23 18:36:44,298 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-24 21:57:56,399 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@1715d9d, started on Fri Oct 23 18:36:41 MSK 2020
2020-10-24 21:57:56,404 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-24 21:57:56,405 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 21:57:56,441 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-24 23:10:32,786 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1f9e34c
2020-10-24 23:10:32,946 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-24 23:10:32,946 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-24 23:10:32,980 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-24 23:10:32,980 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-24 23:10:32,981 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-24 23:10:32,981 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-24 23:10:33,003 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-24 23:10:33,008 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-24 23:10:33,027 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]
2020-10-24 23:10:33,063 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-24 23:10:33,113 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-24 23:10:33,149 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-24 23:10:33,151 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-24 23:10:33,151 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-24 23:10:33,152 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-24 23:10:33,154 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-24 23:10:33,158 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-24 23:10:33,158 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-24 23:10:33,190 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-24 23:10:33,298 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-24 23:10:33,300 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-24 23:10:33,318 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-24 23:10:33,329 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-24 23:10:33,347 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-24 23:10:33,365 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-24 23:10:33,456 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-24 23:10:33,630 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-24 23:10:33,807 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:10:34,068 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-24 23:10:34,472 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-24 23:10:35,142 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-24 23:10:35,289 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-24 23:10:35,292 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-24 23:10:35,299 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-24 23:10:35,311 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-24 23:10:35,312 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-24 23:10:35,313 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-24 23:10:35,322 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-24 23:10:35,322 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-24 23:10:35,323 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-24 23:10:35,324 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-24 23:10:35,327 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-24 23:10:35,328 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-24 23:10:35,335 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'
2020-10-24 23:10:35,357 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-24 23:10:35,358 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:10:35,390 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]
2020-10-24 23:10:35,399 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles
2020-10-24 23:10:35,402 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals
2020-10-24 23:10:35,405 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users
2020-10-24 23:10:35,405 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq
2020-10-24 23:10:35,408 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000
2020-10-24 23:10:35,421 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )
2020-10-24 23:10:35,427 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)
2020-10-24 23:10:35,438 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-24 23:10:35,450 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-24 23:10:35,456 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)
2020-10-24 23:10:35,456 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 65 ms.
2020-10-24 23:10:35,456 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]
2020-10-24 23:10:35,457 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles
2020-10-24 23:10:35,458 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals
2020-10-24 23:10:35,459 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users
2020-10-24 23:10:35,460 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
2020-10-24 23:10:35,461 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')
2020-10-24 23:10:35,462 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)
2020-10-24 23:10:35,463 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)
2020-10-24 23:10:35,463 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
2020-10-24 23:10:35,465 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-24 23:10:35,476 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-24 23:10:37,594 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-24 23:10:37,601 DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke:305 - Creating new EntityManager for shared EntityManager invocation
2020-10-24 23:10:37,695 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:10:43,455 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100008 for user 100000
2020-10-24 23:10:43,455 DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke:305 - Creating new EntityManager for shared EntityManager invocation
2020-10-24 23:13:23,251 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@1f9e34c, started on Sat Oct 24 23:10:32 MSK 2020
2020-10-24 23:13:23,251 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-24 23:13:23,251 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:13:23,283 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-24 23:13:35,646 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@13bee6c
2020-10-24 23:13:35,805 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-24 23:13:35,806 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-24 23:13:35,838 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-24 23:13:35,838 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-24 23:13:35,839 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-24 23:13:35,839 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-24 23:13:35,865 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-24 23:13:35,866 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-24 23:13:35,885 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]
2020-10-24 23:13:35,920 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-24 23:13:35,971 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-24 23:13:36,006 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-24 23:13:36,008 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-24 23:13:36,008 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-24 23:13:36,009 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-24 23:13:36,011 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-24 23:13:36,015 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-24 23:13:36,016 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-24 23:13:36,045 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-24 23:13:36,154 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-24 23:13:36,157 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-24 23:13:36,173 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-24 23:13:36,186 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-24 23:13:36,202 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-24 23:13:36,220 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-24 23:13:36,289 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-24 23:13:36,461 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-24 23:13:36,660 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:13:36,819 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-24 23:13:37,227 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-24 23:13:37,896 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-24 23:13:38,012 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-24 23:13:38,015 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-24 23:13:38,022 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-24 23:13:38,042 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-24 23:13:38,043 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-24 23:13:38,043 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-24 23:13:38,045 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-24 23:13:38,046 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-24 23:13:38,046 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-24 23:13:38,047 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-24 23:13:38,051 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-24 23:13:38,051 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-24 23:13:38,061 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'
2020-10-24 23:13:38,080 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-24 23:13:38,080 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:13:38,113 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]
2020-10-24 23:13:38,121 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles
2020-10-24 23:13:38,124 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals
2020-10-24 23:13:38,127 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users
2020-10-24 23:13:38,128 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq
2020-10-24 23:13:38,131 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000
2020-10-24 23:13:38,148 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )
2020-10-24 23:13:38,153 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)
2020-10-24 23:13:38,164 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-24 23:13:38,208 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-24 23:13:38,214 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)
2020-10-24 23:13:38,215 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 102 ms.
2020-10-24 23:13:38,215 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]
2020-10-24 23:13:38,216 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles
2020-10-24 23:13:38,217 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals
2020-10-24 23:13:38,218 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users
2020-10-24 23:13:38,219 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
2020-10-24 23:13:38,220 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')
2020-10-24 23:13:38,221 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)
2020-10-24 23:13:38,222 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)
2020-10-24 23:13:38,222 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
2020-10-24 23:13:38,223 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-24 23:13:38,235 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-24 23:13:41,725 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-24 23:13:41,736 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-24 23:13:41,788 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29254878<open>)] for JPA transaction
2020-10-24 23:13:41,793 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:13:41,825 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@af0de3] read-only
2020-10-24 23:13:41,829 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@197c956]
2020-10-24 23:13:41,873 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:13:41,873 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(29254878<open>)]
2020-10-24 23:13:41,874 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@af0de3]
2020-10-24 23:13:41,874 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29254878<open>)] after transaction
2020-10-24 23:13:44,203 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100008 for user 100000
2020-10-24 23:13:44,204 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.delete]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-24 23:13:44,204 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(18077078<open>)] for JPA transaction
2020-10-24 23:13:44,204 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:13:44,242 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1ebbee6] read-only
2020-10-24 23:13:44,242 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@e93a3f]
2020-10-24 23:13:44,254 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 25006
2020-10-24 23:13:44,254 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: в транзакции в режиме "только чтение" нельзя выполнить DELETE
2020-10-24 23:13:44,260 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback
2020-10-24 23:13:44,260 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(18077078<open>)]
2020-10-24 23:13:44,261 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1ebbee6]
2020-10-24 23:13:44,262 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(18077078<open>)] after transaction
2020-10-24 23:15:30,129 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@13bee6c, started on Sat Oct 24 23:13:35 MSK 2020
2020-10-24 23:15:30,129 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-24 23:15:30,129 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:30,162 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-24 23:15:41,560 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@dcd7bb
2020-10-24 23:15:41,722 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-24 23:15:41,722 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-24 23:15:41,756 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-24 23:15:41,756 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-24 23:15:41,756 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-24 23:15:41,757 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-24 23:15:41,783 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-24 23:15:41,784 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-24 23:15:41,803 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]
2020-10-24 23:15:41,839 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-24 23:15:41,890 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-24 23:15:41,926 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-24 23:15:41,927 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-24 23:15:41,928 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-24 23:15:41,930 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-24 23:15:41,932 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-24 23:15:41,936 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-24 23:15:41,937 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-24 23:15:41,967 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-24 23:15:42,077 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-24 23:15:42,079 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-24 23:15:42,095 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-24 23:15:42,109 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-24 23:15:42,125 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-24 23:15:42,143 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-24 23:15:42,234 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-24 23:15:42,404 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-24 23:15:42,582 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:42,742 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-24 23:15:43,149 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-24 23:15:43,819 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-24 23:15:43,970 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-24 23:15:43,973 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-24 23:15:43,980 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-24 23:15:44,001 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-24 23:15:44,002 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-24 23:15:44,003 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-24 23:15:44,005 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-24 23:15:44,005 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-24 23:15:44,006 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-24 23:15:44,006 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-24 23:15:44,010 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-24 23:15:44,011 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-24 23:15:44,018 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'
2020-10-24 23:15:44,042 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-24 23:15:44,043 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:44,076 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]
2020-10-24 23:15:44,084 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles
2020-10-24 23:15:44,087 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals
2020-10-24 23:15:44,090 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users
2020-10-24 23:15:44,091 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq
2020-10-24 23:15:44,094 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000
2020-10-24 23:15:44,108 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )
2020-10-24 23:15:44,113 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)
2020-10-24 23:15:44,125 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-24 23:15:44,137 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-24 23:15:44,143 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)
2020-10-24 23:15:44,143 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 67 ms.
2020-10-24 23:15:44,143 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]
2020-10-24 23:15:44,144 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles
2020-10-24 23:15:44,145 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals
2020-10-24 23:15:44,146 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users
2020-10-24 23:15:44,147 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
2020-10-24 23:15:44,148 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')
2020-10-24 23:15:44,149 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)
2020-10-24 23:15:44,150 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)
2020-10-24 23:15:44,150 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
2020-10-24 23:15:44,151 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-24 23:15:44,163 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-24 23:15:46,409 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-24 23:15:46,421 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-24 23:15:46,466 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23778712<open>)] for JPA transaction
2020-10-24 23:15:46,471 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:46,503 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965] read-only
2020-10-24 23:15:46,507 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d6300a]
2020-10-24 23:15:46,556 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:15:46,556 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(23778712<open>)]
2020-10-24 23:15:46,557 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965]
2020-10-24 23:15:46,557 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23778712<open>)] after transaction
2020-10-24 23:15:48,318 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100008 for user 100000
2020-10-24 23:15:48,318 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.delete]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2020-10-24 23:15:48,318 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29988437<open>)] for JPA transaction
2020-10-24 23:15:48,318 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:48,452 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@131fd25]
2020-10-24 23:15:48,457 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:15:48,457 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(29988437<open>)]
2020-10-24 23:15:48,458 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29988437<open>)] after transaction
2020-10-24 23:15:48,463 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-24 23:15:48,463 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-24 23:15:48,463 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(17040240<open>)] for JPA transaction
2020-10-24 23:15:48,463 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:48,495 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1c3e1e0] read-only
2020-10-24 23:15:48,496 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1fc6800]
2020-10-24 23:15:48,499 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:15:48,499 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(17040240<open>)]
2020-10-24 23:15:48,500 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1c3e1e0]
2020-10-24 23:15:48,500 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(17040240<open>)] after transaction
2020-10-24 23:15:51,003 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100007 for user 100000
2020-10-24 23:15:51,004 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.delete]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2020-10-24 23:15:51,004 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(18077078<open>)] for JPA transaction
2020-10-24 23:15:51,004 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:51,036 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d43004]
2020-10-24 23:15:51,038 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:15:51,038 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(18077078<open>)]
2020-10-24 23:15:51,039 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(18077078<open>)] after transaction
2020-10-24 23:15:51,041 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-24 23:15:51,041 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-24 23:15:51,041 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(20346559<open>)] for JPA transaction
2020-10-24 23:15:51,042 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:51,074 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1f19ca9] read-only
2020-10-24 23:15:51,074 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1ce1dcf]
2020-10-24 23:15:51,077 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:15:51,077 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(20346559<open>)]
2020-10-24 23:15:51,078 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1f19ca9]
2020-10-24 23:15:51,078 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(20346559<open>)] after transaction
2020-10-24 23:15:51,800 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100006 for user 100000
2020-10-24 23:15:51,801 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.delete]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2020-10-24 23:15:51,801 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(18372789<open>)] for JPA transaction
2020-10-24 23:15:51,801 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:51,833 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1e033c5]
2020-10-24 23:15:51,835 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:15:51,836 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(18372789<open>)]
2020-10-24 23:15:51,836 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(18372789<open>)] after transaction
2020-10-24 23:15:51,838 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-24 23:15:51,838 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-24 23:15:51,839 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(3974536<open>)] for JPA transaction
2020-10-24 23:15:51,839 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:51,870 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@fb497f] read-only
2020-10-24 23:15:51,870 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@c4cef8]
2020-10-24 23:15:51,873 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:15:51,873 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(3974536<open>)]
2020-10-24 23:15:51,873 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@fb497f]
2020-10-24 23:15:51,873 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(3974536<open>)] after transaction
2020-10-24 23:15:55,584 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-24T23:15, description='f', calories=1000} for user 100000
2020-10-24 23:15:55,585 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2020-10-24 23:15:55,585 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(9105496<open>)] for JPA transaction
2020-10-24 23:15:55,585 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:55,617 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@146abe6]
2020-10-24 23:15:55,632 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:15:55,632 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(9105496<open>)]
2020-10-24 23:15:55,666 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(9105496<open>)] after transaction
2020-10-24 23:15:55,668 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-24 23:15:55,668 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-24 23:15:55,668 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23308284<open>)] for JPA transaction
2020-10-24 23:15:55,668 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:15:55,700 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@2dcc7b] read-only
2020-10-24 23:15:55,700 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4cf4b3]
2020-10-24 23:15:55,703 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:15:55,703 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(23308284<open>)]
2020-10-24 23:15:55,703 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@2dcc7b]
2020-10-24 23:15:55,703 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23308284<open>)] after transaction
2020-10-24 23:16:00,613 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-24T23:15, description='ff', calories=1000} for user 100000
2020-10-24 23:16:00,613 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2020-10-24 23:16:00,613 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(21722998<open>)] for JPA transaction
2020-10-24 23:16:00,613 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:16:00,646 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@fca8b6]
2020-10-24 23:16:00,647 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:16:00,647 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(21722998<open>)]
2020-10-24 23:16:00,661 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 23505
2020-10-24 23:16:00,661 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "meals_unique_user_datetime_idx"
  Подробности: Ключ "(user_id, date_time)=(100000, 2020-10-24 23:15:00)" уже существует.
2020-10-24 23:16:00,668 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollbackOnCommitException:890 - Initiating transaction rollback after commit exception
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:298)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:255)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:538)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:633)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:386)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy57.save(Unknown Source)
	at ru.javawebinar.topjava.service.MealService.create(MealService.java:48)
	at ru.javawebinar.topjava.web.meal.MealRestController.create(MealRestController.java:52)
	at ru.javawebinar.topjava.web.MealServlet.doPost(MealServlet.java:49)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:688)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1639)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:109)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3260)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3787)
	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at org.hibernate.engine.spi.ActionQueue$$Lambda$217/17775468.accept(Unknown Source)
	at java.util.LinkedHashMap.forEach(LinkedHashMap.java:676)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:348)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.internal.SessionImpl$$Lambda$210/7021866.accept(Unknown Source)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:102)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1362)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:453)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3212)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2380)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:447)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:534)
	... 35 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "meals_unique_user_datetime_idx"
  Подробности: Ключ "(user_id, date_time)=(100000, 2020-10-24 23:15:00)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:473)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:393)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:164)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 57 common frames omitted
2020-10-24 23:16:00,669 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(21722998<open>)]
2020-10-24 23:16:00,669 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(21722998<open>)] after transaction
2020-10-24 23:16:41,081 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-24T23:15, description='ff', calories=1000} for user 100000
2020-10-24 23:16:41,081 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2020-10-24 23:16:41,081 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(20223114<open>)] for JPA transaction
2020-10-24 23:16:41,081 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:16:41,115 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@101d417]
2020-10-24 23:16:41,115 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:16:41,116 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(20223114<open>)]
2020-10-24 23:16:41,120 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 23505
2020-10-24 23:16:41,120 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "meals_unique_user_datetime_idx"
  Подробности: Ключ "(user_id, date_time)=(100000, 2020-10-24 23:15:00)" уже существует.
2020-10-24 23:16:41,121 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollbackOnCommitException:890 - Initiating transaction rollback after commit exception
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:298)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:255)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:538)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:633)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:386)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy57.save(Unknown Source)
	at ru.javawebinar.topjava.service.MealService.create(MealService.java:48)
	at ru.javawebinar.topjava.web.meal.MealRestController.create(MealRestController.java:52)
	at ru.javawebinar.topjava.web.MealServlet.doPost(MealServlet.java:49)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:688)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1639)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:109)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3260)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3787)
	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at org.hibernate.engine.spi.ActionQueue$$Lambda$217/17775468.accept(Unknown Source)
	at java.util.LinkedHashMap.forEach(LinkedHashMap.java:676)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:348)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.internal.SessionImpl$$Lambda$210/7021866.accept(Unknown Source)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:102)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1362)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:453)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3212)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2380)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:447)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:534)
	... 35 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности "meals_unique_user_datetime_idx"
  Подробности: Ключ "(user_id, date_time)=(100000, 2020-10-24 23:15:00)" уже существует.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:473)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:393)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:164)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 57 common frames omitted
2020-10-24 23:16:41,121 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(20223114<open>)]
2020-10-24 23:16:41,121 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(20223114<open>)] after transaction
2020-10-24 23:16:53,403 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-24T23:16, description='ff', calories=1000} for user 100000
2020-10-24 23:16:53,403 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2020-10-24 23:16:53,403 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(22583191<open>)] for JPA transaction
2020-10-24 23:16:53,403 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:16:53,440 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1a76353]
2020-10-24 23:16:53,441 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:16:53,441 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(22583191<open>)]
2020-10-24 23:16:53,444 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(22583191<open>)] after transaction
2020-10-24 23:16:53,446 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-24 23:16:53,446 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-24 23:16:53,446 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(27266316<open>)] for JPA transaction
2020-10-24 23:16:53,447 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:16:53,478 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@16c35f7] read-only
2020-10-24 23:16:53,478 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1e401e]
2020-10-24 23:16:53,480 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:16:53,480 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(27266316<open>)]
2020-10-24 23:16:53,481 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@16c35f7]
2020-10-24 23:16:53,481 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(27266316<open>)] after transaction
2020-10-24 23:17:05,187 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-24T23:17, description='bc', calories=1000} for user 100000
2020-10-24 23:17:05,188 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2020-10-24 23:17:05,188 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(17381245<open>)] for JPA transaction
2020-10-24 23:17:05,188 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:17:05,221 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@507181]
2020-10-24 23:17:05,222 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:17:05,222 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(17381245<open>)]
2020-10-24 23:17:05,225 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(17381245<open>)] after transaction
2020-10-24 23:17:05,227 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-24 23:17:05,227 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-24 23:17:05,227 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23498467<open>)] for JPA transaction
2020-10-24 23:17:05,227 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:17:05,258 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1e94666] read-only
2020-10-24 23:17:05,259 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3317e9]
2020-10-24 23:17:05,262 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-24 23:17:05,262 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(23498467<open>)]
2020-10-24 23:17:05,262 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1e94666]
2020-10-24 23:17:05,262 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23498467<open>)] after transaction
2020-10-24 23:19:33,871 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@dcd7bb, started on Sat Oct 24 23:15:41 MSK 2020
2020-10-24 23:19:33,871 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-24 23:19:33,871 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-24 23:19:33,904 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:16:54,920 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@b38979
2020-10-25 16:16:55,140 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 16:16:55,140 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 16:16:55,173 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 16:16:55,173 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 16:16:55,173 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 16:16:55,174 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 16:16:55,199 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 16:16:55,199 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 16:16:55,213 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 16:16:55,249 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 16:16:55,303 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 16:16:55,342 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 16:16:55,343 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 16:16:55,344 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 16:16:55,345 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 16:16:55,347 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 16:16:55,351 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 16:16:55,352 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 16:16:55,383 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 16:16:55,503 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 16:16:55,504 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 16:16:55,522 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 16:16:55,534 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 16:16:55,550 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 16:16:55,575 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 16:16:55,665 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 16:16:55,845 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 16:16:56,046 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:16:56,240 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 16:16:56,718 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 16:16:57,446 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-25 16:16:57,576 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:16:57,579 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-25 16:16:57,587 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-25 16:16:57,608 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-25 16:16:57,609 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-25 16:16:57,609 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-25 16:16:57,611 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-25 16:16:57,612 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-25 16:16:57,612 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-25 16:16:57,613 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-25 16:16:57,617 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-25 16:16:57,617 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-25 16:16:57,624 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-25 16:16:57,638 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-25 16:16:59,402 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-25 16:16:59,421 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 16:16:59,475 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23571789<open>)] for JPA transaction
2020-10-25 16:16:59,479 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:16:59,514 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@122aaaa] read-only
2020-10-25 16:16:59,518 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d90f57]
2020-10-25 16:16:59,557 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 42P01
2020-10-25 16:16:59,557 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: отношение "meals" не существует
  Позиция: 182
2020-10-25 16:16:59,562 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback
2020-10-25 16:16:59,562 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(23571789<open>)]
2020-10-25 16:16:59,564 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@122aaaa]
2020-10-25 16:16:59,564 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23571789<open>)] after transaction
2020-10-25 16:17:30,257 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@b38979, started on Sun Oct 25 16:16:54 MSK 2020
2020-10-25 16:17:30,258 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:17:43,224 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@f338bf
2020-10-25 16:17:43,384 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 16:17:43,385 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 16:17:43,419 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 16:17:43,419 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 16:17:43,420 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 16:17:43,420 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 16:17:43,446 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 16:17:43,446 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 16:17:43,459 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 16:17:43,496 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 16:17:43,549 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 16:17:43,586 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 16:17:43,587 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 16:17:43,587 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 16:17:43,589 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 16:17:43,590 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 16:17:43,595 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 16:17:43,595 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 16:17:43,627 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 16:17:43,739 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 16:17:43,740 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 16:17:43,757 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 16:17:43,770 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 16:17:43,786 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 16:17:43,804 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 16:17:43,878 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 16:17:44,072 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 16:17:44,249 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:17:44,421 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 16:17:44,839 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 16:17:45,527 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-25 16:17:45,648 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:17:45,651 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-25 16:17:45,690 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-25 16:17:45,711 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-25 16:17:45,712 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-25 16:17:45,713 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-25 16:17:45,715 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-25 16:17:45,715 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-25 16:17:45,716 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-25 16:17:45,717 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-25 16:17:45,720 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-25 16:17:45,721 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-25 16:17:45,728 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-25 16:17:45,739 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-25 16:17:51,266 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-25 16:17:51,280 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 16:17:51,338 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(13128760<open>)] for JPA transaction
2020-10-25 16:17:51,343 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:17:51,479 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@6fb30f] read-only
2020-10-25 16:17:51,482 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@ef8443]
2020-10-25 16:17:51,513 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 42P01
2020-10-25 16:17:51,513 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: отношение "meals" не существует
  Позиция: 182
2020-10-25 16:17:51,517 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback
2020-10-25 16:17:51,517 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(13128760<open>)]
2020-10-25 16:17:51,519 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@6fb30f]
2020-10-25 16:17:51,519 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(13128760<open>)] after transaction
2020-10-25 16:20:17,304 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@f338bf, started on Sun Oct 25 16:17:43 MSK 2020
2020-10-25 16:20:17,305 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:20:29,151 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@c92dba
2020-10-25 16:20:29,312 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 16:20:29,313 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 16:20:29,347 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 16:20:29,347 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 16:20:29,348 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 16:20:29,348 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 16:20:29,371 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 16:20:29,372 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 16:20:29,387 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 16:20:29,421 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 16:20:29,474 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 16:20:29,510 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 16:20:29,511 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 16:20:29,511 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 16:20:29,513 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 16:20:29,514 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 16:20:29,518 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 16:20:29,519 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 16:20:29,550 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 16:20:29,660 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 16:20:29,662 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 16:20:29,678 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 16:20:29,691 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 16:20:29,707 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 16:20:29,725 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 16:20:29,795 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 16:20:29,990 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 16:20:30,168 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:20:30,329 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 16:20:30,739 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 16:20:31,414 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-25 16:20:31,564 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:20:31,567 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-25 16:20:31,574 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-25 16:20:31,594 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-25 16:20:31,595 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-25 16:20:31,596 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-25 16:20:31,598 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-25 16:20:31,598 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-25 16:20:31,599 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-25 16:20:31,600 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-25 16:20:31,603 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-25 16:20:31,604 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-25 16:20:31,611 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-25 16:20:31,624 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-25 16:20:41,145 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-25 16:20:41,164 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 16:20:41,212 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(13128760<open>)] for JPA transaction
2020-10-25 16:20:41,216 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:20:41,251 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@6fb30f] read-only
2020-10-25 16:20:41,255 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@ef8443]
2020-10-25 16:20:41,289 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 42P01
2020-10-25 16:20:41,289 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: отношение "meals" не существует
  Позиция: 182
2020-10-25 16:20:41,293 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback
2020-10-25 16:20:41,293 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(13128760<open>)]
2020-10-25 16:20:41,295 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@6fb30f]
2020-10-25 16:20:41,295 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(13128760<open>)] after transaction
2020-10-25 16:27:32,913 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@c92dba, started on Sun Oct 25 16:20:29 MSK 2020
2020-10-25 16:27:32,914 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:27:44,870 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@19e86a4
2020-10-25 16:27:45,031 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 16:27:45,031 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 16:27:45,065 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 16:27:45,066 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 16:27:45,066 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 16:27:45,066 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 16:27:45,091 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 16:27:45,091 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 16:27:45,104 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 16:27:45,141 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 16:27:45,193 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 16:27:45,229 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 16:27:45,231 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 16:27:45,231 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 16:27:45,232 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 16:27:45,233 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 16:27:45,238 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 16:27:45,238 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 16:27:45,269 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 16:27:45,381 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 16:27:45,383 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 16:27:45,399 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 16:27:45,413 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 16:27:45,429 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 16:27:45,447 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 16:27:45,518 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 16:27:45,690 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 16:27:45,886 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:27:46,048 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 16:27:46,463 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 16:27:47,136 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-25 16:27:47,254 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:27:47,257 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-25 16:27:47,264 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-25 16:27:47,286 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-25 16:27:47,287 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-25 16:27:47,288 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-25 16:27:47,290 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-25 16:27:47,291 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-25 16:27:47,291 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-25 16:27:47,292 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-25 16:27:47,296 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-25 16:27:47,296 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-25 16:27:47,303 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-25 16:27:47,317 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-25 16:27:49,257 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-25 16:27:49,271 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 16:27:49,353 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(33534878<open>)] for JPA transaction
2020-10-25 16:27:49,358 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:27:49,392 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@18a9cc2] read-only
2020-10-25 16:27:49,395 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@73b35f]
2020-10-25 16:27:49,426 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 42P01
2020-10-25 16:27:49,426 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: отношение "meals" не существует
  Позиция: 182
2020-10-25 16:27:49,430 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback
2020-10-25 16:27:49,430 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(33534878<open>)]
2020-10-25 16:27:49,432 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@18a9cc2]
2020-10-25 16:27:49,432 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(33534878<open>)] after transaction
2020-10-25 16:35:33,194 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@19e86a4, started on Sun Oct 25 16:27:44 MSK 2020
2020-10-25 16:35:33,194 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:35:46,513 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@13e7b96
2020-10-25 16:35:46,673 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 16:35:46,673 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 16:35:46,707 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 16:35:46,708 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 16:35:46,708 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 16:35:46,709 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 16:35:46,734 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 16:35:46,735 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 16:35:46,748 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 16:35:46,784 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 16:35:46,835 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 16:35:46,871 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 16:35:46,872 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 16:35:46,873 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 16:35:46,874 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 16:35:46,875 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 16:35:46,880 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 16:35:46,880 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 16:35:46,910 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 16:35:47,021 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 16:35:47,023 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 16:35:47,041 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 16:35:47,052 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 16:35:47,068 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 16:35:47,090 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 16:35:47,159 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 16:35:47,352 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 16:35:47,525 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:35:47,685 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 16:35:47,972 WARN  o.h.boot.internal.SessionFactoryOptionsBuilder.<init>:409 - Unrecognized hibernate.hbm2ddl.auto value: 'true'.  Supported values include 'create', 'create-drop', 'create-only', 'drop', 'update', 'none' and 'validate'.  Ignoring
2020-10-25 16:35:48,097 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 16:35:48,769 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:559 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [spring/spring-db.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.IllegalArgumentException: Unrecognized legacy `hibernate.hbm2ddl.auto` value : `true`
2020-10-25 16:35:50,849 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1040370
2020-10-25 16:35:50,866 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 16:35:50,866 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 16:35:50,871 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 16:35:50,871 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 16:35:50,871 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 16:35:50,872 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 16:35:50,882 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 16:35:50,882 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 16:35:50,883 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 16:35:50,884 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 16:35:50,889 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 16:35:50,906 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 16:35:50,906 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 16:35:50,907 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 16:35:50,907 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 16:35:50,908 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 16:35:50,908 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 16:35:50,909 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 16:35:50,923 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 16:35:50,941 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 16:35:50,942 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 16:35:50,949 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 16:35:50,955 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 16:35:50,963 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 16:35:50,963 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 16:35:50,973 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:35:51,005 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 16:35:51,028 WARN  o.h.boot.internal.SessionFactoryOptionsBuilder.<init>:409 - Unrecognized hibernate.hbm2ddl.auto value: 'true'.  Supported values include 'create', 'create-drop', 'create-only', 'drop', 'update', 'none' and 'validate'.  Ignoring
2020-10-25 16:35:51,068 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:559 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [spring/spring-db.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.IllegalArgumentException: Unrecognized legacy `hibernate.hbm2ddl.auto` value : `true`
2020-10-25 16:37:25,199 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1439818
2020-10-25 16:37:25,360 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 16:37:25,360 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 16:37:25,394 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 16:37:25,395 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 16:37:25,395 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 16:37:25,396 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 16:37:25,419 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 16:37:25,420 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 16:37:25,435 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 16:37:25,471 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 16:37:25,522 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 16:37:25,560 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 16:37:25,561 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 16:37:25,561 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 16:37:25,562 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 16:37:25,564 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 16:37:25,568 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 16:37:25,569 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 16:37:25,599 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 16:37:25,710 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 16:37:25,711 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 16:37:25,729 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 16:37:25,741 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 16:37:25,757 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 16:37:25,777 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 16:37:25,847 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 16:37:26,039 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 16:37:26,214 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:37:26,375 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 16:37:26,663 WARN  o.h.boot.internal.SessionFactoryOptionsBuilder.<init>:409 - Unrecognized hibernate.hbm2ddl.auto value: 'true'.  Supported values include 'create', 'create-drop', 'create-only', 'drop', 'update', 'none' and 'validate'.  Ignoring
2020-10-25 16:37:26,788 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 16:37:27,456 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:559 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [spring/spring-db.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.IllegalArgumentException: Unrecognized legacy `hibernate.hbm2ddl.auto` value : `true`
2020-10-25 16:38:03,415 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@127ef92
2020-10-25 16:38:03,575 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 16:38:03,576 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 16:38:03,609 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 16:38:03,610 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 16:38:03,610 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 16:38:03,610 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 16:38:03,634 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 16:38:03,634 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 16:38:03,647 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 16:38:03,683 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 16:38:03,735 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 16:38:03,771 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 16:38:03,772 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 16:38:03,773 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 16:38:03,774 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 16:38:03,775 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 16:38:03,780 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 16:38:03,780 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 16:38:03,812 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 16:38:03,921 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 16:38:03,923 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 16:38:03,939 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 16:38:03,952 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 16:38:03,968 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 16:38:03,985 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 16:38:04,057 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 16:38:04,252 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 16:38:04,426 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:38:04,583 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 16:38:04,995 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 16:38:05,678 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:38:05,715 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000
2020-10-25 16:38:05,715 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - отношение "meals" не существует, пропускается
2020-10-25 16:38:05,716 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000
2020-10-25 16:38:05,716 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - отношение "user_roles" не существует, пропускается
2020-10-25 16:38:05,716 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000
2020-10-25 16:38:05,716 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - таблица "meals" не существует, пропускается
2020-10-25 16:38:05,717 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000
2020-10-25 16:38:05,717 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - таблица "user_roles" не существует, пропускается
2020-10-25 16:38:05,717 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000
2020-10-25 16:38:05,717 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - таблица "users" не существует, пропускается
2020-10-25 16:38:05,723 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:38:05,845 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-25 16:38:05,963 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:38:05,966 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-25 16:38:05,974 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-25 16:38:05,997 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-25 16:38:05,998 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-25 16:38:05,999 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-25 16:38:06,001 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-25 16:38:06,001 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-25 16:38:06,002 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-25 16:38:06,003 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-25 16:38:06,006 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-25 16:38:06,007 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-25 16:38:06,014 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-25 16:38:06,058 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-25 16:38:08,238 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-25 16:38:08,251 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 16:38:08,298 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(14234096<open>)] for JPA transaction
2020-10-25 16:38:08,303 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:38:08,342 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1d5d818] read-only
2020-10-25 16:38:08,345 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1628e20]
2020-10-25 16:38:08,369 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 16:38:08,369 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(14234096<open>)]
2020-10-25 16:38:08,370 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1d5d818]
2020-10-25 16:38:08,370 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(14234096<open>)] after transaction
2020-10-25 16:38:46,969 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@127ef92, started on Sun Oct 25 16:38:03 MSK 2020
2020-10-25 16:38:46,969 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:47:02,662 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1e5c4d4
2020-10-25 16:47:02,823 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 16:47:02,823 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 16:47:02,857 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 16:47:02,857 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 16:47:02,858 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 16:47:02,858 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 16:47:02,881 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 16:47:02,882 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 16:47:02,896 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 16:47:02,931 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 16:47:02,983 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 16:47:03,019 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 16:47:03,020 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 16:47:03,020 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 16:47:03,021 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 16:47:03,023 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 16:47:03,027 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 16:47:03,028 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 16:47:03,058 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 16:47:03,169 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 16:47:03,171 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 16:47:03,187 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 16:47:03,200 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 16:47:03,216 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 16:47:03,233 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 16:47:03,303 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 16:47:03,494 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 16:47:03,668 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:47:03,827 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 16:47:04,238 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 16:47:04,917 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:47:04,953 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000
2020-10-25 16:47:04,953 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - отношение "meals" не существует, пропускается
2020-10-25 16:47:04,956 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000
2020-10-25 16:47:04,956 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - таблица "meals" не существует, пропускается
2020-10-25 16:47:04,965 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:47:05,045 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-25 16:47:05,196 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:47:05,199 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-25 16:47:05,206 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-25 16:47:05,227 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-25 16:47:05,228 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-25 16:47:05,229 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-25 16:47:05,230 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-25 16:47:05,231 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-25 16:47:05,232 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-25 16:47:05,232 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-25 16:47:05,236 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-25 16:47:05,237 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-25 16:47:05,246 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-25 16:47:05,258 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-25 16:55:28,720 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@1e5c4d4, started on Sun Oct 25 16:47:02 MSK 2020
2020-10-25 16:55:28,721 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:55:39,509 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@c92dba
2020-10-25 16:55:39,671 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 16:55:39,672 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 16:55:39,706 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 16:55:39,706 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 16:55:39,707 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 16:55:39,707 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 16:55:39,730 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 16:55:39,731 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 16:55:39,746 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 16:55:39,780 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 16:55:39,832 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 16:55:39,868 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 16:55:39,869 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 16:55:39,870 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 16:55:39,871 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 16:55:39,873 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 16:55:39,877 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 16:55:39,877 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 16:55:39,907 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 16:55:40,017 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 16:55:40,019 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 16:55:40,035 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 16:55:40,048 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 16:55:40,064 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 16:55:40,083 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 16:55:40,152 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 16:55:40,344 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 16:55:40,518 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:55:40,683 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 16:55:41,094 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 16:55:41,774 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:55:41,910 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000
2020-10-25 16:55:41,910 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - ограничение "fk677c66qpjr7234luomahc1ale" в таблице "meals" не существует, пропускается
2020-10-25 16:55:41,911 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000
2020-10-25 16:55:41,911 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - ограничение "fkhfh9dx7w3ubf1co1vdev94g3f" в таблице "user_roles" не существует, пропускается
2020-10-25 16:55:41,923 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 16:55:42,006 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-25 16:55:42,156 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 16:55:42,158 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-25 16:55:42,165 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-25 16:55:42,186 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-25 16:55:42,187 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-25 16:55:42,187 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-25 16:55:42,189 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-25 16:55:42,190 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-25 16:55:42,190 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-25 16:55:42,191 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-25 16:55:42,196 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-25 16:55:42,197 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-25 16:55:42,207 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-25 16:55:42,218 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-25 17:26:56,571 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@c92dba, started on Sun Oct 25 16:55:39 MSK 2020
2020-10-25 17:26:56,572 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 17:33:04,884 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@13879c5
2020-10-25 17:33:05,046 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 17:33:05,047 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 17:33:05,083 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 17:33:05,084 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 17:33:05,084 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 17:33:05,084 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 17:33:05,113 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 17:33:05,113 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 17:33:05,132 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 17:33:05,169 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 17:33:05,220 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 17:33:05,257 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 17:33:05,259 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 17:33:05,259 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 17:33:05,260 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 17:33:05,262 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 17:33:05,268 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 17:33:05,268 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 17:33:05,298 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 17:33:05,408 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 17:33:05,410 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 17:33:05,429 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 17:33:05,440 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 17:33:05,459 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 17:33:05,477 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 17:33:05,570 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 17:33:05,743 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 17:33:05,921 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:33:06,087 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 17:33:06,502 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 17:33:07,209 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-25 17:33:07,363 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 17:33:07,366 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-25 17:33:07,373 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-25 17:33:07,394 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-25 17:33:07,395 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-25 17:33:07,395 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-25 17:33:07,397 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-25 17:33:07,398 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-25 17:33:07,398 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-25 17:33:07,399 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-25 17:33:07,403 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-25 17:33:07,403 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-25 17:33:07,410 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'
2020-10-25 17:33:07,434 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-25 17:33:07,434 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:33:07,467 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]
2020-10-25 17:33:07,475 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles
2020-10-25 17:33:07,477 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals
2020-10-25 17:33:07,480 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users
2020-10-25 17:33:07,480 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq
2020-10-25 17:33:07,483 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000
2020-10-25 17:33:07,499 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )
2020-10-25 17:33:07,504 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)
2020-10-25 17:33:07,517 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-25 17:33:07,528 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-25 17:33:07,534 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)
2020-10-25 17:33:07,534 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 67 ms.
2020-10-25 17:33:07,534 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]
2020-10-25 17:33:07,536 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles
2020-10-25 17:33:07,537 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals
2020-10-25 17:33:07,538 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users
2020-10-25 17:33:07,539 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
2020-10-25 17:33:07,540 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')
2020-10-25 17:33:07,541 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)
2020-10-25 17:33:07,542 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)
2020-10-25 17:33:07,542 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 8 ms.
2020-10-25 17:33:07,543 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-25 17:33:07,556 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-25 17:33:10,349 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-25 17:33:10,361 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:33:10,407 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(2581969<open>)] for JPA transaction
2020-10-25 17:33:10,412 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:33:10,443 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@f8e507] read-only
2020-10-25 17:33:10,447 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1fecbca]
2020-10-25 17:33:10,497 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:33:10,498 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(2581969<open>)]
2020-10-25 17:33:10,499 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@f8e507]
2020-10-25 17:33:10,499 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(2581969<open>)] after transaction
2020-10-25 17:33:12,591 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100008 for user 100000
2020-10-25 17:33:12,592 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.delete]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2020-10-25 17:33:12,593 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(5676216<open>)] for JPA transaction
2020-10-25 17:33:12,593 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:33:12,625 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@aef7c8]
2020-10-25 17:33:12,630 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:33:12,630 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(5676216<open>)]
2020-10-25 17:33:12,631 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(5676216<open>)] after transaction
2020-10-25 17:33:12,635 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-25 17:33:12,635 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:33:12,636 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29840049<open>)] for JPA transaction
2020-10-25 17:33:12,636 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:33:12,768 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@100b339] read-only
2020-10-25 17:33:12,768 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@13f39c1]
2020-10-25 17:33:12,771 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:33:12,771 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(29840049<open>)]
2020-10-25 17:33:12,771 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@100b339]
2020-10-25 17:33:12,771 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29840049<open>)] after transaction
2020-10-25 17:37:24,003 INFO  ru.javawebinar.topjava.web.meal.MealRestController.get:32 - get meal 100007 for user 100000
2020-10-25 17:37:24,004 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.get]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:37:24,004 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(17193591<open>)] for JPA transaction
2020-10-25 17:37:24,004 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:37:24,037 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1c1ab27] read-only
2020-10-25 17:37:24,037 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1fe3107]
2020-10-25 17:37:24,049 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:37:24,050 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(17193591<open>)]
2020-10-25 17:37:24,050 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1c1ab27]
2020-10-25 17:37:24,050 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(17193591<open>)] after transaction
2020-10-25 17:37:31,894 INFO  ru.javawebinar.topjava.web.meal.MealRestController.update:58 - update Meal{id=100007, dateTime=2020-01-31T13:00, description='Обед', calories=1009} for user 100000
2020-10-25 17:37:31,894 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2020-10-25 17:37:31,894 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(32617104<open>)] for JPA transaction
2020-10-25 17:37:31,894 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:37:31,926 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1cdce6d]
2020-10-25 17:37:31,940 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:37:31,940 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(32617104<open>)]
2020-10-25 17:37:31,973 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(32617104<open>)] after transaction
2020-10-25 17:37:31,975 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-25 17:37:31,976 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:37:31,976 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(33229913<open>)] for JPA transaction
2020-10-25 17:37:31,976 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:37:32,007 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@6607cc] read-only
2020-10-25 17:37:32,007 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6f6009]
2020-10-25 17:37:32,010 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:37:32,010 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(33229913<open>)]
2020-10-25 17:37:32,010 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@6607cc]
2020-10-25 17:37:32,011 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(33229913<open>)] after transaction
2020-10-25 17:40:54,564 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@13879c5, started on Sun Oct 25 17:33:04 MSK 2020
2020-10-25 17:40:54,564 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-25 17:40:54,564 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:40:54,597 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 17:41:05,965 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1ebe4ac
2020-10-25 17:41:06,127 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 17:41:06,128 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 17:41:06,160 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 17:41:06,160 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 17:41:06,161 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 17:41:06,161 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 17:41:06,188 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 17:41:06,188 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 17:41:06,209 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 17:41:06,245 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 17:41:06,299 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 17:41:06,335 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 17:41:06,336 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 17:41:06,337 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 17:41:06,338 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 17:41:06,339 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 17:41:06,344 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 17:41:06,344 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 17:41:06,376 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 17:41:06,486 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 17:41:06,488 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 17:41:06,505 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 17:41:06,517 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 17:41:06,533 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 17:41:06,553 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 17:41:06,622 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 17:41:06,814 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 17:41:06,988 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:41:07,152 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 17:41:07,562 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 17:41:08,235 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-25 17:41:08,352 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 17:41:08,355 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-25 17:41:08,362 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-25 17:41:08,382 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-25 17:41:08,383 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-25 17:41:08,383 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-25 17:41:08,385 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-25 17:41:08,386 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-25 17:41:08,386 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-25 17:41:08,387 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-25 17:41:08,391 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-25 17:41:08,391 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-25 17:41:08,401 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'
2020-10-25 17:41:08,420 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-25 17:41:08,421 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:41:08,453 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]
2020-10-25 17:41:08,461 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles
2020-10-25 17:41:08,464 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals
2020-10-25 17:41:08,467 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users
2020-10-25 17:41:08,468 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq
2020-10-25 17:41:08,471 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000
2020-10-25 17:41:08,484 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )
2020-10-25 17:41:08,490 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)
2020-10-25 17:41:08,502 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-25 17:41:08,514 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-25 17:41:08,519 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)
2020-10-25 17:41:08,520 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 67 ms.
2020-10-25 17:41:08,520 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]
2020-10-25 17:41:08,521 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles
2020-10-25 17:41:08,522 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals
2020-10-25 17:41:08,523 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users
2020-10-25 17:41:08,524 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
2020-10-25 17:41:08,525 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')
2020-10-25 17:41:08,526 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)
2020-10-25 17:41:08,527 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)
2020-10-25 17:41:08,527 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
2020-10-25 17:41:08,528 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-25 17:41:08,573 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-25 17:41:11,599 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-25 17:41:11,610 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:41:11,662 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23778712<open>)] for JPA transaction
2020-10-25 17:41:11,666 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:41:11,699 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965] read-only
2020-10-25 17:41:11,702 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d6300a]
2020-10-25 17:41:11,747 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:41:11,747 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(23778712<open>)]
2020-10-25 17:41:11,748 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965]
2020-10-25 17:41:11,748 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23778712<open>)] after transaction
2020-10-25 17:41:28,705 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-31 - 2020-01-31) time(null - null) for user 100000
2020-10-25 17:41:28,706 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:41:28,706 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29614560<open>)] for JPA transaction
2020-10-25 17:41:28,706 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:41:28,741 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@feebdb] read-only
2020-10-25 17:41:28,741 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1267237]
2020-10-25 17:41:28,742 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback
2020-10-25 17:41:28,742 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(29614560<open>)]
2020-10-25 17:41:28,745 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@feebdb]
2020-10-25 17:41:28,745 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29614560<open>)] after transaction
2020-10-25 17:42:00,688 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@1ebe4ac, started on Sun Oct 25 17:41:05 MSK 2020
2020-10-25 17:42:00,688 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-25 17:42:00,688 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:42:00,725 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 17:42:12,074 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@cb156f
2020-10-25 17:42:12,236 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]
2020-10-25 17:42:12,236 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\UserService.class]
2020-10-25 17:42:12,270 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\meal\MealRestController.class]
2020-10-25 17:42:12,271 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\AdminRestController.class]
2020-10-25 17:42:12,271 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\web\user\ProfileRestController.class]
2020-10-25 17:42:12,271 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]
2020-10-25 17:42:12,298 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaMealRepository.class]
2020-10-25 17:42:12,299 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\repository\jpa\JpaUserRepository.class]
2020-10-25 17:42:12,317 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]
2020-10-25 17:42:12,353 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2020-10-25 17:42:12,404 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'
2020-10-25 17:42:12,439 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2020-10-25 17:42:12,441 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2020-10-25 17:42:12,441 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'
2020-10-25 17:42:12,442 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2020-10-25 17:42:12,444 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'
2020-10-25 17:42:12,448 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'
2020-10-25 17:42:12,448 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'
2020-10-25 17:42:12,479 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'
2020-10-25 17:42:12,589 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
2020-10-25 17:42:12,590 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
2020-10-25 17:42:12,608 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'
2020-10-25 17:42:12,619 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver
2020-10-25 17:42:12,635 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'
2020-10-25 17:42:12,653 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-10-25 17:42:12,745 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
2020-10-25 17:42:12,914 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-10-25 17:42:13,089 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:42:13,249 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2020-10-25 17:42:13,660 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
2020-10-25 17:42:14,333 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-10-25 17:42:14,480 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-10-25 17:42:14,483 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'
2020-10-25 17:42:14,489 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'
2020-10-25 17:42:14,510 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'
2020-10-25 17:42:14,511 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'
2020-10-25 17:42:14,511 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'
2020-10-25 17:42:14,513 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'
2020-10-25 17:42:14,514 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'
2020-10-25 17:42:14,514 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'
2020-10-25 17:42:14,515 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'
2020-10-25 17:42:14,519 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'
2020-10-25 17:42:14,519 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'
2020-10-25 17:42:14,526 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'
2020-10-25 17:42:14,548 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-25 17:42:14,548 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:42:14,581 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]
2020-10-25 17:42:14,594 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles
2020-10-25 17:42:14,598 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals
2020-10-25 17:42:14,601 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users
2020-10-25 17:42:14,602 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq
2020-10-25 17:42:14,604 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000
2020-10-25 17:42:14,618 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )
2020-10-25 17:42:14,624 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)
2020-10-25 17:42:14,635 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-25 17:42:14,647 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )
2020-10-25 17:42:14,653 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)
2020-10-25 17:42:14,653 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 72 ms.
2020-10-25 17:42:14,653 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]
2020-10-25 17:42:14,654 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles
2020-10-25 17:42:14,656 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals
2020-10-25 17:42:14,656 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users
2020-10-25 17:42:14,658 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000
2020-10-25 17:42:14,659 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')
2020-10-25 17:42:14,659 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)
2020-10-25 17:42:14,660 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)
2020-10-25 17:42:14,660 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.
2020-10-25 17:42:14,662 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
2020-10-25 17:42:14,673 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'
2020-10-25 17:42:18,166 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-25 17:42:18,178 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:42:18,224 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23778712<open>)] for JPA transaction
2020-10-25 17:42:18,228 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:42:18,261 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965] read-only
2020-10-25 17:42:18,264 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d6300a]
2020-10-25 17:42:18,313 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:42:18,313 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(23778712<open>)]
2020-10-25 17:42:18,314 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965]
2020-10-25 17:42:18,314 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23778712<open>)] after transaction
2020-10-25 17:42:25,531 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(null - 2020-01-31) time(null - null) for user 100000
2020-10-25 17:42:25,532 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:42:25,532 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29614560<open>)] for JPA transaction
2020-10-25 17:42:25,532 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:42:25,665 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@feebdb] read-only
2020-10-25 17:42:25,665 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1267237]
2020-10-25 17:42:25,675 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:42:25,675 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(29614560<open>)]
2020-10-25 17:42:25,676 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@feebdb]
2020-10-25 17:42:25,676 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29614560<open>)] after transaction
2020-10-25 17:42:47,797 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-31 - 2020-01-31) time(null - null) for user 100000
2020-10-25 17:42:47,798 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:42:47,798 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(18372789<open>)] for JPA transaction
2020-10-25 17:42:47,798 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:42:47,830 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1dfba26] read-only
2020-10-25 17:42:47,831 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1e033c5]
2020-10-25 17:42:47,834 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:42:47,834 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(18372789<open>)]
2020-10-25 17:42:47,834 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1dfba26]
2020-10-25 17:42:47,834 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(18372789<open>)] after transaction
2020-10-25 17:43:10,182 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-31 - 2020-01-31) time(null - 13:00) for user 100000
2020-10-25 17:43:10,183 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:43:10,183 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(24716629<open>)] for JPA transaction
2020-10-25 17:43:10,183 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:43:10,320 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@11d028e] read-only
2020-10-25 17:43:10,320 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5dbd8d]
2020-10-25 17:43:10,323 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:43:10,323 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(24716629<open>)]
2020-10-25 17:43:10,323 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@11d028e]
2020-10-25 17:43:10,323 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(24716629<open>)] after transaction
2020-10-25 17:43:18,400 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-31 - 2020-01-31) time(10:00 - 13:00) for user 100000
2020-10-25 17:43:18,400 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:43:18,400 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(4383038<open>)] for JPA transaction
2020-10-25 17:43:18,400 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:43:18,433 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1c1ee02] read-only
2020-10-25 17:43:18,433 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3aa7f9]
2020-10-25 17:43:18,436 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:43:18,436 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(4383038<open>)]
2020-10-25 17:43:18,437 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1c1ee02]
2020-10-25 17:43:18,437 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(4383038<open>)] after transaction
2020-10-25 17:43:26,683 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-31 - 2020-01-31) time(09:30 - 13:00) for user 100000
2020-10-25 17:43:26,683 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:43:26,683 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29988437<open>)] for JPA transaction
2020-10-25 17:43:26,684 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:43:26,716 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@131fd25] read-only
2020-10-25 17:43:26,716 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@337927]
2020-10-25 17:43:26,719 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:43:26,719 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(29988437<open>)]
2020-10-25 17:43:26,719 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@131fd25]
2020-10-25 17:43:26,720 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29988437<open>)] after transaction
2020-10-25 17:43:39,343 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
2020-10-25 17:43:39,343 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:43:39,344 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(17688636<open>)] for JPA transaction
2020-10-25 17:43:39,344 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:43:39,376 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@303030] read-only
2020-10-25 17:43:39,376 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@746347]
2020-10-25 17:43:39,379 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:43:39,379 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(17688636<open>)]
2020-10-25 17:43:39,379 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@303030]
2020-10-25 17:43:39,379 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(17688636<open>)] after transaction
2020-10-25 17:43:56,237 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(null - null) time(10:00 - 13:00) for user 100000
2020-10-25 17:43:56,237 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:43:56,237 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(20822057<open>)] for JPA transaction
2020-10-25 17:43:56,237 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:43:56,270 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@15f07a1] read-only
2020-10-25 17:43:56,270 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1e77d5b]
2020-10-25 17:43:56,273 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:43:56,273 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(20822057<open>)]
2020-10-25 17:43:56,274 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@15f07a1]
2020-10-25 17:43:56,274 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(20822057<open>)] after transaction
2020-10-25 17:44:02,285 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(null - null) time(10:00 - 13:05) for user 100000
2020-10-25 17:44:02,286 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2020-10-25 17:44:02,286 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(4904827<open>)] for JPA transaction
2020-10-25 17:44:02,286 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:44:02,319 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@4a8f0] read-only
2020-10-25 17:44:02,319 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@284c47]
2020-10-25 17:44:02,322 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit
2020-10-25 17:44:02,322 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(4904827<open>)]
2020-10-25 17:44:02,322 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@4a8f0]
2020-10-25 17:44:02,322 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(4904827<open>)] after transaction
2020-10-25 17:47:44,359 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@cb156f, started on Sun Oct 25 17:42:12 MSK 2020
2020-10-25 17:47:44,359 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
2020-10-25 17:47:44,359 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
2020-10-25 17:47:44,392 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
