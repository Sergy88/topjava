Index: src/main/java/ru/javawebinar/topjava/repository/jdbc/JdbcMealRepository.java
===================================================================
--- src/main/java/ru/javawebinar/topjava/repository/jdbc/JdbcMealRepository.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/repository/jdbc/JdbcMealRepository.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,86 +0,0 @@
-package ru.javawebinar.topjava.repository.jdbc;
-
-import org.springframework.beans.factory.annotation.Autowired;
-import org.springframework.dao.support.DataAccessUtils;
-import org.springframework.jdbc.core.BeanPropertyRowMapper;
-import org.springframework.jdbc.core.JdbcTemplate;
-import org.springframework.jdbc.core.RowMapper;
-import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;
-import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;
-import org.springframework.jdbc.core.simple.SimpleJdbcInsert;
-import org.springframework.stereotype.Repository;
-import ru.javawebinar.topjava.model.Meal;
-import ru.javawebinar.topjava.repository.MealRepository;
-
-import java.time.LocalDateTime;
-import java.util.List;
-
-@Repository
-public class JdbcMealRepository implements MealRepository {
-
-    private static final RowMapper<Meal> ROW_MAPPER = BeanPropertyRowMapper.newInstance(Meal.class);
-
-    private final JdbcTemplate jdbcTemplate;
-
-    private final NamedParameterJdbcTemplate namedParameterJdbcTemplate;
-
-    private final SimpleJdbcInsert insertMeal;
-
-    @Autowired
-    public JdbcMealRepository(JdbcTemplate jdbcTemplate, NamedParameterJdbcTemplate namedParameterJdbcTemplate) {
-        this.insertMeal = new SimpleJdbcInsert(jdbcTemplate)
-                .withTableName("meals")
-                .usingGeneratedKeyColumns("id");
-
-        this.jdbcTemplate = jdbcTemplate;
-        this.namedParameterJdbcTemplate = namedParameterJdbcTemplate;
-    }
-
-    @Override
-    public Meal save(Meal meal, int userId) {
-        MapSqlParameterSource map = new MapSqlParameterSource()
-                .addValue("id", meal.getId())
-                .addValue("description", meal.getDescription())
-                .addValue("calories", meal.getCalories())
-                .addValue("date_time", meal.getDateTime())
-                .addValue("user_id", userId);
-
-        if (meal.isNew()) {
-            Number newId = insertMeal.executeAndReturnKey(map);
-            meal.setId(newId.intValue());
-        } else {
-            if (namedParameterJdbcTemplate.update("" +
-                            "UPDATE meals " +
-                            "   SET description=:description, calories=:calories, date_time=:date_time " +
-                            " WHERE id=:id AND user_id=:user_id", map) == 0) {
-                return null;
-            }
-        }
-        return meal;
-    }
-
-    @Override
-    public boolean delete(int id, int userId) {
-        return jdbcTemplate.update("DELETE FROM meals WHERE id=? AND user_id=?", id, userId) != 0;
-    }
-
-    @Override
-    public Meal get(int id, int userId) {
-        List<Meal> meals = jdbcTemplate.query(
-                "SELECT * FROM meals WHERE id = ? AND user_id = ?", ROW_MAPPER, id, userId);
-        return DataAccessUtils.singleResult(meals);
-    }
-
-    @Override
-    public List<Meal> getAll(int userId) {
-        return jdbcTemplate.query(
-                "SELECT * FROM meals WHERE user_id=? ORDER BY date_time DESC", ROW_MAPPER, userId);
-    }
-
-    @Override
-    public List<Meal> getBetweenHalfOpen(LocalDateTime startDateTime, LocalDateTime endDateTime, int userId) {
-        return jdbcTemplate.query(
-                "SELECT * FROM meals WHERE user_id=?  AND date_time >=  ? AND date_time < ? ORDER BY date_time DESC",
-                ROW_MAPPER, userId, startDateTime, endDateTime);
-    }
-}
Index: .idea/libraries/Maven__org_glassfish_jaxb_jaxb_runtime_2_3_1.xml
===================================================================
--- .idea/libraries/Maven__org_glassfish_jaxb_jaxb_runtime_2_3_1.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_glassfish_jaxb_jaxb_runtime_2_3_1.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.glassfish.jaxb:jaxb-runtime:2.3.1">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/glassfish/jaxb/jaxb-runtime/2.3.1/jaxb-runtime-2.3.1.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/glassfish/jaxb/jaxb-runtime/2.3.1/jaxb-runtime-2.3.1-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/glassfish/jaxb/jaxb-runtime/2.3.1/jaxb-runtime-2.3.1-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: .idea/libraries/Maven__org_glassfish_jaxb_txw2_2_3_1.xml
===================================================================
--- .idea/libraries/Maven__org_glassfish_jaxb_txw2_2_3_1.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_glassfish_jaxb_txw2_2_3_1.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.glassfish.jaxb:txw2:2.3.1">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/glassfish/jaxb/txw2/2.3.1/txw2-2.3.1.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/glassfish/jaxb/txw2/2.3.1/txw2-2.3.1-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/glassfish/jaxb/txw2/2.3.1/txw2-2.3.1-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: .idea/libraries/Maven__org_springframework_spring_aop_5_2_9_RELEASE.xml
===================================================================
--- .idea/libraries/Maven__org_springframework_spring_aop_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_springframework_spring_aop_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.springframework:spring-aop:5.2.9.RELEASE">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-aop/5.2.9.RELEASE/spring-aop-5.2.9.RELEASE.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-aop/5.2.9.RELEASE/spring-aop-5.2.9.RELEASE-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-aop/5.2.9.RELEASE/spring-aop-5.2.9.RELEASE-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: .idea/libraries/Maven__org_springframework_spring_beans_5_2_9_RELEASE.xml
===================================================================
--- .idea/libraries/Maven__org_springframework_spring_beans_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_springframework_spring_beans_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.springframework:spring-beans:5.2.9.RELEASE">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-beans/5.2.9.RELEASE/spring-beans-5.2.9.RELEASE.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-beans/5.2.9.RELEASE/spring-beans-5.2.9.RELEASE-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-beans/5.2.9.RELEASE/spring-beans-5.2.9.RELEASE-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: .idea/libraries/Maven__org_springframework_spring_context_5_2_9_RELEASE.xml
===================================================================
--- .idea/libraries/Maven__org_springframework_spring_context_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_springframework_spring_context_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.springframework:spring-context:5.2.9.RELEASE">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-context/5.2.9.RELEASE/spring-context-5.2.9.RELEASE.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-context/5.2.9.RELEASE/spring-context-5.2.9.RELEASE-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-context/5.2.9.RELEASE/spring-context-5.2.9.RELEASE-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: .idea/libraries/Maven__org_springframework_spring_core_5_2_9_RELEASE.xml
===================================================================
--- .idea/libraries/Maven__org_springframework_spring_core_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_springframework_spring_core_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.springframework:spring-core:5.2.9.RELEASE">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-core/5.2.9.RELEASE/spring-core-5.2.9.RELEASE.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-core/5.2.9.RELEASE/spring-core-5.2.9.RELEASE-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-core/5.2.9.RELEASE/spring-core-5.2.9.RELEASE-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: .idea/libraries/Maven__org_springframework_spring_expression_5_2_9_RELEASE.xml
===================================================================
--- .idea/libraries/Maven__org_springframework_spring_expression_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_springframework_spring_expression_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.springframework:spring-expression:5.2.9.RELEASE">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-expression/5.2.9.RELEASE/spring-expression-5.2.9.RELEASE.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-expression/5.2.9.RELEASE/spring-expression-5.2.9.RELEASE-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-expression/5.2.9.RELEASE/spring-expression-5.2.9.RELEASE-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: .idea/libraries/Maven__org_springframework_spring_jcl_5_2_9_RELEASE.xml
===================================================================
--- .idea/libraries/Maven__org_springframework_spring_jcl_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_springframework_spring_jcl_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.springframework:spring-jcl:5.2.9.RELEASE">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-jcl/5.2.9.RELEASE/spring-jcl-5.2.9.RELEASE.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-jcl/5.2.9.RELEASE/spring-jcl-5.2.9.RELEASE-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-jcl/5.2.9.RELEASE/spring-jcl-5.2.9.RELEASE-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: .idea/libraries/Maven__org_springframework_spring_jdbc_5_2_9_RELEASE.xml
===================================================================
--- .idea/libraries/Maven__org_springframework_spring_jdbc_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_springframework_spring_jdbc_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.springframework:spring-jdbc:5.2.9.RELEASE">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-jdbc/5.2.9.RELEASE/spring-jdbc-5.2.9.RELEASE.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-jdbc/5.2.9.RELEASE/spring-jdbc-5.2.9.RELEASE-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-jdbc/5.2.9.RELEASE/spring-jdbc-5.2.9.RELEASE-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: .idea/libraries/Maven__org_springframework_spring_orm_5_2_9_RELEASE.xml
===================================================================
--- .idea/libraries/Maven__org_springframework_spring_orm_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_springframework_spring_orm_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.springframework:spring-orm:5.2.9.RELEASE">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-orm/5.2.9.RELEASE/spring-orm-5.2.9.RELEASE.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-orm/5.2.9.RELEASE/spring-orm-5.2.9.RELEASE-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-orm/5.2.9.RELEASE/spring-orm-5.2.9.RELEASE-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: .idea/libraries/Maven__org_springframework_spring_test_5_2_9_RELEASE.xml
===================================================================
--- .idea/libraries/Maven__org_springframework_spring_test_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_springframework_spring_test_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.springframework:spring-test:5.2.9.RELEASE">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-test/5.2.9.RELEASE/spring-test-5.2.9.RELEASE.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-test/5.2.9.RELEASE/spring-test-5.2.9.RELEASE-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-test/5.2.9.RELEASE/spring-test-5.2.9.RELEASE-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: .idea/libraries/Maven__org_springframework_spring_tx_5_2_9_RELEASE.xml
===================================================================
--- .idea/libraries/Maven__org_springframework_spring_tx_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/libraries/Maven__org_springframework_spring_tx_5_2_9_RELEASE.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,13 +0,0 @@
-<component name="libraryTable">
-  <library name="Maven: org.springframework:spring-tx:5.2.9.RELEASE">
-    <CLASSES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-tx/5.2.9.RELEASE/spring-tx-5.2.9.RELEASE.jar!/" />
-    </CLASSES>
-    <JAVADOC>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-tx/5.2.9.RELEASE/spring-tx-5.2.9.RELEASE-javadoc.jar!/" />
-    </JAVADOC>
-    <SOURCES>
-      <root url="jar://$MAVEN_REPOSITORY$/org/springframework/spring-tx/5.2.9.RELEASE/spring-tx-5.2.9.RELEASE-sources.jar!/" />
-    </SOURCES>
-  </library>
-</component>
\ No newline at end of file
Index: src/test/java/ru/javawebinar/topjava/service/MealServiceTest.java
===================================================================
--- src/test/java/ru/javawebinar/topjava/service/MealServiceTest.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/test/java/ru/javawebinar/topjava/service/MealServiceTest.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,147 +0,0 @@
-package ru.javawebinar.topjava.service;
-
-import org.junit.AfterClass;
-import org.junit.Assert;
-import org.junit.Rule;
-import org.junit.Test;
-import org.junit.rules.Stopwatch;
-import org.junit.runner.Description;
-import org.junit.runner.RunWith;
-import org.slf4j.Logger;
-import org.springframework.beans.factory.annotation.Autowired;
-import org.springframework.test.context.ActiveProfiles;
-import org.springframework.dao.DataAccessException;
-import org.springframework.test.context.ContextConfiguration;
-import org.springframework.test.context.jdbc.Sql;
-import org.springframework.test.context.jdbc.SqlConfig;
-import org.springframework.test.context.junit4.SpringRunner;
-import ru.javawebinar.topjava.ActiveDbProfileResolver;
-import ru.javawebinar.topjava.model.Meal;
-import ru.javawebinar.topjava.util.exception.NotFoundException;
-
-import java.time.LocalDate;
-import java.time.Month;
-import java.util.concurrent.TimeUnit;
-
-import static org.junit.Assert.assertThrows;
-import static org.slf4j.LoggerFactory.getLogger;
-import static ru.javawebinar.topjava.MealTestData.*;
-import static ru.javawebinar.topjava.UserTestData.ADMIN_ID;
-import static ru.javawebinar.topjava.UserTestData.USER_ID;
-
-@ContextConfiguration({
-        "classpath:spring/spring-app.xml",
-        "classpath:spring/spring-db.xml"
-})
-@RunWith(SpringRunner.class)
-@Sql(scripts = "classpath:db/populateDB.sql", config = @SqlConfig(encoding = "UTF-8"))
-@ActiveProfiles(resolver = ActiveDbProfileResolver.class)
-public class MealServiceTest {
-    private static final Logger log = getLogger("result");
-
-    private static final StringBuilder results = new StringBuilder();
-
-    @Rule
-    // http://stackoverflow.com/questions/14892125/what-is-the-best-practice-to-determine-the-execution-time-of-the-bussiness-relev
-    public final Stopwatch stopwatch = new Stopwatch() {
-        @Override
-        protected void finished(long nanos, Description description) {
-            String result = String.format("\n%-25s %7d", description.getMethodName(), TimeUnit.NANOSECONDS.toMillis(nanos));
-            results.append(result);
-            log.info(result + " ms\n");
-        }
-    };
-
-    @Autowired
-    private MealService service;
-
-    @AfterClass
-    public static void printResult() {
-        log.info("\n---------------------------------" +
-                "\nTest                 Duration, ms" +
-                "\n---------------------------------" +
-                results +
-                "\n---------------------------------");
-    }
-
-    @Test
-    public void delete() {
-        service.delete(MEAL1_ID, USER_ID);
-        assertThrows(NotFoundException.class, () -> service.get(MEAL1_ID, USER_ID));
-    }
-
-    @Test
-    public void deleteNotFound() {
-        assertThrows(NotFoundException.class, () -> service.delete(NOT_FOUND, USER_ID));
-    }
-
-    @Test
-    public void deleteNotOwn() {
-        assertThrows(NotFoundException.class, () -> service.delete(MEAL1_ID, ADMIN_ID));
-    }
-
-    @Test
-    public void create() {
-        Meal created = service.create(getNew(), USER_ID);
-        int newId = created.id();
-        Meal newMeal = getNew();
-        newMeal.setId(newId);
-        MEAL_MATCHER.assertMatch(created, newMeal);
-        MEAL_MATCHER.assertMatch(service.get(newId, USER_ID), newMeal);
-    }
-
-    @Test
-    public void duplicateDateTimeCreate() {
-        assertThrows(DataAccessException.class, () ->
-                service.create(new Meal(null, meal1.getDateTime(), "duplicate", 100), USER_ID));
-    }
-
-
-    @Test
-    public void get() {
-        Meal actual = service.get(ADMIN_MEAL_ID, ADMIN_ID);
-        MEAL_MATCHER.assertMatch(actual, adminMeal1);
-    }
-
-    @Test
-    public void getNotFound() {
-        assertThrows(NotFoundException.class, () -> service.get(NOT_FOUND, USER_ID));
-    }
-
-    @Test
-    public void getNotOwn() {
-        assertThrows(NotFoundException.class, () -> service.get(MEAL1_ID, ADMIN_ID));
-    }
-
-    @Test
-    public void update() {
-        Meal updated = getUpdated();
-        service.update(updated, USER_ID);
-        MEAL_MATCHER.assertMatch(service.get(MEAL1_ID, USER_ID), getUpdated());
-    }
-
-    @Test
-    public void updateNotOwn() {
-        NotFoundException exception = assertThrows(NotFoundException.class, () -> service.update(meal1, ADMIN_ID));
-        Assert.assertEquals("Not found entity with id=" + MEAL1_ID, exception.getMessage());
-        MEAL_MATCHER.assertMatch(service.get(MEAL1_ID, USER_ID), meal1);
-    }
-
-    @Test
-    public void getAll() {
-        MEAL_MATCHER.assertMatch(service.getAll(USER_ID), meals);
-    }
-
-    @Test
-    public void getBetweenInclusive() {
-        MEAL_MATCHER.assertMatch(service.getBetweenInclusive(
-                LocalDate.of(2020, Month.JANUARY, 30),
-                LocalDate.of(2020, Month.JANUARY, 30), USER_ID),
-                meal3, meal2, meal1);
-    }
-
-    @Test
-    public void getBetweenWithNullDates() {
-        MEAL_MATCHER.assertMatch(service.getBetweenInclusive(null, null, USER_ID), meals);
-    }
-}
\ No newline at end of file
Index: src/test/java/ru/javawebinar/topjava/service/UserServiceTest.java
===================================================================
--- src/test/java/ru/javawebinar/topjava/service/UserServiceTest.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/test/java/ru/javawebinar/topjava/service/UserServiceTest.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
@@ -1,101 +0,0 @@
-package ru.javawebinar.topjava.service;
-
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.springframework.beans.factory.annotation.Autowired;
-import org.springframework.cache.CacheManager;
-import org.springframework.dao.DataAccessException;
-import org.springframework.test.context.ActiveProfiles;
-import org.springframework.test.context.ContextConfiguration;
-import org.springframework.test.context.jdbc.Sql;
-import org.springframework.test.context.jdbc.SqlConfig;
-import org.springframework.test.context.junit4.SpringRunner;
-import ru.javawebinar.topjava.ActiveDbProfileResolver;
-import ru.javawebinar.topjava.UserTestData;
-import ru.javawebinar.topjava.model.Role;
-import ru.javawebinar.topjava.model.User;
-import ru.javawebinar.topjava.util.exception.NotFoundException;
-
-import java.util.List;
-
-import static org.junit.Assert.assertThrows;
-import static ru.javawebinar.topjava.UserTestData.*;
-
-@ContextConfiguration({
-        "classpath:spring/spring-app.xml",
-        "classpath:spring/spring-db.xml"
-})
-@RunWith(SpringRunner.class)
-@Sql(scripts = "classpath:db/populateDB.sql", config = @SqlConfig(encoding = "UTF-8"))
-@ActiveProfiles(resolver = ActiveDbProfileResolver.class)
-public class UserServiceTest {
-
-    @Autowired
-    private UserService service;
-
-    @Autowired
-    private CacheManager cacheManager;
-
-    @Before
-    public void setUp() throws Exception {
-        cacheManager.getCache("users").clear();
-    }
-
-    @Test
-    public void create() {
-        User created = service.create(getNew());
-        int newId = created.id();
-        User newUser = getNew();
-        newUser.setId(newId);
-        USER_MATCHER.assertMatch(created, newUser);
-        USER_MATCHER.assertMatch(service.get(newId), newUser);
-    }
-
-    @Test
-    public void duplicateMailCreate() {
-        assertThrows(DataAccessException.class, () ->
-                service.create(new User(null, "Duplicate", "user@yandex.ru", "newPass", Role.USER)));
-    }
-
-    @Test
-    public void delete() {
-        service.delete(USER_ID);
-        assertThrows(NotFoundException.class, () -> service.get(USER_ID));
-    }
-
-    @Test
-    public void deletedNotFound() {
-        assertThrows(NotFoundException.class, () -> service.delete(NOT_FOUND));
-    }
-
-    @Test
-    public void get() {
-        User user = service.get(USER_ID);
-        USER_MATCHER.assertMatch(user, UserTestData.user);
-    }
-
-    @Test
-    public void getNotFound() {
-        assertThrows(NotFoundException.class, () -> service.get(NOT_FOUND));
-    }
-
-    @Test
-    public void getByEmail() {
-        User user = service.getByEmail("admin@gmail.com");
-        USER_MATCHER.assertMatch(user, admin);
-    }
-
-    @Test
-    public void update() {
-        User updated = getUpdated();
-        service.update(updated);
-        USER_MATCHER.assertMatch(service.get(USER_ID), getUpdated());
-    }
-
-    @Test
-    public void getAll() {
-        List<User> all = service.getAll();
-        USER_MATCHER.assertMatch(all, admin, user);
-    }
-}
\ No newline at end of file
Index: target/test-classes/logback-test.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><configuration>\r\n\r\n    <contextListener class=\"ch.qos.logback.classic.jul.LevelChangePropagator\">\r\n        <resetJUL>true</resetJUL>\r\n    </contextListener>\r\n\r\n    <appender name=\"console\" class=\"ch.qos.logback.core.ConsoleAppender\">\r\n        <encoder>\r\n            <charset>UTF-8</charset>\r\n            <pattern>%d{HH:mm:ss.SSS} %-5level %class{50}.%M:%L - %msg%n</pattern>\r\n        </encoder>\r\n    </appender>\r\n\r\n    <logger name=\"org.postgresql\" level=\"debug\"/>\r\n    <logger name=\"org.springframework.jdbc\" level=\"info\"/>\r\n    <logger name=\"ru.javawebinar.topjava\" level=\"debug\"/>\r\n\r\n    <root level=\"INFO\">\r\n        <appender-ref ref=\"console\"/>\r\n    </root>\r\n\r\n</configuration>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- target/test-classes/logback-test.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ target/test-classes/logback-test.xml	(date 1604312411264)
@@ -7,12 +7,22 @@
     <appender name="console" class="ch.qos.logback.core.ConsoleAppender">
         <encoder>
             <charset>UTF-8</charset>
-            <pattern>%d{HH:mm:ss.SSS} %-5level %class{50}.%M:%L - %msg%n</pattern>
+            <pattern>%d{HH:mm:ss.SSS} %highlight(%-5level) %cyan(%class{50}.%M:%L) - %msg%n</pattern>
+        </encoder>
+    </appender>
+
+    <appender name="result" class="ch.qos.logback.core.ConsoleAppender">
+        <encoder>
+            <charset>UTF-8</charset>
+            <pattern>%magenta(%msg%n)</pattern>
         </encoder>
     </appender>
+    <logger name="result" level="INFO" additivity="false">
+        <appender-ref ref="result"/>
+    </logger>
 
-    <logger name="org.postgresql" level="debug"/>
-    <logger name="org.springframework.jdbc" level="info"/>
+<!--    <logger name="org.postgresql" level="debug"/>-->
+<!--    <logger name="org.springframework.jdbc" level="info"/>-->
     <logger name="ru.javawebinar.topjava" level="debug"/>
 
     <root level="INFO">
Index: target/classes/spring/spring-db.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n       xmlns:p=\"http://www.springframework.org/schema/p\"\r\n       xmlns:context=\"http://www.springframework.org/schema/context\"\r\n       xmlns:jdbc=\"http://www.springframework.org/schema/jdbc\"\r\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\r\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\r\n       http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd\r\n       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\">\r\n\r\n<!-- Change DB by comment/uncomment property-placeholder -->\r\n\r\n    <context:property-placeholder location=\"classpath:db/postgres.properties\" system-properties-mode=\"OVERRIDE\"/>\r\n<!--    <context:property-placeholder location=\"classpath:db/hsqldb.properties\" system-properties-mode=\"OVERRIDE\"/>-->\r\n\r\n<!--\r\n    For postgres driver logging\r\n    It uses java.util.logging and logged via jul-to-slf4j bridge\r\n    https://stackoverflow.com/a/27296470/548473\r\n-->\r\n    <bean class=\"org.springframework.beans.factory.config.MethodInvokingBean\">\r\n        <property name=\"staticMethod\" value=\"org.slf4j.bridge.SLF4JBridgeHandler.install\" />\r\n    </bean>\r\n\r\n    <context:component-scan base-package=\"ru.javawebinar.**.repository.jpa\"/>\r\n\r\n    <jdbc:initialize-database data-source=\"dataSource\" enabled=\"${database.init}\">\r\n        <jdbc:script location=\"${jdbc.initLocation}\"/>\r\n        <jdbc:script encoding=\"utf-8\" location=\"classpath:db/populateDB.sql\"/>\r\n    </jdbc:initialize-database>\r\n\r\n    <!--no pooling-->\r\n    <bean id=\"dataSource\"\r\n          class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\r\n        <property name=\"driverClassName\" value=\"${database.driverClassName}\"/>\r\n        <property name=\"url\" value=\"${database.url}\"/>\r\n        <property name=\"username\" value=\"${database.username}\"/>\r\n        <property name=\"password\" value=\"${database.password}\"/>\r\n    </bean>\r\n\r\n    <bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"\r\n          p:dataSource-ref=\"dataSource\"\r\n          p:packagesToScan=\"ru.javawebinar.**.model\">\r\n        <!--p:persistenceUnitName=\"persistenceUnit\">-->\r\n\r\n        <property name=\"jpaPropertyMap\">\r\n            <map>\r\n                <entry key=\"#{T(org.hibernate.cfg.AvailableSettings).FORMAT_SQL}\" value=\"${hibernate.format_sql}\"/>\r\n                <entry key=\"#{T(org.hibernate.cfg.AvailableSettings).USE_SQL_COMMENTS}\" value=\"${hibernate.use_sql_comments}\"/>\r\n                <!--<entry key=\"#{T(org.hibernate.cfg.AvailableSettings).HBM2DDL_AUTO}\" value=\"${hibernate.hbm2ddl.auto}\"/>-->\r\n            </map>\r\n        </property>\r\n\r\n        <property name=\"jpaVendorAdapter\">\r\n            <bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"\r\n                  p:showSql=\"${jpa.showSql}\">\r\n            </bean>\r\n        </property>\r\n    </bean>\r\n\r\n    <tx:annotation-driven/>\r\n\r\n    <!-- Transaction manager for a single JPA EntityManagerFactory (alternative to JTA) -->\r\n    <bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"\r\n          p:entityManagerFactory-ref=\"entityManagerFactory\"/>\r\n\r\n    <!--\r\n        <context:component-scan base-package=\"ru.javawebinar.**.repository.jdbc\"/>\r\n        <bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\">\r\n            <constructor-arg ref=\"dataSource\"/>\r\n        </bean>\r\n\r\n        <bean id=\"namedJdbcTemplate\" class=\"org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate\">\r\n            <constructor-arg ref=\"jdbcTemplate\"/>\r\n        </bean>\r\n    -->\r\n</beans>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- target/classes/spring/spring-db.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ target/classes/spring/spring-db.xml	(date 1604312410069)
@@ -4,75 +4,97 @@
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:jdbc="http://www.springframework.org/schema/jdbc"
        xmlns:tx="http://www.springframework.org/schema/tx"
+       xmlns:jpa="http://www.springframework.org/schema/data/jpa"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd
-       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">
+       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
+       http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">
+
+
+    <jdbc:initialize-database data-source="dataSource" enabled="${database.init}">
+        <jdbc:script location="${jdbc.initLocation}"/>
+        <jdbc:script encoding="utf-8" location="classpath:db/populateDB.sql"/>
+    </jdbc:initialize-database>
+
 
-<!-- Change DB by comment/uncomment property-placeholder -->
+    <beans profile="hsqldb">
+        <context:property-placeholder location="classpath:db/hsqldb.properties" system-properties-mode="OVERRIDE"/>
 
-    <context:property-placeholder location="classpath:db/postgres.properties" system-properties-mode="OVERRIDE"/>
-<!--    <context:property-placeholder location="classpath:db/hsqldb.properties" system-properties-mode="OVERRIDE"/>-->
-
-<!--
-    For postgres driver logging
-    It uses java.util.logging and logged via jul-to-slf4j bridge
-    https://stackoverflow.com/a/27296470/548473
--->
-    <bean class="org.springframework.beans.factory.config.MethodInvokingBean">
-        <property name="staticMethod" value="org.slf4j.bridge.SLF4JBridgeHandler.install" />
-    </bean>
+        <!--no pooling-->
+        <bean id="dataSource"
+              class="org.springframework.jdbc.datasource.DriverManagerDataSource"
+              p:driverClassName="org.hsqldb.jdbcDriver"
+              p:url="${database.url}"
+              p:username="${database.username}"
+              p:password="${database.password}"/>
+    </beans>
+
+    <beans profile="postgres">
+        <context:property-placeholder location="classpath:db/postgres.properties" system-properties-mode="OVERRIDE"/>
+        <!--
+            For postgres driver logging
+            It uses java.util.logging and logged via jul-to-slf4j bridge
+            https://stackoverflow.com/a/27296470/548473
+        -->
+        <bean class="org.springframework.beans.factory.config.MethodInvokingBean">
+            <property name="staticMethod" value="org.slf4j.bridge.SLF4JBridgeHandler.install"/>
+        </bean>
 
-    <context:component-scan base-package="ru.javawebinar.**.repository.jpa"/>
-
-    <jdbc:initialize-database data-source="dataSource" enabled="${database.init}">
-        <jdbc:script location="${jdbc.initLocation}"/>
-        <jdbc:script encoding="utf-8" location="classpath:db/populateDB.sql"/>
-    </jdbc:initialize-database>
-
-    <!--no pooling-->
-    <bean id="dataSource"
-          class="org.springframework.jdbc.datasource.DriverManagerDataSource">
-        <property name="driverClassName" value="${database.driverClassName}"/>
-        <property name="url" value="${database.url}"/>
-        <property name="username" value="${database.username}"/>
-        <property name="password" value="${database.password}"/>
-    </bean>
+        <bean id="dataSource"
+              class="org.apache.tomcat.jdbc.pool.DataSource"
+              p:driverClassName="org.postgresql.Driver"
+              p:url="${database.url}"
+              p:username="${database.username}"
+              p:password="${database.password}"/>
+    </beans>
+
+    <beans profile="jdbc">
+        <context:component-scan base-package="ru.javawebinar.**.repository.jdbc"/>
+
+        <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
+            <constructor-arg ref="dataSource"/>
+        </bean>
 
-    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
-          p:dataSource-ref="dataSource"
-          p:packagesToScan="ru.javawebinar.**.model">
-        <!--p:persistenceUnitName="persistenceUnit">-->
+        <bean id="namedJdbcTemplate" class="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate">
+            <constructor-arg ref="jdbcTemplate"/>
+        </bean>
+    </beans>
+    <beans profile="jpa, datajpa">
+        <tx:annotation-driven/>
+        <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
+              p:dataSource-ref="dataSource"
+              p:packagesToScan="ru.javawebinar.**.model">
+            <!--p:persistenceUnitName="persistenceUnit">-->
 
-        <property name="jpaPropertyMap">
-            <map>
-                <entry key="#{T(org.hibernate.cfg.AvailableSettings).FORMAT_SQL}" value="${hibernate.format_sql}"/>
-                <entry key="#{T(org.hibernate.cfg.AvailableSettings).USE_SQL_COMMENTS}" value="${hibernate.use_sql_comments}"/>
-                <!--<entry key="#{T(org.hibernate.cfg.AvailableSettings).HBM2DDL_AUTO}" value="${hibernate.hbm2ddl.auto}"/>-->
-            </map>
-        </property>
+            <property name="jpaPropertyMap">
+                <map>
+                    <entry key="#{T(org.hibernate.cfg.AvailableSettings).FORMAT_SQL}" value="${hibernate.format_sql}"/>
+                    <entry key="#{T(org.hibernate.cfg.AvailableSettings).USE_SQL_COMMENTS}"
+                           value="${hibernate.use_sql_comments}"/>
+                    <entry key="#{T(org.hibernate.cfg.AvailableSettings).JPA_PROXY_COMPLIANCE}" value="false"/>
+                    <!--<entry key="#{T(org.hibernate.cfg.AvailableSettings).HBM2DDL_AUTO}" value="${hibernate.hbm2ddl.auto}"/>-->
+                </map>
+            </property>
 
-        <property name="jpaVendorAdapter">
-            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
-                  p:showSql="${jpa.showSql}">
-            </bean>
-        </property>
-    </bean>
+            <property name="jpaVendorAdapter">
+                <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
+                      p:showSql="${jpa.showSql}">
+                </bean>
+            </property>
+        </bean>
 
-    <tx:annotation-driven/>
-
-    <!-- Transaction manager for a single JPA EntityManagerFactory (alternative to JTA) -->
-    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
-          p:entityManagerFactory-ref="entityManagerFactory"/>
+        <!-- Transaction manager for a single JPA EntityManagerFactory (alternative to JTA) -->
+        <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
+              p:entityManagerFactory-ref="entityManagerFactory"/>
+    </beans>
+    <beans profile="jpa">
+            <context:component-scan base-package="ru.javawebinar.**.repository.jpa"/>
+    </beans>
+    <beans profile="datajpa">
 
-    <!--
-        <context:component-scan base-package="ru.javawebinar.**.repository.jdbc"/>
-        <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
-            <constructor-arg ref="dataSource"/>
-        </bean>
+        <context:component-scan base-package="ru.javawebinar.**.repository.datajpa"/>
+        <jpa:repositories base-package="ru.javawebinar.**.repository.datajpa"/>
 
-        <bean id="namedJdbcTemplate" class="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate">
-            <constructor-arg ref="jdbcTemplate"/>
-        </bean>
-    -->
+    </beans>
 </beans>
\ No newline at end of file
Index: src/main/java/ru/javawebinar/topjava/web/MealServlet.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.web;\r\n\r\nimport org.springframework.context.ConfigurableApplicationContext;\r\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\r\nimport org.springframework.util.StringUtils;\r\nimport ru.javawebinar.topjava.model.Meal;\r\nimport ru.javawebinar.topjava.web.meal.MealRestController;\r\n\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport java.io.IOException;\r\nimport java.time.LocalDate;\r\nimport java.time.LocalDateTime;\r\nimport java.time.LocalTime;\r\nimport java.time.temporal.ChronoUnit;\r\nimport java.util.Objects;\r\n\r\nimport static ru.javawebinar.topjava.util.DateTimeUtil.parseLocalDate;\r\nimport static ru.javawebinar.topjava.util.DateTimeUtil.parseLocalTime;\r\n\r\npublic class MealServlet extends HttpServlet {\r\n\r\n    private ConfigurableApplicationContext springContext;\r\n    private MealRestController mealController;\r\n\r\n    @Override\r\n    public void init() {\r\n        springContext = new ClassPathXmlApplicationContext(\"spring/spring-app.xml\", \"spring/spring-db.xml\");\r\n        mealController = springContext.getBean(MealRestController.class);\r\n    }\r\n\r\n    @Override\r\n    public void destroy() {\r\n        springContext.close();\r\n        super.destroy();\r\n    }\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        request.setCharacterEncoding(\"UTF-8\");\r\n        Meal meal = new Meal(\r\n                LocalDateTime.parse(request.getParameter(\"dateTime\")),\r\n                request.getParameter(\"description\"),\r\n                Integer.parseInt(request.getParameter(\"calories\")));\r\n\r\n        if (StringUtils.isEmpty(request.getParameter(\"id\"))) {\r\n            mealController.create(meal);\r\n        } else {\r\n            mealController.update(meal, getId(request));\r\n        }\r\n        response.sendRedirect(\"meals\");\r\n    }\r\n\r\n    @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        String action = request.getParameter(\"action\");\r\n\r\n        switch (action == null ? \"all\" : action) {\r\n            case \"delete\" -> {\r\n                int id = getId(request);\r\n                mealController.delete(id);\r\n                response.sendRedirect(\"meals\");\r\n            }\r\n            case \"create\", \"update\" -> {\r\n                final Meal meal = \"create\".equals(action) ?\r\n                        new Meal(LocalDateTime.now().truncatedTo(ChronoUnit.MINUTES), \"\", 1000) :\r\n                        mealController.get(getId(request));\r\n                request.setAttribute(\"meal\", meal);\r\n                request.getRequestDispatcher(\"/mealForm.jsp\").forward(request, response);\r\n            }\r\n            case \"filter\" -> {\r\n                LocalDate startDate = parseLocalDate(request.getParameter(\"startDate\"));\r\n                LocalDate endDate = parseLocalDate(request.getParameter(\"endDate\"));\r\n                LocalTime startTime = parseLocalTime(request.getParameter(\"startTime\"));\r\n                LocalTime endTime = parseLocalTime(request.getParameter(\"endTime\"));\r\n                request.setAttribute(\"meals\", mealController.getBetween(startDate, startTime, endDate, endTime));\r\n                request.getRequestDispatcher(\"/meals.jsp\").forward(request, response);\r\n            }\r\n            default -> {\r\n                request.setAttribute(\"meals\", mealController.getAll());\r\n                request.getRequestDispatcher(\"/meals.jsp\").forward(request, response);\r\n            }\r\n        }\r\n    }\r\n\r\n    private int getId(HttpServletRequest request) {\r\n        String paramId = Objects.requireNonNull(request.getParameter(\"id\"));\r\n        return Integer.parseInt(paramId);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/web/MealServlet.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/web/MealServlet.java	(date 1604311851199)
@@ -1,8 +1,8 @@
 package ru.javawebinar.topjava.web;
 
-import org.springframework.context.ConfigurableApplicationContext;
-import org.springframework.context.support.ClassPathXmlApplicationContext;
+import org.springframework.context.support.GenericXmlApplicationContext;
 import org.springframework.util.StringUtils;
+import ru.javawebinar.topjava.Profiles;
 import ru.javawebinar.topjava.model.Meal;
 import ru.javawebinar.topjava.web.meal.MealRestController;
 
@@ -20,15 +20,19 @@
 import static ru.javawebinar.topjava.util.DateTimeUtil.parseLocalDate;
 import static ru.javawebinar.topjava.util.DateTimeUtil.parseLocalTime;
 
+
 public class MealServlet extends HttpServlet {
 
-    private ConfigurableApplicationContext springContext;
+    private GenericXmlApplicationContext springContext;
     private MealRestController mealController;
 
     @Override
     public void init() {
-        springContext = new ClassPathXmlApplicationContext("spring/spring-app.xml", "spring/spring-db.xml");
-        mealController = springContext.getBean(MealRestController.class);
+        springContext = new GenericXmlApplicationContext();
+        this.springContext.getEnvironment().setActiveProfiles(Profiles.DATAJPA, Profiles.POSTGRES_DB);
+        this.springContext.load("spring/spring-app.xml", "spring/spring-db.xml");
+        this.springContext.refresh();
+        this.mealController = this.springContext.getBean(MealRestController.class);
     }
 
     @Override
Index: target/classes/spring/spring-app.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\"\r\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\">\r\n\r\n<!--\r\n    <bean class=\"ru.javawebinar.topjava.repository.inmemory.InMemoryUserRepository\" id=\"inmemoryUserRepository\"/>\r\n\r\n    <bean class=\"ru.javawebinar.topjava.service.UserService\">\r\n        <constructor-arg name=\"repository\" ref=\"inmemoryUserRepository\"/>\r\n    </bean>\r\n-->\r\n\r\n    <context:component-scan base-package=\"ru.javawebinar.**.service\"/>\r\n\r\n    <context:component-scan base-package=\"ru.javawebinar.**.web\"/>\r\n\r\n</beans>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- target/classes/spring/spring-app.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ target/classes/spring/spring-app.xml	(date 1604312410067)
@@ -9,9 +9,13 @@
         <constructor-arg name="repository" ref="inmemoryUserRepository"/>
     </bean>
 -->
+    <import resource="spring-cache.xml"/>
 
     <context:component-scan base-package="ru.javawebinar.**.service"/>
 
     <context:component-scan base-package="ru.javawebinar.**.web"/>
 
+<!--    <context:component-scan base-package="ru.javawebinar.topjava.repository.jpa"/>-->
+
+
 </beans>
\ No newline at end of file
Index: src/main/java/ru/javawebinar/topjava/util/DateTimeUtil.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.util;\r\n\r\nimport org.springframework.lang.Nullable;\r\nimport org.springframework.util.StringUtils;\r\n\r\nimport java.time.LocalDate;\r\nimport java.time.LocalDateTime;\r\nimport java.time.LocalTime;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.time.temporal.ChronoUnit;\r\n\r\npublic class DateTimeUtil {\r\n    private static final DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm\");\r\n\r\n    // DB doesn't support LocalDate.MIN/MAX\r\n    private static final LocalDateTime MIN_DATE = LocalDateTime.of(1, 1, 1, 0, 0);\r\n    private static final LocalDateTime MAX_DATE = LocalDateTime.of(3000, 1, 1, 0, 0);\r\n\r\n    private DateTimeUtil() {\r\n    }\r\n\r\n    public static LocalDateTime atStartOfDayOrMin(LocalDate localDate) {\r\n        return localDate != null ? localDate.atStartOfDay() : MIN_DATE;\r\n    }\r\n\r\n    public static LocalDateTime atStartOfNextDayOrMax(LocalDate localDate) {\r\n        return localDate != null ? localDate.plus(1, ChronoUnit.DAYS).atStartOfDay() : MAX_DATE;\r\n    }\r\n\r\n    public static String toString(LocalDateTime ldt) {\r\n        return ldt == null ? \"\" : ldt.format(DATE_TIME_FORMATTER);\r\n    }\r\n\r\n    public static @Nullable LocalDate parseLocalDate(@Nullable String str) {\r\n        return StringUtils.isEmpty(str) ? null : LocalDate.parse(str);\r\n    }\r\n\r\n    public static @Nullable LocalTime parseLocalTime(@Nullable String str) {\r\n        return StringUtils.isEmpty(str) ? null : LocalTime.parse(str);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/util/DateTimeUtil.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/util/DateTimeUtil.java	(date 1604330164086)
@@ -31,11 +31,13 @@
         return ldt == null ? "" : ldt.format(DATE_TIME_FORMATTER);
     }
 
-    public static @Nullable LocalDate parseLocalDate(@Nullable String str) {
+    public static @Nullable
+    LocalDate parseLocalDate(@Nullable String str) {
         return StringUtils.isEmpty(str) ? null : LocalDate.parse(str);
     }
 
-    public static @Nullable LocalTime parseLocalTime(@Nullable String str) {
+    public static @Nullable
+    LocalTime parseLocalTime(@Nullable String str) {
         return StringUtils.isEmpty(str) ? null : LocalTime.parse(str);
     }
 }
Index: src/main/java/ru/javawebinar/topjava/model/User.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.model;\r\n\r\nimport org.hibernate.validator.constraints.Range;\r\nimport org.springframework.util.CollectionUtils;\r\n\r\nimport javax.persistence.*;\r\nimport javax.validation.constraints.Email;\r\nimport javax.validation.constraints.NotBlank;\r\nimport javax.validation.constraints.NotNull;\r\nimport javax.validation.constraints.Size;\r\nimport java.util.Collection;\r\nimport java.util.Date;\r\nimport java.util.EnumSet;\r\nimport java.util.Set;\r\n\r\nimport static ru.javawebinar.topjava.util.MealsUtil.DEFAULT_CALORIES_PER_DAY;\r\n\r\n@NamedQueries({\r\n        @NamedQuery(name = User.DELETE, query = \"DELETE FROM User u WHERE u.id=:id\"),\r\n        @NamedQuery(name = User.BY_EMAIL, query = \"SELECT u FROM User u LEFT JOIN FETCH u.roles WHERE u.email=?1\"),\r\n        @NamedQuery(name = User.ALL_SORTED, query = \"SELECT u FROM User u LEFT JOIN FETCH u.roles ORDER BY u.name, u.email\"),\r\n})\r\n@Entity\r\n@Table(name = \"users\", uniqueConstraints = {@UniqueConstraint(columnNames = \"email\", name = \"users_unique_email_idx\")})\r\npublic class User extends AbstractNamedEntity {\r\n\r\n    public static final String DELETE = \"User.delete\";\r\n    public static final String BY_EMAIL = \"User.getByEmail\";\r\n    public static final String ALL_SORTED = \"User.getAllSorted\";\r\n\r\n    @Column(name = \"email\", nullable = false, unique = true)\r\n    @Email\r\n    @NotBlank\r\n    @Size(max = 100)\r\n    private String email;\r\n\r\n    @Column(name = \"password\", nullable = false)\r\n    @NotBlank\r\n    @Size(min = 5, max = 100)\r\n    private String password;\r\n\r\n    @Column(name = \"enabled\", nullable = false, columnDefinition = \"bool default true\")\r\n    private boolean enabled = true;\r\n\r\n    @Column(name = \"registered\", nullable = false, columnDefinition = \"timestamp default now()\")\r\n    @NotNull\r\n    private Date registered = new Date();\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @CollectionTable(name = \"user_roles\", joinColumns = @JoinColumn(name = \"user_id\"),\r\n            uniqueConstraints = {@UniqueConstraint(columnNames = {\"user_id\", \"role\"}, name = \"user_roles_unique_idx\")})\r\n    @Column(name = \"role\")\r\n    @ElementCollection(fetch = FetchType.EAGER)\r\n    private Set<Role> roles;\r\n\r\n    @Column(name = \"calories_per_day\", nullable = false, columnDefinition = \"int default 2000\")\r\n    @Range(min = 10, max = 10000)\r\n    private int caloriesPerDay = DEFAULT_CALORIES_PER_DAY;\r\n\r\n    public User() {\r\n    }\r\n\r\n    public User(User u) {\r\n        this(u.getId(), u.getName(), u.getEmail(), u.getPassword(), u.getCaloriesPerDay(), u.isEnabled(), u.getRegistered(), u.getRoles());\r\n    }\r\n\r\n    public User(Integer id, String name, String email, String password, Role role, Role... roles) {\r\n        this(id, name, email, password, DEFAULT_CALORIES_PER_DAY, true, new Date(), EnumSet.of(role, roles));\r\n    }\r\n\r\n    public User(Integer id, String name, String email, String password, int caloriesPerDay, boolean enabled, Date registered, Collection<Role> roles) {\r\n        super(id, name);\r\n        this.email = email;\r\n        this.password = password;\r\n        this.caloriesPerDay = caloriesPerDay;\r\n        this.enabled = enabled;\r\n        this.registered = registered;\r\n        setRoles(roles);\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    public Date getRegistered() {\r\n        return registered;\r\n    }\r\n\r\n    public void setRegistered(Date registered) {\r\n        this.registered = registered;\r\n    }\r\n\r\n    public void setEnabled(boolean enabled) {\r\n        this.enabled = enabled;\r\n    }\r\n\r\n    public int getCaloriesPerDay() {\r\n        return caloriesPerDay;\r\n    }\r\n\r\n    public void setCaloriesPerDay(int caloriesPerDay) {\r\n        this.caloriesPerDay = caloriesPerDay;\r\n    }\r\n\r\n    public boolean isEnabled() {\r\n        return enabled;\r\n    }\r\n\r\n    public Set<Role> getRoles() {\r\n        return roles;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setRoles(Collection<Role> roles) {\r\n        this.roles = CollectionUtils.isEmpty(roles) ? EnumSet.noneOf(Role.class) : EnumSet.copyOf(roles);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return \"User{\" +\r\n                \"id=\" + id +\r\n                \", email=\" + email +\r\n                \", name=\" + name +\r\n                \", enabled=\" + enabled +\r\n                \", roles=\" + roles +\r\n                \", caloriesPerDay=\" + caloriesPerDay +\r\n                '}';\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/model/User.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/model/User.java	(date 1604330164036)
@@ -8,10 +8,7 @@
 import javax.validation.constraints.NotBlank;
 import javax.validation.constraints.NotNull;
 import javax.validation.constraints.Size;
-import java.util.Collection;
-import java.util.Date;
-import java.util.EnumSet;
-import java.util.Set;
+import java.util.*;
 
 import static ru.javawebinar.topjava.util.MealsUtil.DEFAULT_CALORIES_PER_DAY;
 
@@ -57,6 +54,18 @@
     @Range(min = 10, max = 10000)
     private int caloriesPerDay = DEFAULT_CALORIES_PER_DAY;
 
+    @OneToMany(mappedBy = "user")
+    @Column(name = "meals")
+    private List<Meal> meals;
+
+    public List<Meal> getMeals() {
+        return meals;
+    }
+
+    public void setMeals(List<Meal> meals) {
+        this.meals = meals;
+    }
+
     public User() {
     }
 
Index: target/classes/db/postgres.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#database.url=jdbc:postgresql://ec2-54-247-74-197.eu-west-1.compute.amazonaws.com:5432/de4fjsqhdvl7ld?ssl=true&sslmode=require&sslfactory=org.postgresql.ssl.NonValidatingFactory\r\n#database.username=anbxkjtzukqacj\r\n#database.password=da1f25b2a38784fb0d46858e5b8fc168e08c9e1e9c72faea5bbac9c0e1f9c24f\r\n\r\ndatabase.url=jdbc:postgresql://localhost:5432/topjava\r\ndatabase.username=user\r\ndatabase.password=password\r\ndatabase.driverClassName=org.postgresql.Driver\r\n\r\ndatabase.init=true\r\njdbc.initLocation=classpath:db/initDB.sql\r\njpa.showSql=true\r\nhibernate.format_sql=true\r\nhibernate.use_sql_comments=true\r\nhibernate.hbm2ddl.auto=create
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1251
===================================================================
--- target/classes/db/postgres.properties	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ target/classes/db/postgres.properties	(date 1604312410065)
@@ -5,11 +5,9 @@
 database.url=jdbc:postgresql://localhost:5432/topjava
 database.username=user
 database.password=password
-database.driverClassName=org.postgresql.Driver
 
 database.init=true
 jdbc.initLocation=classpath:db/initDB.sql
 jpa.showSql=true
 hibernate.format_sql=true
-hibernate.use_sql_comments=true
-hibernate.hbm2ddl.auto=create
\ No newline at end of file
+hibernate.use_sql_comments=true
\ No newline at end of file
Index: src/main/java/ru/javawebinar/topjava/service/MealService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.service;\r\n\r\nimport org.springframework.lang.Nullable;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.util.Assert;\r\nimport ru.javawebinar.topjava.model.Meal;\r\nimport ru.javawebinar.topjava.repository.MealRepository;\r\n\r\nimport java.time.LocalDate;\r\nimport java.util.List;\r\n\r\nimport static ru.javawebinar.topjava.util.DateTimeUtil.atStartOfDayOrMin;\r\nimport static ru.javawebinar.topjava.util.DateTimeUtil.atStartOfNextDayOrMax;\r\nimport static ru.javawebinar.topjava.util.ValidationUtil.checkNotFoundWithId;\r\n\r\n@Service\r\npublic class MealService {\r\n\r\n    private final MealRepository repository;\r\n\r\n    public MealService(MealRepository repository) {\r\n        this.repository = repository;\r\n    }\r\n\r\n    public Meal get(int id, int userId) {\r\n        return checkNotFoundWithId(repository.get(id, userId), id);\r\n    }\r\n\r\n    public void delete(int id, int userId) {\r\n        checkNotFoundWithId(repository.delete(id, userId), id);\r\n    }\r\n\r\n    public List<Meal> getBetweenInclusive(@Nullable LocalDate startDate, @Nullable LocalDate endDate, int userId) {\r\n        return repository.getBetweenHalfOpen(atStartOfDayOrMin(startDate), atStartOfNextDayOrMax(endDate), userId);\r\n    }\r\n\r\n    public List<Meal> getAll(int userId) {\r\n        return repository.getAll(userId);\r\n    }\r\n\r\n    public void update(Meal meal, int userId) {\r\n        Assert.notNull(meal, \"meal must not be null\");\r\n        checkNotFoundWithId(repository.save(meal, userId), meal.id());\r\n    }\r\n\r\n    public Meal create(Meal meal, int userId) {\r\n        Assert.notNull(meal, \"meal must not be null\");\r\n        return repository.save(meal, userId);\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/service/MealService.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/service/MealService.java	(date 1604330164096)
@@ -47,4 +47,8 @@
         Assert.notNull(meal, "meal must not be null");
         return repository.save(meal, userId);
     }
+
+    public Meal getMealWithUser(int id, int userId) {
+        return repository.getMealWithUser(id, userId);
+    }
 }
\ No newline at end of file
Index: src/main/java/ru/javawebinar/topjava/repository/jpa/JpaMealRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.repository.jpa;\r\n\r\nimport org.springframework.stereotype.Repository;\r\nimport org.springframework.transaction.annotation.Transactional;\r\nimport ru.javawebinar.topjava.model.Meal;\r\nimport ru.javawebinar.topjava.model.User;\r\nimport ru.javawebinar.topjava.repository.MealRepository;\r\n\r\nimport javax.persistence.EntityManager;\r\nimport javax.persistence.PersistenceContext;\r\nimport java.time.LocalDateTime;\r\nimport java.util.List;\r\n\r\n@Repository\r\n@Transactional(readOnly = true)\r\npublic class JpaMealRepository implements MealRepository {\r\n\r\n    @PersistenceContext\r\n    private EntityManager em;\r\n\r\n    @Override\r\n    @Transactional\r\n    public Meal save(Meal meal, int userId) {\r\n        meal.setUser(em.getReference(User.class, userId));\r\n        if (meal.isNew()) {\r\n            em.persist(meal);\r\n            return meal;\r\n        } else if (get(meal.id(), userId) == null) {\r\n            return null;\r\n        }\r\n        return em.merge(meal);\r\n    }\r\n\r\n    @Override\r\n    @Transactional\r\n    public boolean delete(int id, int userId) {\r\n        return em.createNamedQuery(Meal.DELETE)\r\n                .setParameter(\"id\", id)\r\n                .setParameter(\"userId\", userId)\r\n                .executeUpdate() != 0;\r\n    }\r\n\r\n    @Override\r\n    public Meal get(int id, int userId) {\r\n        Meal meal = em.find(Meal.class, id);\r\n        return meal != null && meal.getUser().getId() == userId ? meal : null;\r\n    }\r\n\r\n    @Override\r\n    public List<Meal> getAll(int userId) {\r\n        return em.createNamedQuery(Meal.ALL_SORTED, Meal.class)\r\n                .setParameter(\"userId\", userId)\r\n                .getResultList();\r\n    }\r\n\r\n    @Override\r\n    public List<Meal> getBetweenHalfOpen(LocalDateTime startDateTime, LocalDateTime endDateTime, int userId) {\r\n        return em.createNamedQuery(Meal.GET_BETWEEN, Meal.class)\r\n                .setParameter(\"userId\", userId)\r\n                .setParameter(\"startDateTime\", startDateTime)\r\n                .setParameter(\"endDateTime\", endDateTime)\r\n                .getResultList();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/repository/jpa/JpaMealRepository.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/repository/jpa/JpaMealRepository.java	(date 1604330164055)
@@ -11,6 +11,7 @@
 import java.time.LocalDateTime;
 import java.util.List;
 
+
 @Repository
 @Transactional(readOnly = true)
 public class JpaMealRepository implements MealRepository {
@@ -61,4 +62,9 @@
                 .setParameter("endDateTime", endDateTime)
                 .getResultList();
     }
+
+    @Override
+    public Meal getMealWithUser(int id, int UserId) {
+        throw new UnsupportedOperationException();
+    }
 }
\ No newline at end of file
Index: src/main/java/ru/javawebinar/topjava/service/UserService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.service;\r\n\r\nimport org.springframework.cache.annotation.CacheEvict;\r\nimport org.springframework.cache.annotation.Cacheable;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.util.Assert;\r\nimport ru.javawebinar.topjava.model.User;\r\nimport ru.javawebinar.topjava.repository.UserRepository;\r\n\r\nimport java.util.List;\r\n\r\nimport static ru.javawebinar.topjava.util.ValidationUtil.checkNotFound;\r\nimport static ru.javawebinar.topjava.util.ValidationUtil.checkNotFoundWithId;\r\n\r\n@Service\r\npublic class UserService {\r\n\r\n    private final UserRepository repository;\r\n\r\n    public UserService(UserRepository repository) {\r\n        this.repository = repository;\r\n    }\r\n\r\n    @CacheEvict(value = \"users\", allEntries = true)\r\n    public User create(User user) {\r\n        Assert.notNull(user, \"user must not be null\");\r\n        return repository.save(user);\r\n    }\r\n\r\n    @CacheEvict(value = \"users\", allEntries = true)\r\n    public void delete(int id) {\r\n        checkNotFoundWithId(repository.delete(id), id);\r\n    }\r\n\r\n    public User get(int id) {\r\n        return checkNotFoundWithId(repository.get(id), id);\r\n    }\r\n\r\n    public User getByEmail(String email) {\r\n        Assert.notNull(email, \"email must not be null\");\r\n        return checkNotFound(repository.getByEmail(email), \"email=\" + email);\r\n    }\r\n\r\n    @Cacheable(\"users\")\r\n    public List<User> getAll() {\r\n        return repository.getAll();\r\n    }\r\n\r\n    @CacheEvict(value = \"users\", allEntries = true)\r\n    public void update(User user) {\r\n        Assert.notNull(user, \"user must not be null\");\r\n        checkNotFoundWithId(repository.save(user), user.id());\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/service/UserService.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/service/UserService.java	(date 1604330164040)
@@ -51,4 +51,8 @@
         Assert.notNull(user, "user must not be null");
         checkNotFoundWithId(repository.save(user), user.id());
     }
+
+    public User gerUserWithMeals(int userId) {
+        return repository.gerUserWithMeals(userId);
+    }
 }
\ No newline at end of file
Index: target/classes/db/hsqldb.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>database.url=jdbc:hsqldb:file:D:/temp/topjava\r\n\r\n#database.url=jdbc:hsqldb:mem:topjava\r\ndatabase.username=sa\r\ndatabase.password=\r\ndatabase.driverClassName=org.hsqldb.jdbcDriver\r\n\r\ndatabase.init=true\r\njdbc.initLocation=classpath:db/initDB_hsql.sql\r\njpa.showSql=true\r\nhibernate.format_sql=true\r\nhibernate.use_sql_comments=true
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1251
===================================================================
--- target/classes/db/hsqldb.properties	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ target/classes/db/hsqldb.properties	(date 1604312410060)
@@ -1,9 +1,8 @@
-database.url=jdbc:hsqldb:file:D:/temp/topjava
+#database.url=jdbc:hsqldb:file:D:/temp/topjava
 
-#database.url=jdbc:hsqldb:mem:topjava
+database.url=jdbc:hsqldb:mem:topjava
 database.username=sa
 database.password=
-database.driverClassName=org.hsqldb.jdbcDriver
 
 database.init=true
 jdbc.initLocation=classpath:db/initDB_hsql.sql
Index: src/main/java/ru/javawebinar/topjava/repository/MealRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.repository;\r\n\r\nimport ru.javawebinar.topjava.model.Meal;\r\n\r\nimport java.time.LocalDateTime;\r\nimport java.util.List;\r\n\r\npublic interface MealRepository {\r\n    // null if updated meal do not belong to userId\r\n    Meal save(Meal meal, int userId);\r\n\r\n    // false if meal do not belong to userId\r\n    boolean delete(int id, int userId);\r\n\r\n    // null if meal do not belong to userId\r\n    Meal get(int id, int userId);\r\n\r\n    // ORDERED dateTime desc\r\n    List<Meal> getAll(int userId);\r\n\r\n    // ORDERED dateTime desc\r\n    List<Meal> getBetweenHalfOpen(LocalDateTime startDateTime, LocalDateTime endDateTime, int userId);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/repository/MealRepository.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/repository/MealRepository.java	(date 1604330164051)
@@ -20,4 +20,8 @@
 
     // ORDERED dateTime desc
     List<Meal> getBetweenHalfOpen(LocalDateTime startDateTime, LocalDateTime endDateTime, int userId);
+
+    default Meal getMealWithUser(int id, int UserId) {
+        throw new UnsupportedOperationException();
+    }
 }
Index: src/main/resources/db/hsqldb.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#database.url=jdbc:hsqldb:file:D:/temp/topjava\r\n\r\ndatabase.url=jdbc:hsqldb:mem:topjava\r\ndatabase.username=sa\r\ndatabase.password=\r\n\r\ndatabase.init=true\r\njdbc.initLocation=classpath:db/initDB_hsql.sql\r\njpa.showSql=true\r\nhibernate.format_sql=true\r\nhibernate.use_sql_comments=true
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1251
===================================================================
--- src/main/resources/db/hsqldb.properties	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/resources/db/hsqldb.properties	(date 1604330164072)
@@ -1,9 +1,7 @@
 #database.url=jdbc:hsqldb:file:D:/temp/topjava
-
 database.url=jdbc:hsqldb:mem:topjava
 database.username=sa
 database.password=
-
 database.init=true
 jdbc.initLocation=classpath:db/initDB_hsql.sql
 jpa.showSql=true
Index: src/main/java/ru/javawebinar/topjava/repository/jpa/JpaUserRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.repository.jpa;\r\n\r\nimport org.springframework.dao.support.DataAccessUtils;\r\nimport org.springframework.stereotype.Repository;\r\nimport org.springframework.transaction.annotation.Transactional;\r\nimport ru.javawebinar.topjava.model.User;\r\nimport ru.javawebinar.topjava.repository.UserRepository;\r\n\r\nimport javax.persistence.EntityManager;\r\nimport javax.persistence.PersistenceContext;\r\nimport java.util.List;\r\n\r\n@Repository\r\n@Transactional(readOnly = true)\r\npublic class JpaUserRepository implements UserRepository {\r\n\r\n/*\r\n    @Autowired\r\n    private SessionFactory sessionFactory;\r\n\r\n    private Session openSession() {\r\n        return sessionFactory.getCurrentSession();\r\n    }\r\n*/\r\n\r\n    @PersistenceContext\r\n    private EntityManager em;\r\n\r\n    @Override\r\n    @Transactional\r\n    public User save(User user) {\r\n        if (user.isNew()) {\r\n            em.persist(user);\r\n            return user;\r\n        } else {\r\n            return em.merge(user);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public User get(int id) {\r\n        return em.find(User.class, id);\r\n    }\r\n\r\n    @Override\r\n    @Transactional\r\n    public boolean delete(int id) {\r\n\r\n/*      User ref = em.getReference(User.class, id);\r\n        em.remove(ref);\r\n\r\n        Query query = em.createQuery(\"DELETE FROM User u WHERE u.id=:id\");\r\n        return query.setParameter(\"id\", id).executeUpdate() != 0;\r\n*/\r\n        return em.createNamedQuery(User.DELETE)\r\n                .setParameter(\"id\", id)\r\n                .executeUpdate() != 0;\r\n    }\r\n\r\n    @Override\r\n    public User getByEmail(String email) {\r\n        List<User> users = em.createNamedQuery(User.BY_EMAIL, User.class)\r\n                .setParameter(1, email)\r\n                .getResultList();\r\n        return DataAccessUtils.singleResult(users);\r\n    }\r\n\r\n    @Override\r\n    public List<User> getAll() {\r\n        return em.createNamedQuery(User.ALL_SORTED, User.class).getResultList();\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/repository/jpa/JpaUserRepository.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/repository/jpa/JpaUserRepository.java	(date 1604330164116)
@@ -69,4 +69,5 @@
     public List<User> getAll() {
         return em.createNamedQuery(User.ALL_SORTED, User.class).getResultList();
     }
+
 }
Index: src/main/java/ru/javawebinar/topjava/repository/UserRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.repository;\r\n\r\nimport ru.javawebinar.topjava.model.User;\r\n\r\nimport java.util.List;\r\n\r\npublic interface UserRepository {\r\n    // null if not found, when updated\r\n    User save(User user);\r\n\r\n    // false if not found\r\n    boolean delete(int id);\r\n\r\n    // null if not found\r\n    User get(int id);\r\n\r\n    // null if not found\r\n    User getByEmail(String email);\r\n\r\n    List<User> getAll();\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/repository/UserRepository.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/repository/UserRepository.java	(date 1604327136944)
@@ -18,4 +18,8 @@
     User getByEmail(String email);
 
     List<User> getAll();
+
+    default User gerUserWithMeals(int userId) {
+        throw new UnsupportedOperationException();
+    }
 }
\ No newline at end of file
Index: .gitignore
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .gitignore	(date 1604331640857)
+++ .gitignore	(date 1604331640857)
@@ -0,0 +1,9 @@
+.idea
+out
+target
+*.iml
+log
+*.patch
+patch
+
+
Index: src/main/java/ru/javawebinar/topjava/repository/jdbc/JdbcUserRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.repository.jdbc;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.dao.support.DataAccessUtils;\r\nimport org.springframework.jdbc.core.BeanPropertyRowMapper;\r\nimport org.springframework.jdbc.core.JdbcTemplate;\r\nimport org.springframework.jdbc.core.namedparam.BeanPropertySqlParameterSource;\r\nimport org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;\r\nimport org.springframework.jdbc.core.simple.SimpleJdbcInsert;\r\nimport org.springframework.stereotype.Repository;\r\nimport ru.javawebinar.topjava.model.User;\r\nimport ru.javawebinar.topjava.repository.UserRepository;\r\n\r\nimport java.util.List;\r\n\r\n@Repository\r\npublic class JdbcUserRepository implements UserRepository {\r\n\r\n    private static final BeanPropertyRowMapper<User> ROW_MAPPER = BeanPropertyRowMapper.newInstance(User.class);\r\n\r\n    private final JdbcTemplate jdbcTemplate;\r\n\r\n    private final NamedParameterJdbcTemplate namedParameterJdbcTemplate;\r\n\r\n    private final SimpleJdbcInsert insertUser;\r\n\r\n    @Autowired\r\n    public JdbcUserRepository(JdbcTemplate jdbcTemplate, NamedParameterJdbcTemplate namedParameterJdbcTemplate) {\r\n        this.insertUser = new SimpleJdbcInsert(jdbcTemplate)\r\n                .withTableName(\"users\")\r\n                .usingGeneratedKeyColumns(\"id\");\r\n\r\n        this.jdbcTemplate = jdbcTemplate;\r\n        this.namedParameterJdbcTemplate = namedParameterJdbcTemplate;\r\n    }\r\n\r\n    @Override\r\n    public User save(User user) {\r\n        BeanPropertySqlParameterSource parameterSource = new BeanPropertySqlParameterSource(user);\r\n\r\n        if (user.isNew()) {\r\n            Number newKey = insertUser.executeAndReturnKey(parameterSource);\r\n            user.setId(newKey.intValue());\r\n        } else if (namedParameterJdbcTemplate.update(\"\"\"\r\n                   UPDATE users SET name=:name, email=:email, password=:password, \r\n                   registered=:registered, enabled=:enabled, calories_per_day=:caloriesPerDay WHERE id=:id\r\n                \"\"\", parameterSource) == 0) {\r\n            return null;\r\n        }\r\n        return user;\r\n    }\r\n\r\n    @Override\r\n    public boolean delete(int id) {\r\n        return jdbcTemplate.update(\"DELETE FROM users WHERE id=?\", id) != 0;\r\n    }\r\n\r\n    @Override\r\n    public User get(int id) {\r\n        List<User> users = jdbcTemplate.query(\"SELECT * FROM users WHERE id=?\", ROW_MAPPER, id);\r\n        return DataAccessUtils.singleResult(users);\r\n    }\r\n\r\n    @Override\r\n    public User getByEmail(String email) {\r\n//        return jdbcTemplate.queryForObject(\"SELECT * FROM users WHERE email=?\", ROW_MAPPER, email);\r\n        List<User> users = jdbcTemplate.query(\"SELECT * FROM users WHERE email=?\", ROW_MAPPER, email);\r\n        return DataAccessUtils.singleResult(users);\r\n    }\r\n\r\n    @Override\r\n    public List<User> getAll() {\r\n        return jdbcTemplate.query(\"SELECT * FROM users ORDER BY name, email\", ROW_MAPPER);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/repository/jdbc/JdbcUserRepository.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/repository/jdbc/JdbcUserRepository.java	(date 1604330164066)
@@ -13,6 +13,7 @@
 
 import java.util.List;
 
+
 @Repository
 public class JdbcUserRepository implements UserRepository {
 
Index: target/classes/logback.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<configuration scan=\"true\" scanPeriod=\"30 seconds\">\r\n\r\n    <!-- To enable JMX Management -->\r\n    <jmxConfigurator/>\r\n\r\n    <appender name=\"file\" class=\"ch.qos.logback.core.FileAppender\">\r\n        <file>${TOPJAVA_ROOT}/log/topjava.log</file>\r\n\r\n        <encoder>\r\n            <charset>UTF-8</charset>\r\n            <pattern>%date %-5level %logger{50}.%M:%L - %msg%n</pattern>\r\n        </encoder>\r\n    </appender>\r\n\r\n    <appender name=\"console\" class=\"ch.qos.logback.core.ConsoleAppender\">\r\n        <encoder>\r\n            <charset>UTF-8</charset>\r\n            <pattern>%d{HH:mm:ss.SSS} %-5level %class{50}.%M:%L - %msg%n</pattern>\r\n        </encoder>\r\n    </appender>\r\n\r\n    <logger name=\"org.springframework\" level=\"debug\"/>\r\n    <logger name=\"ru.javawebinar.topjava\" level=\"debug\"/>\r\n\r\n    <root level=\"info\">\r\n        <appender-ref ref=\"file\"/>\r\n        <appender-ref ref=\"console\"/>\r\n    </root>\r\n</configuration>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- target/classes/logback.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ target/classes/logback.xml	(date 1604312410066)
@@ -16,11 +16,10 @@
     <appender name="console" class="ch.qos.logback.core.ConsoleAppender">
         <encoder>
             <charset>UTF-8</charset>
-            <pattern>%d{HH:mm:ss.SSS} %-5level %class{50}.%M:%L - %msg%n</pattern>
+            <pattern>%d{HH:mm:ss.SSS} %highlight(%-5level) %cyan(%class{50}.%M:%L) - %msg%n</pattern>
         </encoder>
     </appender>
 
-    <logger name="org.springframework" level="debug"/>
     <logger name="ru.javawebinar.topjava" level="debug"/>
 
     <root level="info">
Index: src/test/resources/logback-test.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><configuration>\r\n\r\n    <contextListener class=\"ch.qos.logback.classic.jul.LevelChangePropagator\">\r\n        <resetJUL>true</resetJUL>\r\n    </contextListener>\r\n\r\n    <appender name=\"console\" class=\"ch.qos.logback.core.ConsoleAppender\">\r\n        <encoder>\r\n            <charset>UTF-8</charset>\r\n            <pattern>%d{HH:mm:ss.SSS} %highlight(%-5level) %cyan(%class{50}.%M:%L) - %msg%n</pattern>\r\n        </encoder>\r\n    </appender>\r\n\r\n    <appender name=\"result\" class=\"ch.qos.logback.core.ConsoleAppender\">\r\n        <encoder>\r\n            <charset>UTF-8</charset>\r\n            <pattern>%magenta(%msg%n)</pattern>\r\n        </encoder>\r\n    </appender>\r\n    <logger name=\"result\" level=\"INFO\" additivity=\"false\">\r\n        <appender-ref ref=\"result\"/>\r\n    </logger>\r\n\r\n<!--    <logger name=\"org.postgresql\" level=\"debug\"/>-->\r\n<!--    <logger name=\"org.springframework.jdbc\" level=\"info\"/>-->\r\n    <logger name=\"ru.javawebinar.topjava\" level=\"debug\"/>\r\n\r\n    <root level=\"INFO\">\r\n        <appender-ref ref=\"console\"/>\r\n    </root>\r\n\r\n</configuration>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/test/resources/logback-test.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/test/resources/logback-test.xml	(date 1604330164102)
@@ -21,8 +21,8 @@
         <appender-ref ref="result"/>
     </logger>
 
-<!--    <logger name="org.postgresql" level="debug"/>-->
-<!--    <logger name="org.springframework.jdbc" level="info"/>-->
+    <!--    <logger name="org.postgresql" level="debug"/>-->
+    <!--    <logger name="org.springframework.jdbc" level="info"/>-->
     <logger name="ru.javawebinar.topjava" level="debug"/>
 
     <root level="INFO">
Index: src/test/java/ru/javawebinar/topjava/UserTestData.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava;\r\n\r\nimport ru.javawebinar.topjava.TestMatcher;\r\nimport ru.javawebinar.topjava.model.Role;\r\nimport ru.javawebinar.topjava.model.User;\r\n\r\nimport java.util.Collections;\r\nimport java.util.Date;\r\n\r\nimport static ru.javawebinar.topjava.model.AbstractBaseEntity.START_SEQ;\r\n\r\npublic class UserTestData {\r\n    public static TestMatcher<User> USER_MATCHER = TestMatcher.usingIgnoringFieldsComparator(\"registered\", \"roles\");\r\n\r\n    public static final int USER_ID = START_SEQ;\r\n    public static final int ADMIN_ID = START_SEQ + 1;\r\n    public static final int NOT_FOUND = 10;\r\n\r\n    public static final User user = new User(USER_ID, \"User\", \"user@yandex.ru\", \"password\", Role.USER);\r\n    public static final User admin = new User(ADMIN_ID, \"Admin\", \"admin@gmail.com\", \"admin\", Role.ADMIN);\r\n\r\n    public static User getNew() {\r\n        return new User(null, \"New\", \"new@gmail.com\", \"newPass\", 1555, false, new Date(), Collections.singleton(Role.USER));\r\n    }\r\n\r\n    public static User getUpdated() {\r\n        User updated = new User(user);\r\n        updated.setEmail(\"update@gmail.com\");\r\n        updated.setName(\"UpdatedName\");\r\n        updated.setCaloriesPerDay(330);\r\n        updated.setPassword(\"newPass\");\r\n        updated.setEnabled(false);\r\n        updated.setRoles(Collections.singletonList(Role.ADMIN));\r\n        return updated;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/test/java/ru/javawebinar/topjava/UserTestData.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/test/java/ru/javawebinar/topjava/UserTestData.java	(date 1604330124487)
@@ -1,6 +1,5 @@
 package ru.javawebinar.topjava;
 
-import ru.javawebinar.topjava.TestMatcher;
 import ru.javawebinar.topjava.model.Role;
 import ru.javawebinar.topjava.model.User;
 
@@ -10,7 +9,7 @@
 import static ru.javawebinar.topjava.model.AbstractBaseEntity.START_SEQ;
 
 public class UserTestData {
-    public static TestMatcher<User> USER_MATCHER = TestMatcher.usingIgnoringFieldsComparator("registered", "roles");
+    public static TestMatcher<User> USER_MATCHER = TestMatcher.usingIgnoringFieldsComparator("registered", "roles", "meals");
 
     public static final int USER_ID = START_SEQ;
     public static final int ADMIN_ID = START_SEQ + 1;
Index: src/main/resources/db/populateDB.sql
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>DELETE FROM user_roles;\r\nDELETE FROM meals;\r\nDELETE FROM users;\r\nALTER SEQUENCE global_seq RESTART WITH 100000;\r\n\r\nINSERT INTO users (name, email, password)\r\nVALUES ('User', 'user@yandex.ru', 'password'),\r\n       ('Admin', 'admin@gmail.com', 'admin');\r\n\r\nINSERT INTO user_roles (role, user_id)\r\nVALUES ('USER', 100000),\r\n       ('ADMIN', 100001);\r\n\r\nINSERT INTO meals (date_time, description, calories, user_id)\r\nVALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000),\r\n       ('2020-01-30 13:00:00', 'Обед', 1000, 100000),\r\n       ('2020-01-30 20:00:00', 'Ужин', 500, 100000),\r\n       ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000),\r\n       ('2020-01-31 10:00:00', 'Завтрак', 500, 100000),\r\n       ('2020-01-31 13:00:00', 'Обед', 1000, 100000),\r\n       ('2020-01-31 20:00:00', 'Ужин', 510, 100000),\r\n       ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001),\r\n       ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001);
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/resources/db/populateDB.sql	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/resources/db/populateDB.sql	(date 1604330164063)
@@ -1,6 +1,9 @@
-DELETE FROM user_roles;
-DELETE FROM meals;
-DELETE FROM users;
+DELETE
+FROM user_roles;
+DELETE
+FROM meals;
+DELETE
+FROM users;
 ALTER SEQUENCE global_seq RESTART WITH 100000;
 
 INSERT INTO users (name, email, password)
Index: topjava.iml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<module org.jetbrains.idea.maven.project.MavenProjectsManager.isMavenModule=\"true\" type=\"JAVA_MODULE\" version=\"4\">\r\n  <component name=\"FacetManager\">\r\n    <facet type=\"Spring\" name=\"Spring\">\r\n      <configuration>\r\n        <fileset id=\"fileset\" name=\"Spring Application Context\" removed=\"false\">\r\n          <file>file://$MODULE_DIR$/src/main/resources/spring/spring-app.xml</file>\r\n          <file>file://$MODULE_DIR$/src/main/resources/spring/spring-db.xml</file>\r\n        </fileset>\r\n      </configuration>\r\n    </facet>\r\n    <facet type=\"web\" name=\"Web\">\r\n      <configuration>\r\n        <descriptors>\r\n          <deploymentDescriptor name=\"web.xml\" url=\"file://$MODULE_DIR$/src/main/webapp/WEB-INF/web.xml\" />\r\n        </descriptors>\r\n        <webroots>\r\n          <root url=\"file://$MODULE_DIR$/src/main/webapp\" relative=\"/\" />\r\n        </webroots>\r\n        <sourceRoots>\r\n          <root url=\"file://$MODULE_DIR$/src/main/java\" />\r\n          <root url=\"file://$MODULE_DIR$/src/main/resources\" />\r\n        </sourceRoots>\r\n      </configuration>\r\n    </facet>\r\n    <facet type=\"jpa\" name=\"JPA\">\r\n      <configuration>\r\n        <setting name=\"validation-enabled\" value=\"true\" />\r\n        <setting name=\"provider-name\" value=\"Hibernate\" />\r\n        <datasource-mapping>\r\n          <factory-entry name=\"entityManagerFactory\" value=\"eb913ed5-f5f2-48af-957c-ac66848f95d5\" />\r\n        </datasource-mapping>\r\n        <naming-strategy-map />\r\n        <deploymentDescriptor name=\"orm.xml\" url=\"file://$MODULE_DIR$/META-INF/orm.xml\" />\r\n      </configuration>\r\n    </facet>\r\n  </component>\r\n  <component name=\"NewModuleRootManager\" LANGUAGE_LEVEL=\"JDK_15\">\r\n    <output url=\"file://$MODULE_DIR$/target/classes\" />\r\n    <output-test url=\"file://$MODULE_DIR$/target/test-classes\" />\r\n    <content url=\"file://$MODULE_DIR$\">\r\n      <sourceFolder url=\"file://$MODULE_DIR$/src/main/java\" isTestSource=\"false\" />\r\n      <sourceFolder url=\"file://$MODULE_DIR$/src/main/resources\" type=\"java-resource\" />\r\n      <sourceFolder url=\"file://$MODULE_DIR$/src/test/resources\" type=\"java-test-resource\" />\r\n      <sourceFolder url=\"file://$MODULE_DIR$/src/test/java\" isTestSource=\"true\" />\r\n      <excludeFolder url=\"file://$MODULE_DIR$/target\" />\r\n    </content>\r\n    <orderEntry type=\"inheritedJdk\" />\r\n    <orderEntry type=\"sourceFolder\" forTests=\"false\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.slf4j:slf4j-api:1.7.30\" level=\"project\" />\r\n    <orderEntry type=\"library\" scope=\"RUNTIME\" name=\"Maven: org.slf4j:jul-to-slf4j:1.7.30\" level=\"project\" />\r\n    <orderEntry type=\"library\" scope=\"RUNTIME\" name=\"Maven: ch.qos.logback:logback-classic:1.2.3\" level=\"project\" />\r\n    <orderEntry type=\"library\" scope=\"RUNTIME\" name=\"Maven: ch.qos.logback:logback-core:1.2.3\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: javax.annotation:javax.annotation-api:1.3.2\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.springframework:spring-context:5.2.9.RELEASE\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.springframework:spring-aop:5.2.9.RELEASE\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.springframework:spring-beans:5.2.9.RELEASE\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.springframework:spring-core:5.2.9.RELEASE\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.springframework:spring-jcl:5.2.9.RELEASE\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.springframework:spring-expression:5.2.9.RELEASE\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.springframework:spring-orm:5.2.9.RELEASE\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.springframework:spring-jdbc:5.2.9.RELEASE\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.springframework:spring-tx:5.2.9.RELEASE\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.postgresql:postgresql:42.2.17\" level=\"project\" />\r\n    <orderEntry type=\"library\" scope=\"RUNTIME\" name=\"Maven: org.checkerframework:checker-qual:3.5.0\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.hsqldb:hsqldb:2.3.4\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.hibernate:hibernate-core:5.4.22.Final\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.jboss.logging:jboss-logging:3.3.2.Final\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: javax.persistence:javax.persistence-api:2.2\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.javassist:javassist:3.24.0-GA\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: net.bytebuddy:byte-buddy:1.10.10\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: antlr:antlr:2.7.7\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.jboss.spec.javax.transaction:jboss-transaction-api_1.2_spec:1.1.1.Final\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.jboss:jandex:2.1.3.Final\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: com.fasterxml:classmate:1.5.1\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: javax.activation:javax.activation-api:1.2.0\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.dom4j:dom4j:2.1.3\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.hibernate.common:hibernate-commons-annotations:5.1.0.Final\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: javax.xml.bind:jaxb-api:2.3.1\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.glassfish.jaxb:jaxb-runtime:2.3.1\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.glassfish.jaxb:txw2:2.3.1\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: com.sun.istack:istack-commons-runtime:3.0.7\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.jvnet.staxex:stax-ex:1.8\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: com.sun.xml.fastinfoset:FastInfoset:1.2.15\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: org.hibernate.validator:hibernate-validator:6.1.6.Final\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: jakarta.validation:jakarta.validation-api:2.0.2\" level=\"project\" />\r\n    <orderEntry type=\"library\" scope=\"PROVIDED\" name=\"Maven: org.glassfish:javax.el:3.0.1-b12\" level=\"project\" />\r\n    <orderEntry type=\"library\" scope=\"PROVIDED\" name=\"Maven: javax.servlet:javax.servlet-api:4.0.1\" level=\"project\" />\r\n    <orderEntry type=\"library\" name=\"Maven: javax.servlet:jstl:1.2\" level=\"project\" />\r\n    <orderEntry type=\"library\" scope=\"TEST\" name=\"Maven: junit:junit:4.13.1\" level=\"project\" />\r\n    <orderEntry type=\"library\" scope=\"TEST\" name=\"Maven: org.hamcrest:hamcrest-core:1.3\" level=\"project\" />\r\n    <orderEntry type=\"library\" scope=\"TEST\" name=\"Maven: org.springframework:spring-test:5.2.9.RELEASE\" level=\"project\" />\r\n    <orderEntry type=\"library\" scope=\"TEST\" name=\"Maven: org.assertj:assertj-core:3.17.2\" level=\"project\" />\r\n  </component>\r\n</module>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- topjava.iml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ topjava.iml	(date 1604301150023)
@@ -48,22 +48,22 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" name="Maven: org.slf4j:slf4j-api:1.7.30" level="project" />
-    <orderEntry type="library" scope="RUNTIME" name="Maven: org.slf4j:jul-to-slf4j:1.7.30" level="project" />
     <orderEntry type="library" scope="RUNTIME" name="Maven: ch.qos.logback:logback-classic:1.2.3" level="project" />
     <orderEntry type="library" scope="RUNTIME" name="Maven: ch.qos.logback:logback-core:1.2.3" level="project" />
     <orderEntry type="library" name="Maven: javax.annotation:javax.annotation-api:1.3.2" level="project" />
-    <orderEntry type="library" name="Maven: org.springframework:spring-context:5.2.9.RELEASE" level="project" />
-    <orderEntry type="library" name="Maven: org.springframework:spring-aop:5.2.9.RELEASE" level="project" />
-    <orderEntry type="library" name="Maven: org.springframework:spring-beans:5.2.9.RELEASE" level="project" />
-    <orderEntry type="library" name="Maven: org.springframework:spring-core:5.2.9.RELEASE" level="project" />
-    <orderEntry type="library" name="Maven: org.springframework:spring-jcl:5.2.9.RELEASE" level="project" />
-    <orderEntry type="library" name="Maven: org.springframework:spring-expression:5.2.9.RELEASE" level="project" />
-    <orderEntry type="library" name="Maven: org.springframework:spring-orm:5.2.9.RELEASE" level="project" />
-    <orderEntry type="library" name="Maven: org.springframework:spring-jdbc:5.2.9.RELEASE" level="project" />
-    <orderEntry type="library" name="Maven: org.springframework:spring-tx:5.2.9.RELEASE" level="project" />
-    <orderEntry type="library" name="Maven: org.postgresql:postgresql:42.2.17" level="project" />
-    <orderEntry type="library" scope="RUNTIME" name="Maven: org.checkerframework:checker-qual:3.5.0" level="project" />
-    <orderEntry type="library" name="Maven: org.hsqldb:hsqldb:2.3.4" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework:spring-context-support:5.3.0" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework:spring-beans:5.3.0" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework:spring-context:5.3.0" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework:spring-expression:5.3.0" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework:spring-core:5.3.0" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework:spring-jcl:5.3.0" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework.data:spring-data-jpa:2.4.0" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework.data:spring-data-commons:2.4.0" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework:spring-orm:5.3.0" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework:spring-jdbc:5.3.0" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework:spring-aop:5.3.0" level="project" />
+    <orderEntry type="library" name="Maven: org.springframework:spring-tx:5.3.0" level="project" />
+    <orderEntry type="library" name="Maven: org.aspectj:aspectjrt:1.9.6" level="project" />
     <orderEntry type="library" name="Maven: org.hibernate:hibernate-core:5.4.22.Final" level="project" />
     <orderEntry type="library" name="Maven: org.jboss.logging:jboss-logging:3.3.2.Final" level="project" />
     <orderEntry type="library" name="Maven: javax.persistence:javax.persistence-api:2.2" level="project" />
@@ -77,19 +77,27 @@
     <orderEntry type="library" name="Maven: org.dom4j:dom4j:2.1.3" level="project" />
     <orderEntry type="library" name="Maven: org.hibernate.common:hibernate-commons-annotations:5.1.0.Final" level="project" />
     <orderEntry type="library" name="Maven: javax.xml.bind:jaxb-api:2.3.1" level="project" />
-    <orderEntry type="library" name="Maven: org.glassfish.jaxb:jaxb-runtime:2.3.1" level="project" />
-    <orderEntry type="library" name="Maven: org.glassfish.jaxb:txw2:2.3.1" level="project" />
-    <orderEntry type="library" name="Maven: com.sun.istack:istack-commons-runtime:3.0.7" level="project" />
-    <orderEntry type="library" name="Maven: org.jvnet.staxex:stax-ex:1.8" level="project" />
-    <orderEntry type="library" name="Maven: com.sun.xml.fastinfoset:FastInfoset:1.2.15" level="project" />
     <orderEntry type="library" name="Maven: org.hibernate.validator:hibernate-validator:6.1.6.Final" level="project" />
     <orderEntry type="library" name="Maven: jakarta.validation:jakarta.validation-api:2.0.2" level="project" />
     <orderEntry type="library" scope="PROVIDED" name="Maven: org.glassfish:javax.el:3.0.1-b12" level="project" />
+    <orderEntry type="library" name="Maven: javax.cache:cache-api:1.1.0" level="project" />
+    <orderEntry type="library" scope="RUNTIME" name="Maven: org.ehcache:ehcache:3.9.0" level="project" />
+    <orderEntry type="library" name="Maven: org.glassfish.jaxb:jaxb-runtime:2.4.0-b180830.0438" level="project" />
+    <orderEntry type="library" name="Maven: org.glassfish.jaxb:txw2:2.4.0-b180830.0438" level="project" />
+    <orderEntry type="library" name="Maven: com.sun.istack:istack-commons-runtime:3.0.7" level="project" />
+    <orderEntry type="library" name="Maven: org.jvnet.staxex:stax-ex:1.8" level="project" />
+    <orderEntry type="library" name="Maven: com.sun.xml.fastinfoset:FastInfoset:1.2.15" level="project" />
     <orderEntry type="library" scope="PROVIDED" name="Maven: javax.servlet:javax.servlet-api:4.0.1" level="project" />
     <orderEntry type="library" name="Maven: javax.servlet:jstl:1.2" level="project" />
     <orderEntry type="library" scope="TEST" name="Maven: junit:junit:4.13.1" level="project" />
     <orderEntry type="library" scope="TEST" name="Maven: org.hamcrest:hamcrest-core:1.3" level="project" />
-    <orderEntry type="library" scope="TEST" name="Maven: org.springframework:spring-test:5.2.9.RELEASE" level="project" />
+    <orderEntry type="library" scope="TEST" name="Maven: org.springframework:spring-test:5.3.0" level="project" />
     <orderEntry type="library" scope="TEST" name="Maven: org.assertj:assertj-core:3.17.2" level="project" />
+    <orderEntry type="library" name="Maven: org.hsqldb:hsqldb:2.3.4" level="project" />
+    <orderEntry type="library" name="Maven: org.postgresql:postgresql:42.2.17" level="project" />
+    <orderEntry type="library" scope="RUNTIME" name="Maven: org.checkerframework:checker-qual:3.5.0" level="project" />
+    <orderEntry type="library" scope="PROVIDED" name="Maven: org.apache.tomcat:tomcat-jdbc:9.0.39" level="project" />
+    <orderEntry type="library" scope="PROVIDED" name="Maven: org.apache.tomcat:tomcat-juli:9.0.39" level="project" />
+    <orderEntry type="library" scope="RUNTIME" name="Maven: org.slf4j:jul-to-slf4j:1.7.30" level="project" />
   </component>
 </module>
\ No newline at end of file
Index: src/main/resources/db/postgres.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#database.url=jdbc:postgresql://ec2-54-247-74-197.eu-west-1.compute.amazonaws.com:5432/de4fjsqhdvl7ld?ssl=true&sslmode=require&sslfactory=org.postgresql.ssl.NonValidatingFactory\r\n#database.username=anbxkjtzukqacj\r\n#database.password=da1f25b2a38784fb0d46858e5b8fc168e08c9e1e9c72faea5bbac9c0e1f9c24f\r\n\r\ndatabase.url=jdbc:postgresql://localhost:5432/topjava\r\ndatabase.username=user\r\ndatabase.password=password\r\n\r\ndatabase.init=true\r\njdbc.initLocation=classpath:db/initDB.sql\r\njpa.showSql=true\r\nhibernate.format_sql=true\r\nhibernate.use_sql_comments=true
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1251
===================================================================
--- src/main/resources/db/postgres.properties	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/resources/db/postgres.properties	(date 1604330164092)
@@ -1,11 +1,9 @@
 #database.url=jdbc:postgresql://ec2-54-247-74-197.eu-west-1.compute.amazonaws.com:5432/de4fjsqhdvl7ld?ssl=true&sslmode=require&sslfactory=org.postgresql.ssl.NonValidatingFactory
 #database.username=anbxkjtzukqacj
 #database.password=da1f25b2a38784fb0d46858e5b8fc168e08c9e1e9c72faea5bbac9c0e1f9c24f
-
 database.url=jdbc:postgresql://localhost:5432/topjava
 database.username=user
 database.password=password
-
 database.init=true
 jdbc.initLocation=classpath:db/initDB.sql
 jpa.showSql=true
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ArtifactsWorkspaceSettings\">\r\n    <artifacts-to-build>\r\n      <artifact name=\"topjava:war exploded\" />\r\n    </artifacts-to-build>\r\n  </component>\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"BranchesTreeState\">\r\n    <expand>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"LOCAL_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"REMOTE_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"REMOTE_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"GROUP_NODE:origin\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n    </expand>\r\n    <select>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"LOCAL_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n    </select>\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"2307bc25-c918-4eee-8964-6639b3df5b99\" name=\"Default Changelist\" comment=\"hw4 is done v3\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n    </list>\r\n    <list id=\"7c92701b-6be9-4364-92c1-3990de641ecd\" name=\"3 13 test UserService\" comment=\"\" />\r\n    <list id=\"77f1ca77-b097-49c4-aa0b-1b7d06d19e66\" name=\"3 14 test logging\" comment=\"\" />\r\n    <list id=\"cf177c8c-5d00-4414-890a-e12190655a26\" name=\"3 15 fix servlet\" comment=\"\" />\r\n    <list id=\"30a7fb51-f897-47ec-9856-5d05947fcc2c\" name=\"4 0 fix\" comment=\"\" />\r\n    <list id=\"c5426604-a859-488b-b465-7ffb014e3c42\" name=\"4 1 HW3\" comment=\"\" />\r\n    <list id=\"ad95ca0f-aae4-4a1e-9ff1-5a543be4898f\" name=\"4 10 add hsqldb\" comment=\"\" />\r\n    <list id=\"82f43a98-a87d-42b8-89ab-1243b7faf582\" name=\"4 2 HW3 optional\" comment=\"\" />\r\n    <list id=\"b478ef1a-2855-4603-b83f-d0044d23f744\" name=\"4 3 tests refactoring\" comment=\"\" />\r\n    <list id=\"412444f2-77c9-469e-b333-0cd8b6a6f1ab\" name=\"4 4 HW3 fix logging\" comment=\"\" />\r\n    <list id=\"537c2654-d72c-4dc8-a1dc-2455c667e679\" name=\"4 5 improve code\" comment=\"\" />\r\n    <list id=\"25b48298-34fc-4f92-83c4-eb2c1dd5eb70\" name=\"4 6 init and populate db\" comment=\"\" />\r\n    <list id=\"5fb0a571-9ede-4eed-8c2b-b0f498eda41e\" name=\"4 7 create inmemory test ctx\" comment=\"\" />\r\n    <list id=\"3bb62fb0-8542-4bfc-a856-35c993efa3b1\" name=\"4 8 add jpa\" comment=\"\" />\r\n    <list id=\"664a0acd-cd2b-46c6-9332-f14b6d7d734d\" name=\"4 9 add named query and transaction\" comment=\"\" />\r\n    <list id=\"0145e199-8b9a-412b-9b01-7f4f6ced5318\" name=\"5 0 fix\" comment=\"\" />\r\n    <list id=\"a57719a2-95d3-413a-b32b-48c5d9828804\" name=\"5 1 jdk 15\" comment=\"\" />\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Class\" />\r\n        <option value=\"JUnit4 Test Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"hw4\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n    <option name=\"RESET_MODE\" value=\"HARD\" />\r\n  </component>\r\n  <component name=\"GitRewordedCommitMessages\">\r\n    <option name=\"commitMessagesMapping\">\r\n      <RewordedCommitMessageMapping>\r\n        <option name=\"originalMessage\" value=\"hw4 is done\" />\r\n        <option name=\"rewordedMessage\" value=\"hw4 is done\" />\r\n      </RewordedCommitMessageMapping>\r\n    </option>\r\n    <option name=\"currentCommit\" value=\"1\" />\r\n    <option name=\"onto\" value=\"caa22bb7929420d97296a3f1d73dd310b7a4786c\" />\r\n  </component>\r\n  <component name=\"LogFilters\">\r\n    <option name=\"FILTER_ERRORS\" value=\"false\" />\r\n    <option name=\"FILTER_WARNINGS\" value=\"false\" />\r\n    <option name=\"FILTER_INFO\" value=\"true\" />\r\n    <option name=\"FILTER_DEBUG\" value=\"true\" />\r\n    <option name=\"CUSTOM_FILTER\" />\r\n  </component>\r\n  <component name=\"MavenImportPreferences\">\r\n    <option name=\"generalSettings\">\r\n      <MavenGeneralSettings>\r\n        <option name=\"mavenHome\" value=\"C:\\Program Files\\JetBrains\\IntelliJ IDEA 2020.2.3\\plugins\\maven\\lib\\maven3\" />\r\n      </MavenGeneralSettings>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"1j6NceOhxCYeSh8BcnAHXxvLMFZ\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"DatabaseDriversLRU\" value=\"hsqldb&#10;postgresql&#10;h2\" />\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"TODO_SCOPE\" value=\"All Places\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"aspect.path.notification.shown\" value=\"true\" />\r\n    <property name=\"com.intellij.testIntegration.createTest.CreateTestDialog.defaultLibrary\" value=\"JUnit4\" />\r\n    <property name=\"com.intellij.testIntegration.createTest.CreateTestDialog.defaultLibrarySuperClass.JUnit4\" value=\"\" />\r\n    <property name=\"last_directory_selection\" value=\"$PROJECT_DIR$/src/test\" />\r\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$\" />\r\n    <property name=\"nodejs_package_manager_path\" value=\"npm\" />\r\n    <property name=\"project.structure.last.edited\" value=\"Project\" />\r\n    <property name=\"project.structure.proportion\" value=\"0.15\" />\r\n    <property name=\"project.structure.side.proportion\" value=\"0.2\" />\r\n    <property name=\"run.code.analysis.last.selected.profile\" value=\"pProject Default\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"Errors\" />\r\n  </component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CreateTestDialog.RecentsKey\">\r\n      <recent name=\"ru.javawebinar.topjava.repository.jpa\" />\r\n      <recent name=\"ru.javawebinar.topjava.service\" />\r\n    </key>\r\n    <key name=\"MoveClassesOrPackagesDialog.RECENTS_KEY\">\r\n      <recent name=\"ru.javawebinar.topjava\" />\r\n      <recent name=\"ru.javawebinar.topjava.web.user\" />\r\n      <recent name=\"ru.javawebinar.topjava.web\" />\r\n    </key>\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\dev\\projects\\topjava\" />\r\n    </key>\r\n    <key name=\"CreateTestDialog.Recents.Supers\">\r\n      <recent name=\"\" />\r\n    </key>\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\dev\\projects\\topjava\\patch\" />\r\n      <recent name=\"C:\\dev\\projects\\topjava\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\" selected=\"JUnit.MealServiceTest.get\">\r\n    <configuration default=\"true\" type=\"ArquillianJUnit\" factoryName=\"\" nameIsGenerated=\"true\">\r\n      <option name=\"arquillianRunConfiguration\">\r\n        <value>\r\n          <option name=\"containerStateName\" value=\"\" />\r\n        </value>\r\n      </option>\r\n      <option name=\"TEST_OBJECT\" value=\"class\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"populateDB.sql\" type=\"DatabaseScript\" editBeforeRun=\"true\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <script-file value=\"$PROJECT_DIR$/src/main/resources/db/populateDB.sql\" />\r\n      <script-mode>FILE</script-mode>\r\n      <data-source id=\"da64247f-0f0c-49b2-8afd-eea5caa551e8\" namespace=\"database/&quot;topjava&quot;\" />\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <configuration name=\"MealServiceTest.create\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"topjava\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ru.javawebinar.topjava.service.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"ru.javawebinar.topjava.service\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ru.javawebinar.topjava.service.MealServiceTest\" />\r\n      <option name=\"METHOD_NAME\" value=\"create\" />\r\n      <option name=\"TEST_OBJECT\" value=\"method\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"MealServiceTest.deleteNotFount\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"topjava\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ru.javawebinar.topjava.service.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"ru.javawebinar.topjava.service\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ru.javawebinar.topjava.service.MealServiceTest\" />\r\n      <option name=\"METHOD_NAME\" value=\"deleteNotFount\" />\r\n      <option name=\"TEST_OBJECT\" value=\"method\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"MealServiceTest.deleteNotOwn\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"topjava\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ru.javawebinar.topjava.service.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"ru.javawebinar.topjava.service\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ru.javawebinar.topjava.service.MealServiceTest\" />\r\n      <option name=\"METHOD_NAME\" value=\"deleteNotOwn\" />\r\n      <option name=\"TEST_OBJECT\" value=\"method\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"MealServiceTest.get\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"topjava\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ru.javawebinar.topjava.service.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"ru.javawebinar.topjava.service\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ru.javawebinar.topjava.service.MealServiceTest\" />\r\n      <option name=\"METHOD_NAME\" value=\"get\" />\r\n      <option name=\"TEST_OBJECT\" value=\"method\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"Tomcat 9.0.31\" type=\"#com.intellij.j2ee.web.tomcat.TomcatRunConfigurationFactory\" factoryName=\"Local\" APPLICATION_SERVER_NAME=\"Tomcat 9.0.31\" ALTERNATIVE_JRE_ENABLED=\"false\" nameIsGenerated=\"true\">\r\n      <option name=\"OPEN_IN_BROWSER_URL\" value=\"http://localhost:8080/topjava_war_exploded/\" />\r\n      <option name=\"UPDATING_POLICY\" value=\"restart-server\" />\r\n      <deployment>\r\n        <artifact name=\"topjava:war exploded\">\r\n          <settings>\r\n            <option name=\"CONTEXT_PATH\" value=\"/topjava_war_exploded\" />\r\n          </settings>\r\n        </artifact>\r\n      </deployment>\r\n      <server-settings>\r\n        <option name=\"BASE_DIRECTORY_NAME\" value=\"Unnamed_topjava\" />\r\n      </server-settings>\r\n      <predefined_log_file enabled=\"true\" id=\"Tomcat\" />\r\n      <predefined_log_file enabled=\"true\" id=\"Tomcat Catalina\" />\r\n      <predefined_log_file id=\"Tomcat Manager\" />\r\n      <predefined_log_file id=\"Tomcat Host Manager\" />\r\n      <predefined_log_file id=\"Tomcat Localhost Access\" />\r\n      <RunnerSettings RunnerId=\"Debug\">\r\n        <option name=\"DEBUG_PORT\" value=\"62814\" />\r\n      </RunnerSettings>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Cover\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Debug\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Run\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n        <option name=\"BuildArtifacts\" enabled=\"true\">\r\n          <artifact name=\"topjava:war exploded\" />\r\n        </option>\r\n      </method>\r\n    </configuration>\r\n    <list>\r\n      <item itemvalue=\"Tomcat Server.Tomcat 9.0.31\" />\r\n      <item itemvalue=\"Database Script.populateDB.sql\" />\r\n      <item itemvalue=\"JUnit.MealServiceTest.get\" />\r\n      <item itemvalue=\"JUnit.MealServiceTest.deleteNotOwn\" />\r\n      <item itemvalue=\"JUnit.MealServiceTest.deleteNotFount\" />\r\n      <item itemvalue=\"JUnit.MealServiceTest.create\" />\r\n    </list>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"JUnit.MealServiceTest.create\" />\r\n        <item itemvalue=\"JUnit.MealServiceTest.deleteNotFount\" />\r\n        <item itemvalue=\"JUnit.MealServiceTest.deleteNotOwn\" />\r\n        <item itemvalue=\"JUnit.MealServiceTest.get\" />\r\n        <item itemvalue=\"Database Script.populateDB.sql\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"2307bc25-c918-4eee-8964-6639b3df5b99\" name=\"Default Changelist\" comment=\"\" />\r\n      <changelist id=\"30a7fb51-f897-47ec-9856-5d05947fcc2c\" name=\"4 0 fix\" comment=\"\" />\r\n      <changelist id=\"c5426604-a859-488b-b465-7ffb014e3c42\" name=\"4 1 HW3\" comment=\"\" />\r\n      <changelist id=\"82f43a98-a87d-42b8-89ab-1243b7faf582\" name=\"4 2 HW3 optional\" comment=\"\" />\r\n      <changelist id=\"b478ef1a-2855-4603-b83f-d0044d23f744\" name=\"4 3 tests refactoring\" comment=\"\" />\r\n      <changelist id=\"412444f2-77c9-469e-b333-0cd8b6a6f1ab\" name=\"4 4 HW3 fix logging\" comment=\"\" />\r\n      <changelist id=\"537c2654-d72c-4dc8-a1dc-2455c667e679\" name=\"4 5 improve code\" comment=\"\" />\r\n      <changelist id=\"25b48298-34fc-4f92-83c4-eb2c1dd5eb70\" name=\"4 6 init and populate db\" comment=\"\" />\r\n      <changelist id=\"5fb0a571-9ede-4eed-8c2b-b0f498eda41e\" name=\"4 7 create inmemory test ctx\" comment=\"\" />\r\n      <changelist id=\"3bb62fb0-8542-4bfc-a856-35c993efa3b1\" name=\"4 8 add jpa\" comment=\"\" />\r\n      <changelist id=\"664a0acd-cd2b-46c6-9332-f14b6d7d734d\" name=\"4 9 add named query and transaction\" comment=\"\" />\r\n      <changelist id=\"ad95ca0f-aae4-4a1e-9ff1-5a543be4898f\" name=\"4 10 add hsqldb\" comment=\"\" />\r\n      <changelist id=\"7c92701b-6be9-4364-92c1-3990de641ecd\" name=\"3 13 test UserService\" comment=\"\" />\r\n      <changelist id=\"77f1ca77-b097-49c4-aa0b-1b7d06d19e66\" name=\"3 14 test logging\" comment=\"\" />\r\n      <changelist id=\"cf177c8c-5d00-4414-890a-e12190655a26\" name=\"3 15 fix servlet\" comment=\"\" />\r\n      <changelist id=\"0145e199-8b9a-412b-9b01-7f4f6ced5318\" name=\"5 0 fix\" comment=\"\" />\r\n      <changelist id=\"a57719a2-95d3-413a-b32b-48c5d9828804\" name=\"5 1 jdk 15\" comment=\"\" />\r\n      <created>1603120662993</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1603120662993</updated>\r\n      <workItem from=\"1603120664385\" duration=\"2223000\" />\r\n      <workItem from=\"1603139069574\" duration=\"38754000\" />\r\n      <workItem from=\"1603459218726\" duration=\"2094000\" />\r\n      <workItem from=\"1603461323179\" duration=\"2635000\" />\r\n      <workItem from=\"1603463968515\" duration=\"24029000\" />\r\n      <workItem from=\"1603628167125\" duration=\"38533000\" />\r\n      <workItem from=\"1603900790446\" duration=\"4234000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"hw4 is done\">\r\n      <created>1603643181150</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1603643181150</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"hw4 is done\">\r\n      <created>1603646064925</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1603646064925</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"hw4 is done v3\">\r\n      <created>1603651866797</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1603651866797</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"4\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"hw3 is done\" />\r\n    <MESSAGE value=\"hw4 is done\" />\r\n    <MESSAGE value=\"hw4 is done v3\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"hw4 is done v3\" />\r\n  </component>\r\n  <component name=\"WindowStateProjectService\">\r\n    <state x=\"1619\" y=\"591\" key=\"#Assign_Data_Sources\" timestamp=\"1603468518022\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1619\" y=\"591\" key=\"#Assign_Data_Sources/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603468518022\" />\r\n    <state x=\"1109\" y=\"541\" key=\"#SQL_Dialects\" timestamp=\"1603191778259\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1109\" y=\"541\" key=\"#SQL_Dialects/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603191778259\" />\r\n    <state x=\"1402\" y=\"342\" width=\"1092\" height=\"724\" key=\"#com.intellij.execution.impl.EditConfigurationsDialog\" timestamp=\"1603894927450\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1402\" y=\"342\" width=\"1092\" height=\"724\" key=\"#com.intellij.execution.impl.EditConfigurationsDialog/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603894927450\" />\r\n    <state x=\"2385\" y=\"419\" key=\"#com.intellij.ide.util.MemberChooser\" timestamp=\"1603205894226\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"2385\" y=\"419\" key=\"#com.intellij.ide.util.MemberChooser/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603205894226\" />\r\n    <state x=\"1524\" y=\"606\" key=\"#com.intellij.javaee.module.view.common.J2EE.J2EEDeploymentDescriptorLocationPanel.changeDDPath\" timestamp=\"1603458244013\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1524\" y=\"606\" key=\"#com.intellij.javaee.module.view.common.J2EE.J2EEDeploymentDescriptorLocationPanel.changeDDPath/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603458244013\" />\r\n    <state x=\"1397\" y=\"624\" key=\"#com.intellij.refactoring.move.MoveHandler.SelectRefactoringDialog\" timestamp=\"1603462717229\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1397\" y=\"624\" key=\"#com.intellij.refactoring.move.MoveHandler.SelectRefactoringDialog/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603462717229\" />\r\n    <state x=\"2586\" y=\"622\" width=\"608\" height=\"270\" key=\"#com.intellij.refactoring.move.moveClassesOrPackages.MoveClassesOrPackagesDialog.classes\" timestamp=\"1603464008533\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"2586\" y=\"622\" width=\"608\" height=\"270\" key=\"#com.intellij.refactoring.move.moveClassesOrPackages.MoveClassesOrPackagesDialog.classes/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603464008533\" />\r\n    <state x=\"2310\" y=\"450\" key=\"#com.intellij.refactoring.safeDelete.UnsafeUsagesDialog\" timestamp=\"1603202622336\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"2310\" y=\"450\" key=\"#com.intellij.refactoring.safeDelete.UnsafeUsagesDialog/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603202622336\" />\r\n    <state x=\"690\" y=\"584\" width=\"1521\" height=\"728\" key=\"#xdebugger.evaluate\" timestamp=\"1603642789474\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"690\" y=\"584\" width=\"1521\" height=\"728\" key=\"#xdebugger.evaluate/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603642789474\" />\r\n    <state x=\"1478\" y=\"559\" key=\"ANALYSIS_DLG_com.intellij.analysis.BaseAnalysisAction$1\" timestamp=\"1603120912772\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1478\" y=\"559\" key=\"ANALYSIS_DLG_com.intellij.analysis.BaseAnalysisAction$1/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603120912772\" />\r\n    <state width=\"254\" height=\"195\" key=\"DatabaseViewActions_Filter\" timestamp=\"1603206485722\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"254\" height=\"195\" key=\"DatabaseViewActions_Filter/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603206485722\" />\r\n    <state x=\"672\" y=\"72\" width=\"2360\" height=\"1207\" key=\"DiffContextDialog\" timestamp=\"1604070243627\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"672\" y=\"72\" width=\"2360\" height=\"1207\" key=\"DiffContextDialog/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1604070243627\" />\r\n    <state x=\"1500\" y=\"455\" key=\"FileChooserDialogImpl\" timestamp=\"1604069808185\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1500\" y=\"455\" key=\"FileChooserDialogImpl/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1604069808185\" />\r\n    <state x=\"2447\" y=\"604\" key=\"Git.Rebase.Log.Action.NewCommitMessage.Dialog\" timestamp=\"1603646263670\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"2447\" y=\"604\" key=\"Git.Rebase.Log.Action.NewCommitMessage.Dialog/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603646263670\" />\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.0.bottom\" timestamp=\"1603895719171\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.0.bottom/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719171\" />\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.0.center\" timestamp=\"1603895719171\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.0.center/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719171\" />\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.0.left\" timestamp=\"1603895719171\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.0.left/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719171\" />\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.0.right\" timestamp=\"1603895719171\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.0.right/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719171\" />\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.1.bottom\" timestamp=\"1603895719171\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.1.bottom/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719171\" />\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.1.center\" timestamp=\"1603895719171\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.1.center/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719171\" />\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.1.left\" timestamp=\"1603895719171\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.1.left/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719171\" />\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.1.right\" timestamp=\"1603895719171\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2873\" height=\"491\" key=\"GridCell.Tab.1.right/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719171\" />\r\n    <state width=\"1117\" height=\"491\" key=\"GridCell.Tab.2.bottom\" timestamp=\"1603895719164\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"1117\" height=\"491\" key=\"GridCell.Tab.2.bottom/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719164\" />\r\n    <state width=\"1117\" height=\"491\" key=\"GridCell.Tab.2.center\" timestamp=\"1603895719164\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"1117\" height=\"491\" key=\"GridCell.Tab.2.center/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719164\" />\r\n    <state width=\"1117\" height=\"491\" key=\"GridCell.Tab.2.left\" timestamp=\"1603895719164\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"1117\" height=\"491\" key=\"GridCell.Tab.2.left/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719164\" />\r\n    <state width=\"1117\" height=\"491\" key=\"GridCell.Tab.2.right\" timestamp=\"1603895719164\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"1117\" height=\"491\" key=\"GridCell.Tab.2.right/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603895719164\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.3.bottom\" timestamp=\"1603467393233\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.3.bottom/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603467393233\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.3.center\" timestamp=\"1603467393233\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.3.center/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603467393233\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.3.left\" timestamp=\"1603467393233\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.3.left/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603467393233\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.3.right\" timestamp=\"1603467393233\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.3.right/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603467393233\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.4.bottom\" timestamp=\"1603466907835\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.4.bottom/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603466907835\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.4.center\" timestamp=\"1603466907835\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.4.center/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603466907835\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.4.left\" timestamp=\"1603466907835\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.4.left/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603466907835\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.4.right\" timestamp=\"1603466907835\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.4.right/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603466907835\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.5.bottom\" timestamp=\"1603466908764\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.5.bottom/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603466908764\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.5.center\" timestamp=\"1603466908764\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.5.center/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603466908764\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.5.left\" timestamp=\"1603466908764\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.5.left/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603466908764\" />\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.5.right\" timestamp=\"1603466908764\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"2357\" height=\"397\" key=\"GridCell.Tab.5.right/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603466908764\" />\r\n    <state width=\"196\" height=\"457\" key=\"HiddenNamespacesPopup\" timestamp=\"1603465861538\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"196\" height=\"457\" key=\"HiddenNamespacesPopup/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603465861538\" />\r\n    <state x=\"336\" y=\"122\" key=\"MergeDialog\" timestamp=\"1603462890745\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"336\" y=\"122\" key=\"MergeDialog/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603462890745\" />\r\n    <state x=\"1200\" y=\"274\" key=\"SettingsEditor\" timestamp=\"1604069825412\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1200\" y=\"274\" key=\"SettingsEditor/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1604069825412\" />\r\n    <state width=\"498\" height=\"497\" key=\"SwitcherDM\" timestamp=\"1603461810240\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state width=\"498\" height=\"497\" key=\"SwitcherDM/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603461810240\" />\r\n    <state x=\"2427\" y=\"617\" key=\"VCS.ChangelistChooser\" timestamp=\"1603211657547\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"2427\" y=\"617\" key=\"VCS.ChangelistChooser/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603211657547\" />\r\n    <state x=\"1312\" y=\"420\" width=\"1058\" height=\"851\" key=\"Vcs.Push.Dialog.v2\" timestamp=\"1603651906056\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1312\" y=\"420\" width=\"1058\" height=\"851\" key=\"Vcs.Push.Dialog.v2/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603651906056\" />\r\n    <state x=\"2061\" y=\"410\" width=\"1010\" height=\"797\" key=\"VcsDiffUtil.ChangesDialog\" timestamp=\"1603650144226\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"2061\" y=\"410\" width=\"1010\" height=\"797\" key=\"VcsDiffUtil.ChangesDialog/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603650144226\" />\r\n    <state x=\"1536\" y=\"478\" key=\"chooseDestDirectoryDialog\" timestamp=\"1603461517809\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1536\" y=\"478\" key=\"chooseDestDirectoryDialog/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603461517809\" />\r\n    <state x=\"2474\" y=\"587\" width=\"316\" height=\"244\" key=\"com.intellij.database.actions.DdlActions$DeleteProvider2$1\" timestamp=\"1603633609168\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"2474\" y=\"587\" width=\"316\" height=\"244\" key=\"com.intellij.database.actions.DdlActions$DeleteProvider2$1/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603633609168\" />\r\n    <state x=\"1813\" y=\"100\" width=\"1534\" height=\"1207\" key=\"com.intellij.history.integration.ui.views.DirectoryHistoryDialog\" timestamp=\"1603210843174\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1813\" y=\"100\" width=\"1534\" height=\"1207\" key=\"com.intellij.history.integration.ui.views.DirectoryHistoryDialog/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603210843174\" />\r\n    <state x=\"2351\" y=\"465\" key=\"com.intellij.testIntegration.createTest.CreateTestDialog\" timestamp=\"1603643307203\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"2351\" y=\"465\" key=\"com.intellij.testIntegration.createTest.CreateTestDialog/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603643307203\" />\r\n    <state x=\"1234\" y=\"270\" width=\"865\" height=\"788\" key=\"dock-window-1\" timestamp=\"1603634108905\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1234\" y=\"270\" width=\"865\" height=\"788\" key=\"dock-window-1/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603634108905\" />\r\n    <state x=\"1004\" y=\"386\" width=\"948\" height=\"867\" key=\"dock-window-2\" timestamp=\"1603634450403\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1004\" y=\"386\" width=\"948\" height=\"867\" key=\"dock-window-2/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603634450403\" />\r\n    <state x=\"870\" y=\"0\" width=\"948\" height=\"530\" key=\"dock-window-3\" timestamp=\"1603634450403\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"870\" y=\"0\" width=\"948\" height=\"530\" key=\"dock-window-3/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603634450403\" />\r\n    <state x=\"860\" y=\"528\" width=\"948\" height=\"867\" key=\"dock-window-4\" timestamp=\"1603634450403\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"860\" y=\"528\" width=\"948\" height=\"867\" key=\"dock-window-4/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603634450403\" />\r\n    <state x=\"1288\" y=\"290\" width=\"946\" height=\"867\" key=\"dock-window-5\" timestamp=\"1603640694711\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1288\" y=\"290\" width=\"946\" height=\"867\" key=\"dock-window-5/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603640694711\" />\r\n    <state x=\"355\" y=\"290\" width=\"946\" height=\"867\" key=\"dock-window-6\" timestamp=\"1603640694711\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"355\" y=\"290\" width=\"946\" height=\"867\" key=\"dock-window-6/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603640694711\" />\r\n    <state x=\"1101\" y=\"219\" width=\"946\" height=\"867\" key=\"dock-window-7\" timestamp=\"1603641120133\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1101\" y=\"219\" width=\"946\" height=\"867\" key=\"dock-window-7/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603641120133\" />\r\n    <state x=\"150\" y=\"209\" width=\"946\" height=\"867\" key=\"dock-window-8\" timestamp=\"1603641120133\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"150\" y=\"209\" width=\"946\" height=\"867\" key=\"dock-window-8/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603641120133\" />\r\n    <state x=\"885\" y=\"440\" width=\"585\" height=\"801\" key=\"find.popup\" timestamp=\"1603459960819\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"885\" y=\"440\" width=\"585\" height=\"801\" key=\"find.popup/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603459960819\" />\r\n    <state x=\"1102\" y=\"320\" key=\"new project wizard\" timestamp=\"1603717409953\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1102\" y=\"320\" key=\"new project wizard/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603717409953\" />\r\n    <state x=\"2236\" y=\"334\" key=\"run.anything.popup\" timestamp=\"1603207258972\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"2236\" y=\"334\" key=\"run.anything.popup/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603207258972\" />\r\n    <state x=\"1383\" y=\"315\" width=\"672\" height=\"678\" key=\"search.everywhere.popup\" timestamp=\"1603463672058\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1383\" y=\"315\" width=\"672\" height=\"678\" key=\"search.everywhere.popup/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603463672058\" />\r\n    <state x=\"1400\" y=\"382\" key=\"spring file set editor\" timestamp=\"1603462666883\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"1400\" y=\"382\" key=\"spring file set editor/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1603462666883\" />\r\n    <state x=\"2202\" y=\"261\" key=\"vcs.ApplyPatchDifferentiatedDialog\" timestamp=\"1604069958427\">\r\n      <screen x=\"0\" y=\"0\" width=\"3440\" height=\"1400\" />\r\n    </state>\r\n    <state x=\"2202\" y=\"261\" key=\"vcs.ApplyPatchDifferentiatedDialog/0.0.3440.1400@0.0.3440.1400\" timestamp=\"1604069958427\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/workspace.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/workspace.xml	(date 1604332075044)
@@ -33,7 +33,92 @@
   </component>
   <component name="ChangeListManager">
     <list default="true" id="2307bc25-c918-4eee-8964-6639b3df5b99" name="Default Changelist" comment="hw4 is done v3">
+      <change afterPath="$PROJECT_DIR$/.gitignore" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/artifacts/topjava_war_exploded.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/artifacts/topjava_war_exploded.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_glassfish_jaxb_jaxb_runtime_2_3_1.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_glassfish_jaxb_txw2_2_3_1.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_springframework_spring_aop_5_2_9_RELEASE.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_springframework_spring_beans_5_2_9_RELEASE.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_springframework_spring_context_5_2_9_RELEASE.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_springframework_spring_core_5_2_9_RELEASE.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_springframework_spring_expression_5_2_9_RELEASE.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_springframework_spring_jcl_5_2_9_RELEASE.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_springframework_spring_jdbc_5_2_9_RELEASE.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_springframework_spring_orm_5_2_9_RELEASE.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_springframework_spring_test_5_2_9_RELEASE.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_springframework_spring_tx_5_2_9_RELEASE.xml" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/misc.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/misc.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/log/topjava.log" beforeDir="false" afterPath="$PROJECT_DIR$/log/topjava.log" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/model/User.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/model/User.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/MealRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/MealRepository.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/UserRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/UserRepository.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/datajpa/CrudMealRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/datajpa/CrudMealRepository.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/datajpa/CrudUserRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/datajpa/CrudUserRepository.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaMealRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaMealRepository.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaUserRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaUserRepository.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/jdbc/JdbcMealRepository.java" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/jdbc/JdbcUserRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/jdbc/JdbcUserRepository.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/jpa/JpaMealRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/jpa/JpaMealRepository.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/jpa/JpaUserRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/jpa/JpaUserRepository.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/service/MealService.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/service/MealService.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/service/UserService.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/service/UserService.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/util/DateTimeUtil.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/util/DateTimeUtil.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/web/MealServlet.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/web/MealServlet.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/resources/db/hsqldb.properties" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/resources/db/hsqldb.properties" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/resources/db/populateDB.sql" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/resources/db/populateDB.sql" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/resources/db/postgres.properties" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/resources/db/postgres.properties" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/resources/spring/spring-app.xml" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/resources/spring/spring-app.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/resources/spring/spring-cache.xml" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/resources/spring/spring-cache.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/resources/spring/spring-db.xml" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/resources/spring/spring-db.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/test/java/ru/javawebinar/topjava/UserTestData.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/test/java/ru/javawebinar/topjava/UserTestData.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/test/java/ru/javawebinar/topjava/service/MealServiceTest.java" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/test/java/ru/javawebinar/topjava/service/UserServiceTest.java" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/test/resources/logback-test.xml" beforeDir="false" afterPath="$PROJECT_DIR$/src/test/resources/logback-test.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/db/hsqldb.properties" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/db/hsqldb.properties" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/db/postgres.properties" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/db/postgres.properties" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/logback.xml" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/logback.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/model/AbstractBaseEntity.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/model/AbstractBaseEntity.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/model/AbstractNamedEntity.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/model/AbstractNamedEntity.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/model/Meal.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/model/Meal.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/model/Role.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/model/Role.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/model/User.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/model/User.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/repository/MealRepository.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/repository/MealRepository.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/repository/UserRepository.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/repository/UserRepository.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/repository/jdbc/JdbcMealRepository.class" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/repository/jdbc/JdbcUserRepository.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/repository/jdbc/JdbcUserRepository.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/repository/jpa/JpaMealRepository.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/repository/jpa/JpaMealRepository.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/repository/jpa/JpaUserRepository.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/repository/jpa/JpaUserRepository.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/service/MealService.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/service/MealService.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/service/UserService.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/service/UserService.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/to/MealTo.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/to/MealTo.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/util/DateTimeUtil.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/util/DateTimeUtil.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/util/MealsUtil.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/util/MealsUtil.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/util/Util.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/util/Util.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/util/ValidationUtil.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/util/ValidationUtil.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/util/exception/NotFoundException.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/util/exception/NotFoundException.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/MealServlet.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/MealServlet.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/SecurityUtil.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/SecurityUtil.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/UserServlet.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/UserServlet.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/meal/MealRestController.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/meal/MealRestController.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/user/AbstractUserController.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/user/AbstractUserController.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/user/AdminRestController.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/user/AdminRestController.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/user/ProfileRestController.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/ru/javawebinar/topjava/web/user/ProfileRestController.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/spring/spring-app.xml" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/spring/spring-app.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/classes/spring/spring-db.xml" beforeDir="false" afterPath="$PROJECT_DIR$/target/classes/spring/spring-db.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/logback-test.xml" beforeDir="false" afterPath="$PROJECT_DIR$/target/test-classes/logback-test.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/MealTestData.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/MealTestData.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/SpringMain.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/SpringMain.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/TestMatcher.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/TestMatcher.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/UserTestData.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/UserTestData.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/repository/inmemory/InMemoryBaseRepository.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/repository/inmemory/InMemoryBaseRepository.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/repository/inmemory/InMemoryMealRepository.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/repository/inmemory/InMemoryMealRepository.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/repository/inmemory/InMemoryUserRepository.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/repository/inmemory/InMemoryUserRepository.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/service/MealServiceTest.class" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/service/UserServiceTest.class" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/web/user/InMemoryAdminRestControllerSpringTest.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/web/user/InMemoryAdminRestControllerSpringTest.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/web/user/InMemoryAdminRestControllerTest.class" beforeDir="false" afterPath="$PROJECT_DIR$/target/test-classes/ru/javawebinar/topjava/web/user/InMemoryAdminRestControllerTest.class" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/topjava.iml" beforeDir="false" afterPath="$PROJECT_DIR$/topjava.iml" afterDir="false" />
     </list>
     <list id="7c92701b-6be9-4364-92c1-3990de641ecd" name="3 13 test UserService" comment="" />
     <list id="77f1ca77-b097-49c4-aa0b-1b7d06d19e66" name="3 14 test logging" comment="" />
@@ -51,6 +136,12 @@
     <list id="664a0acd-cd2b-46c6-9332-f14b6d7d734d" name="4 9 add named query and transaction" comment="" />
     <list id="0145e199-8b9a-412b-9b01-7f4f6ced5318" name="5 0 fix" comment="" />
     <list id="a57719a2-95d3-413a-b32b-48c5d9828804" name="5 1 jdk 15" comment="" />
+    <list id="28deb8e0-47f2-4233-b868-a50c7146450d" name="5 3 fix hibernate issue" comment="" />
+    <list id="6c3f62c2-168a-4b87-ad45-5fce1cf625cc" name="5 4 HW4 optional" comment="" />
+    <list id="f1def6f2-f4bb-44b6-820e-b1637614b393" name="5 5 profiles connection pool" comment="" />
+    <list id="53db6e35-686c-4d97-970c-c360eb083419" name="5 6 profile resolver" comment="" />
+    <list id="095564b8-a4f7-4c66-86c4-36ef642ea54c" name="5 7 spring data jpa" comment="" />
+    <list id="5e1c7d16-f91c-4bc2-a409-7d69e3e9d242" name="5 8 spring cache" comment="" />
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
     <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
@@ -96,6 +187,12 @@
         <option name="mavenHome" value="C:\Program Files\JetBrains\IntelliJ IDEA 2020.2.3\plugins\maven\lib\maven3" />
       </MavenGeneralSettings>
     </option>
+    <option name="enabledProfiles">
+      <list>
+        <option value="postgres" />
+        <option value="hsqldb" />
+      </list>
+    </option>
   </component>
   <component name="ProjectId" id="1j6NceOhxCYeSh8BcnAHXxvLMFZ" />
   <component name="ProjectViewState">
@@ -105,6 +202,7 @@
   <component name="PropertiesComponent">
     <property name="DatabaseDriversLRU" value="hsqldb&#10;postgresql&#10;h2" />
     <property name="RunOnceActivity.OpenProjectViewOnStart" value="true" />
+    <property name="SHARE_PROJECT_CONFIGURATION_FILES" value="true" />
     <property name="TODO_SCOPE" value="All Places" />
     <property name="WebServerToolWindowFactoryState" value="false" />
     <property name="aspect.path.notification.shown" value="true" />
@@ -117,13 +215,18 @@
     <property name="project.structure.proportion" value="0.15" />
     <property name="project.structure.side.proportion" value="0.2" />
     <property name="run.code.analysis.last.selected.profile" value="pProject Default" />
-    <property name="settings.editor.selected.configurable" value="Errors" />
+    <property name="settings.editor.selected.configurable" value="spring" />
   </component>
   <component name="RecentsManager">
     <key name="CreateTestDialog.RecentsKey">
+      <recent name="ru.javawebinar.topjava.repository.datajpa" />
+      <recent name="ru.javawebinar.topjava.repository" />
       <recent name="ru.javawebinar.topjava.repository.jpa" />
       <recent name="ru.javawebinar.topjava.service" />
     </key>
+    <key name="CreateTestDialog.Recents.Supers">
+      <recent name="" />
+    </key>
     <key name="MoveClassesOrPackagesDialog.RECENTS_KEY">
       <recent name="ru.javawebinar.topjava" />
       <recent name="ru.javawebinar.topjava.web.user" />
@@ -132,15 +235,15 @@
     <key name="CopyFile.RECENT_KEYS">
       <recent name="C:\dev\projects\topjava" />
     </key>
-    <key name="CreateTestDialog.Recents.Supers">
-      <recent name="" />
+    <key name="CopyClassDialog.RECENTS_KEY">
+      <recent name="ru.javawebinar.topjava.repository.jdbc" />
     </key>
     <key name="MoveFile.RECENT_KEYS">
       <recent name="C:\dev\projects\topjava\patch" />
       <recent name="C:\dev\projects\topjava" />
     </key>
   </component>
-  <component name="RunManager" selected="JUnit.MealServiceTest.get">
+  <component name="RunManager" selected="JUnit.UserJpaDataServiceTest.create">
     <configuration default="true" type="ArquillianJUnit" factoryName="" nameIsGenerated="true">
       <option name="arquillianRunConfiguration">
         <value>
@@ -152,72 +255,77 @@
         <option name="Make" enabled="true" />
       </method>
     </configuration>
-    <configuration name="populateDB.sql" type="DatabaseScript" editBeforeRun="true" temporary="true" nameIsGenerated="true">
-      <script-file value="$PROJECT_DIR$/src/main/resources/db/populateDB.sql" />
-      <script-mode>FILE</script-mode>
-      <data-source id="da64247f-0f0c-49b2-8afd-eea5caa551e8" namespace="database/&quot;topjava&quot;" />
-      <method v="2" />
+    <configuration name="UserJdbcServiceTest" type="JUnit" factoryName="JUnit" temporary="true" nameIsGenerated="true">
+      <module name="topjava" />
+      <extension name="coverage">
+        <pattern>
+          <option name="PATTERN" value="ru.javawebinar.topjava.service.usertest.*" />
+          <option name="ENABLED" value="true" />
+        </pattern>
+      </extension>
+      <option name="PACKAGE_NAME" value="ru.javawebinar.topjava.service.usertest" />
+      <option name="MAIN_CLASS_NAME" value="ru.javawebinar.topjava.service.usertest.UserJdbcServiceTest" />
+      <option name="TEST_OBJECT" value="class" />
+      <method v="2">
+        <option name="Make" enabled="true" />
+      </method>
     </configuration>
-    <configuration name="MealServiceTest.create" type="JUnit" factoryName="JUnit" temporary="true" nameIsGenerated="true">
+    <configuration name="UserJpaDataServiceTest" type="JUnit" factoryName="JUnit" temporary="true" nameIsGenerated="true">
       <module name="topjava" />
       <extension name="coverage">
         <pattern>
-          <option name="PATTERN" value="ru.javawebinar.topjava.service.*" />
+          <option name="PATTERN" value="ru.javawebinar.topjava.service.usertest.*" />
           <option name="ENABLED" value="true" />
         </pattern>
       </extension>
-      <option name="PACKAGE_NAME" value="ru.javawebinar.topjava.service" />
-      <option name="MAIN_CLASS_NAME" value="ru.javawebinar.topjava.service.MealServiceTest" />
-      <option name="METHOD_NAME" value="create" />
-      <option name="TEST_OBJECT" value="method" />
+      <option name="PACKAGE_NAME" value="ru.javawebinar.topjava.service.usertest" />
+      <option name="MAIN_CLASS_NAME" value="ru.javawebinar.topjava.service.usertest.UserJpaDataServiceTest" />
+      <option name="TEST_OBJECT" value="class" />
       <method v="2">
         <option name="Make" enabled="true" />
       </method>
     </configuration>
-    <configuration name="MealServiceTest.deleteNotFount" type="JUnit" factoryName="JUnit" temporary="true" nameIsGenerated="true">
+    <configuration name="UserJpaDataServiceTest.create" type="JUnit" factoryName="JUnit" temporary="true" nameIsGenerated="true">
       <module name="topjava" />
       <extension name="coverage">
         <pattern>
-          <option name="PATTERN" value="ru.javawebinar.topjava.service.*" />
+          <option name="PATTERN" value="ru.javawebinar.topjava.service.usertest.*" />
           <option name="ENABLED" value="true" />
         </pattern>
       </extension>
-      <option name="PACKAGE_NAME" value="ru.javawebinar.topjava.service" />
-      <option name="MAIN_CLASS_NAME" value="ru.javawebinar.topjava.service.MealServiceTest" />
-      <option name="METHOD_NAME" value="deleteNotFount" />
+      <option name="PACKAGE_NAME" value="ru.javawebinar.topjava.service.usertest" />
+      <option name="MAIN_CLASS_NAME" value="ru.javawebinar.topjava.service.usertest.UserJpaDataServiceTest" />
+      <option name="METHOD_NAME" value="create" />
       <option name="TEST_OBJECT" value="method" />
       <method v="2">
         <option name="Make" enabled="true" />
       </method>
     </configuration>
-    <configuration name="MealServiceTest.deleteNotOwn" type="JUnit" factoryName="JUnit" temporary="true" nameIsGenerated="true">
+    <configuration name="UserJpaServiceTest" type="JUnit" factoryName="JUnit" temporary="true" nameIsGenerated="true">
       <module name="topjava" />
       <extension name="coverage">
         <pattern>
-          <option name="PATTERN" value="ru.javawebinar.topjava.service.*" />
+          <option name="PATTERN" value="ru.javawebinar.topjava.service.usertest.*" />
           <option name="ENABLED" value="true" />
         </pattern>
       </extension>
-      <option name="PACKAGE_NAME" value="ru.javawebinar.topjava.service" />
-      <option name="MAIN_CLASS_NAME" value="ru.javawebinar.topjava.service.MealServiceTest" />
-      <option name="METHOD_NAME" value="deleteNotOwn" />
-      <option name="TEST_OBJECT" value="method" />
+      <option name="PACKAGE_NAME" value="ru.javawebinar.topjava.service.usertest" />
+      <option name="MAIN_CLASS_NAME" value="ru.javawebinar.topjava.service.usertest.UserJpaServiceTest" />
+      <option name="TEST_OBJECT" value="class" />
       <method v="2">
         <option name="Make" enabled="true" />
       </method>
     </configuration>
-    <configuration name="MealServiceTest.get" type="JUnit" factoryName="JUnit" temporary="true" nameIsGenerated="true">
+    <configuration name="ru.javawebinar.topjava.service.usertest in topjava" type="JUnit" factoryName="JUnit" temporary="true" nameIsGenerated="true">
       <module name="topjava" />
       <extension name="coverage">
         <pattern>
-          <option name="PATTERN" value="ru.javawebinar.topjava.service.*" />
+          <option name="PATTERN" value="ru.javawebinar.topjava.service.usertest.*" />
           <option name="ENABLED" value="true" />
         </pattern>
       </extension>
-      <option name="PACKAGE_NAME" value="ru.javawebinar.topjava.service" />
-      <option name="MAIN_CLASS_NAME" value="ru.javawebinar.topjava.service.MealServiceTest" />
-      <option name="METHOD_NAME" value="get" />
-      <option name="TEST_OBJECT" value="method" />
+      <option name="PACKAGE_NAME" value="ru.javawebinar.topjava.service.usertest" />
+      <option name="TEST_OBJECT" value="package" />
       <method v="2">
         <option name="Make" enabled="true" />
       </method>
@@ -297,19 +405,19 @@
     </configuration>
     <list>
       <item itemvalue="Tomcat Server.Tomcat 9.0.31" />
-      <item itemvalue="Database Script.populateDB.sql" />
-      <item itemvalue="JUnit.MealServiceTest.get" />
-      <item itemvalue="JUnit.MealServiceTest.deleteNotOwn" />
-      <item itemvalue="JUnit.MealServiceTest.deleteNotFount" />
-      <item itemvalue="JUnit.MealServiceTest.create" />
+      <item itemvalue="JUnit.ru.javawebinar.topjava.service.usertest in topjava" />
+      <item itemvalue="JUnit.UserJpaDataServiceTest.create" />
+      <item itemvalue="JUnit.UserJpaDataServiceTest" />
+      <item itemvalue="JUnit.UserJdbcServiceTest" />
+      <item itemvalue="JUnit.UserJpaServiceTest" />
     </list>
     <recent_temporary>
       <list>
-        <item itemvalue="JUnit.MealServiceTest.create" />
-        <item itemvalue="JUnit.MealServiceTest.deleteNotFount" />
-        <item itemvalue="JUnit.MealServiceTest.deleteNotOwn" />
-        <item itemvalue="JUnit.MealServiceTest.get" />
-        <item itemvalue="Database Script.populateDB.sql" />
+        <item itemvalue="JUnit.UserJpaDataServiceTest.create" />
+        <item itemvalue="JUnit.UserJdbcServiceTest" />
+        <item itemvalue="JUnit.UserJpaServiceTest" />
+        <item itemvalue="JUnit.UserJpaDataServiceTest" />
+        <item itemvalue="JUnit.UserJpaDataServiceTest.create" />
       </list>
     </recent_temporary>
   </component>
@@ -366,12 +474,29 @@
       <option name="project" value="LOCAL" />
       <updated>1603651866797</updated>
     </task>
-    <option name="localTasksCounter" value="4" />
+    <task id="LOCAL-00004" summary="hw5 with optional is done">
+      <created>1604330251147</created>
+      <option name="number" value="00004" />
+      <option name="presentableId" value="LOCAL-00004" />
+      <option name="project" value="LOCAL" />
+      <updated>1604330251147</updated>
+    </task>
+    <option name="localTasksCounter" value="5" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
     <option name="version" value="3" />
   </component>
+  <component name="Vcs.Log.History.Properties">
+    <option name="COLUMN_ORDER">
+      <list>
+        <option value="0" />
+        <option value="2" />
+        <option value="3" />
+        <option value="1" />
+      </list>
+    </option>
+  </component>
   <component name="Vcs.Log.Tabs.Properties">
     <option name="TAB_STATES">
       <map>
@@ -388,7 +513,8 @@
     <MESSAGE value="hw3 is done" />
     <MESSAGE value="hw4 is done" />
     <MESSAGE value="hw4 is done v3" />
-    <option name="LAST_COMMIT_MESSAGE" value="hw4 is done v3" />
+    <MESSAGE value="hw5 with optional is done" />
+    <option name="LAST_COMMIT_MESSAGE" value="hw5 with optional is done" />
   </component>
   <component name="WindowStateProjectService">
     <state x="1619" y="591" key="#Assign_Data_Sources" timestamp="1603468518022">
@@ -403,10 +529,10 @@
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
     <state x="1402" y="342" width="1092" height="724" key="#com.intellij.execution.impl.EditConfigurationsDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1603894927450" />
-    <state x="2385" y="419" key="#com.intellij.ide.util.MemberChooser" timestamp="1603205894226">
+    <state x="2385" y="419" key="#com.intellij.ide.util.MemberChooser" timestamp="1604327817405">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state x="2385" y="419" key="#com.intellij.ide.util.MemberChooser/0.0.3440.1400@0.0.3440.1400" timestamp="1603205894226" />
+    <state x="2385" y="419" key="#com.intellij.ide.util.MemberChooser/0.0.3440.1400@0.0.3440.1400" timestamp="1604327817405" />
     <state x="1524" y="606" key="#com.intellij.javaee.module.view.common.J2EE.J2EEDeploymentDescriptorLocationPanel.changeDDPath" timestamp="1603458244013">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
@@ -415,10 +541,14 @@
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
     <state x="1397" y="624" key="#com.intellij.refactoring.move.MoveHandler.SelectRefactoringDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1603462717229" />
-    <state x="2586" y="622" width="608" height="270" key="#com.intellij.refactoring.move.moveClassesOrPackages.MoveClassesOrPackagesDialog.classes" timestamp="1603464008533">
+    <state x="2586" y="622" width="608" height="270" key="#com.intellij.refactoring.move.moveClassesOrPackages.MoveClassesOrPackagesDialog.classes" timestamp="1604306166736">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state x="2586" y="622" width="608" height="270" key="#com.intellij.refactoring.move.moveClassesOrPackages.MoveClassesOrPackagesDialog.classes/0.0.3440.1400@0.0.3440.1400" timestamp="1603464008533" />
+    <state x="2586" y="622" width="608" height="270" key="#com.intellij.refactoring.move.moveClassesOrPackages.MoveClassesOrPackagesDialog.classes/0.0.3440.1400@0.0.3440.1400" timestamp="1604306166736" />
+    <state x="1106" y="480" key="#com.intellij.refactoring.rename.AutomaticRenamingDialog" timestamp="1604302391606">
+      <screen x="0" y="0" width="3440" height="1400" />
+    </state>
+    <state x="1106" y="480" key="#com.intellij.refactoring.rename.AutomaticRenamingDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1604302391606" />
     <state x="2310" y="450" key="#com.intellij.refactoring.safeDelete.UnsafeUsagesDialog" timestamp="1603202622336">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
@@ -435,10 +565,10 @@
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
     <state width="254" height="195" key="DatabaseViewActions_Filter/0.0.3440.1400@0.0.3440.1400" timestamp="1603206485722" />
-    <state x="672" y="72" width="2360" height="1207" key="DiffContextDialog" timestamp="1604070243627">
+    <state x="672" y="72" width="2360" height="1207" key="DiffContextDialog" timestamp="1604331703257">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state x="672" y="72" width="2360" height="1207" key="DiffContextDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1604070243627" />
+    <state x="672" y="72" width="2360" height="1207" key="DiffContextDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1604331703257" />
     <state x="1500" y="455" key="FileChooserDialogImpl" timestamp="1604069808185">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
@@ -447,54 +577,54 @@
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
     <state x="2447" y="604" key="Git.Rebase.Log.Action.NewCommitMessage.Dialog/0.0.3440.1400@0.0.3440.1400" timestamp="1603646263670" />
-    <state width="2873" height="491" key="GridCell.Tab.0.bottom" timestamp="1603895719171">
+    <state width="1778" height="377" key="GridCell.Tab.0.bottom" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="2873" height="491" key="GridCell.Tab.0.bottom/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719171" />
-    <state width="2873" height="491" key="GridCell.Tab.0.center" timestamp="1603895719171">
+    <state width="1778" height="377" key="GridCell.Tab.0.bottom/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
+    <state width="1778" height="377" key="GridCell.Tab.0.center" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="2873" height="491" key="GridCell.Tab.0.center/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719171" />
-    <state width="2873" height="491" key="GridCell.Tab.0.left" timestamp="1603895719171">
+    <state width="1778" height="377" key="GridCell.Tab.0.center/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
+    <state width="1778" height="377" key="GridCell.Tab.0.left" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="2873" height="491" key="GridCell.Tab.0.left/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719171" />
-    <state width="2873" height="491" key="GridCell.Tab.0.right" timestamp="1603895719171">
+    <state width="1778" height="377" key="GridCell.Tab.0.left/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
+    <state width="1778" height="377" key="GridCell.Tab.0.right" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="2873" height="491" key="GridCell.Tab.0.right/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719171" />
-    <state width="2873" height="491" key="GridCell.Tab.1.bottom" timestamp="1603895719171">
+    <state width="1778" height="377" key="GridCell.Tab.0.right/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
+    <state width="1778" height="377" key="GridCell.Tab.1.bottom" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="2873" height="491" key="GridCell.Tab.1.bottom/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719171" />
-    <state width="2873" height="491" key="GridCell.Tab.1.center" timestamp="1603895719171">
+    <state width="1778" height="377" key="GridCell.Tab.1.bottom/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
+    <state width="1778" height="377" key="GridCell.Tab.1.center" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="2873" height="491" key="GridCell.Tab.1.center/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719171" />
-    <state width="2873" height="491" key="GridCell.Tab.1.left" timestamp="1603895719171">
+    <state width="1778" height="377" key="GridCell.Tab.1.center/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
+    <state width="1778" height="377" key="GridCell.Tab.1.left" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="2873" height="491" key="GridCell.Tab.1.left/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719171" />
-    <state width="2873" height="491" key="GridCell.Tab.1.right" timestamp="1603895719171">
+    <state width="1778" height="377" key="GridCell.Tab.1.left/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
+    <state width="1778" height="377" key="GridCell.Tab.1.right" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="2873" height="491" key="GridCell.Tab.1.right/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719171" />
-    <state width="1117" height="491" key="GridCell.Tab.2.bottom" timestamp="1603895719164">
+    <state width="1778" height="377" key="GridCell.Tab.1.right/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
+    <state width="1778" height="377" key="GridCell.Tab.2.bottom" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="1117" height="491" key="GridCell.Tab.2.bottom/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719164" />
-    <state width="1117" height="491" key="GridCell.Tab.2.center" timestamp="1603895719164">
+    <state width="1778" height="377" key="GridCell.Tab.2.bottom/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
+    <state width="1778" height="377" key="GridCell.Tab.2.center" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="1117" height="491" key="GridCell.Tab.2.center/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719164" />
-    <state width="1117" height="491" key="GridCell.Tab.2.left" timestamp="1603895719164">
+    <state width="1778" height="377" key="GridCell.Tab.2.center/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
+    <state width="1778" height="377" key="GridCell.Tab.2.left" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="1117" height="491" key="GridCell.Tab.2.left/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719164" />
-    <state width="1117" height="491" key="GridCell.Tab.2.right" timestamp="1603895719164">
+    <state width="1778" height="377" key="GridCell.Tab.2.left/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
+    <state width="1778" height="377" key="GridCell.Tab.2.right" timestamp="1604330728630">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="1117" height="491" key="GridCell.Tab.2.right/0.0.3440.1400@0.0.3440.1400" timestamp="1603895719164" />
+    <state width="1778" height="377" key="GridCell.Tab.2.right/0.0.3440.1400@0.0.3440.1400" timestamp="1604330728630" />
     <state width="2357" height="397" key="GridCell.Tab.3.bottom" timestamp="1603467393233">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
@@ -551,26 +681,30 @@
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
     <state x="336" y="122" key="MergeDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1603462890745" />
-    <state x="1200" y="274" key="SettingsEditor" timestamp="1604069825412">
+    <state x="1200" y="274" key="SettingsEditor" timestamp="1604256507162">
+      <screen x="0" y="0" width="3440" height="1400" />
+    </state>
+    <state x="1200" y="274" key="SettingsEditor/0.0.3440.1400@0.0.3440.1400" timestamp="1604256507162" />
+    <state x="1090" y="448" width="570" height="524" key="StructurePopup" timestamp="1604313178404">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state x="1200" y="274" key="SettingsEditor/0.0.3440.1400@0.0.3440.1400" timestamp="1604069825412" />
-    <state width="498" height="497" key="SwitcherDM" timestamp="1603461810240">
+    <state x="1090" y="448" width="570" height="524" key="StructurePopup/0.0.3440.1400@0.0.3440.1400" timestamp="1604313178404" />
+    <state width="498" height="537" key="SwitcherDM" timestamp="1604328903607">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state width="498" height="497" key="SwitcherDM/0.0.3440.1400@0.0.3440.1400" timestamp="1603461810240" />
+    <state width="498" height="537" key="SwitcherDM/0.0.3440.1400@0.0.3440.1400" timestamp="1604328903607" />
     <state x="2427" y="617" key="VCS.ChangelistChooser" timestamp="1603211657547">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
     <state x="2427" y="617" key="VCS.ChangelistChooser/0.0.3440.1400@0.0.3440.1400" timestamp="1603211657547" />
-    <state x="1312" y="420" width="1058" height="851" key="Vcs.Push.Dialog.v2" timestamp="1603651906056">
+    <state x="1202" y="225" width="1058" height="851" key="Vcs.Push.Dialog.v2" timestamp="1604330557939">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state x="1312" y="420" width="1058" height="851" key="Vcs.Push.Dialog.v2/0.0.3440.1400@0.0.3440.1400" timestamp="1603651906056" />
-    <state x="2061" y="410" width="1010" height="797" key="VcsDiffUtil.ChangesDialog" timestamp="1603650144226">
+    <state x="1202" y="225" width="1058" height="851" key="Vcs.Push.Dialog.v2/0.0.3440.1400@0.0.3440.1400" timestamp="1604330557939" />
+    <state x="2061" y="410" width="1010" height="797" key="VcsDiffUtil.ChangesDialog" timestamp="1604331946458">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state x="2061" y="410" width="1010" height="797" key="VcsDiffUtil.ChangesDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1603650144226" />
+    <state x="2061" y="410" width="1010" height="797" key="VcsDiffUtil.ChangesDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1604331946458" />
     <state x="1536" y="478" key="chooseDestDirectoryDialog" timestamp="1603461517809">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
@@ -583,10 +717,10 @@
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
     <state x="1813" y="100" width="1534" height="1207" key="com.intellij.history.integration.ui.views.DirectoryHistoryDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1603210843174" />
-    <state x="2351" y="465" key="com.intellij.testIntegration.createTest.CreateTestDialog" timestamp="1603643307203">
+    <state x="2351" y="465" key="com.intellij.testIntegration.createTest.CreateTestDialog" timestamp="1604327285695">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state x="2351" y="465" key="com.intellij.testIntegration.createTest.CreateTestDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1603643307203" />
+    <state x="2351" y="465" key="com.intellij.testIntegration.createTest.CreateTestDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1604327285695" />
     <state x="1234" y="270" width="865" height="788" key="dock-window-1" timestamp="1603634108905">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
@@ -627,21 +761,52 @@
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
     <state x="1102" y="320" key="new project wizard/0.0.3440.1400@0.0.3440.1400" timestamp="1603717409953" />
-    <state x="2236" y="334" key="run.anything.popup" timestamp="1603207258972">
+    <state x="2236" y="334" key="run.anything.popup" timestamp="1604248885316">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state x="2236" y="334" key="run.anything.popup/0.0.3440.1400@0.0.3440.1400" timestamp="1603207258972" />
-    <state x="1383" y="315" width="672" height="678" key="search.everywhere.popup" timestamp="1603463672058">
+    <state x="2236" y="334" key="run.anything.popup/0.0.3440.1400@0.0.3440.1400" timestamp="1604248885316" />
+    <state x="1383" y="315" width="672" height="678" key="search.everywhere.popup" timestamp="1604331584197">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state x="1383" y="315" width="672" height="678" key="search.everywhere.popup/0.0.3440.1400@0.0.3440.1400" timestamp="1603463672058" />
+    <state x="1383" y="315" width="672" height="678" key="search.everywhere.popup/0.0.3440.1400@0.0.3440.1400" timestamp="1604331584197" />
     <state x="1400" y="382" key="spring file set editor" timestamp="1603462666883">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
     <state x="1400" y="382" key="spring file set editor/0.0.3440.1400@0.0.3440.1400" timestamp="1603462666883" />
-    <state x="2202" y="261" key="vcs.ApplyPatchDifferentiatedDialog" timestamp="1604069958427">
+    <state x="2202" y="261" key="vcs.ApplyPatchDifferentiatedDialog" timestamp="1604242284222">
       <screen x="0" y="0" width="3440" height="1400" />
     </state>
-    <state x="2202" y="261" key="vcs.ApplyPatchDifferentiatedDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1604069958427" />
+    <state x="2202" y="261" key="vcs.ApplyPatchDifferentiatedDialog/0.0.3440.1400@0.0.3440.1400" timestamp="1604242284222" />
+  </component>
+  <component name="XDebuggerManager">
+    <breakpoint-manager>
+      <breakpoints>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaMealRepository.java</url>
+          <line>31</line>
+          <option name="timeStamp" value="20" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/test/java/ru/javawebinar/topjava/TestMatcher.java</url>
+          <line>22</line>
+          <option name="timeStamp" value="25" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/test/java/ru/javawebinar/topjava/service/mealtest/MealDataJpaServiceTest.java</url>
+          <line>17</line>
+          <option name="timeStamp" value="27" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaUserRepository.java</url>
+          <line>46</line>
+          <option name="timeStamp" value="28" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaUserRepository.java</url>
+          <line>31</line>
+          <option name="timeStamp" value="30" />
+        </line-breakpoint>
+      </breakpoints>
+    </breakpoint-manager>
   </component>
 </project>
\ No newline at end of file
Index: src/main/resources/spring/spring-db.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n       xmlns:p=\"http://www.springframework.org/schema/p\"\r\n       xmlns:context=\"http://www.springframework.org/schema/context\"\r\n       xmlns:jdbc=\"http://www.springframework.org/schema/jdbc\"\r\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\r\n       xmlns:jpa=\"http://www.springframework.org/schema/data/jpa\"\r\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\r\n       http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd\r\n       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\r\n       http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\">\r\n\r\n<!--    <context:component-scan base-package=\"ru.javawebinar.**.repository.jpa\"/>-->\r\n\r\n    <context:component-scan base-package=\"ru.javawebinar.**.repository.datajpa\"/>\r\n    <jpa:repositories base-package=\"ru.javawebinar.**.repository.datajpa\"/>\r\n\r\n    <jdbc:initialize-database data-source=\"dataSource\" enabled=\"${database.init}\">\r\n        <jdbc:script location=\"${jdbc.initLocation}\"/>\r\n        <jdbc:script encoding=\"utf-8\" location=\"classpath:db/populateDB.sql\"/>\r\n    </jdbc:initialize-database>\r\n\r\n    <bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"\r\n          p:dataSource-ref=\"dataSource\"\r\n          p:packagesToScan=\"ru.javawebinar.**.model\">\r\n        <!--p:persistenceUnitName=\"persistenceUnit\">-->\r\n\r\n        <property name=\"jpaPropertyMap\">\r\n            <map>\r\n                <entry key=\"#{T(org.hibernate.cfg.AvailableSettings).FORMAT_SQL}\" value=\"${hibernate.format_sql}\"/>\r\n                <entry key=\"#{T(org.hibernate.cfg.AvailableSettings).USE_SQL_COMMENTS}\" value=\"${hibernate.use_sql_comments}\"/>\r\n                <entry key=\"#{T(org.hibernate.cfg.AvailableSettings).JPA_PROXY_COMPLIANCE}\" value=\"false\"/>\r\n                <!--<entry key=\"#{T(org.hibernate.cfg.AvailableSettings).HBM2DDL_AUTO}\" value=\"${hibernate.hbm2ddl.auto}\"/>-->\r\n            </map>\r\n        </property>\r\n\r\n        <property name=\"jpaVendorAdapter\">\r\n            <bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"\r\n                  p:showSql=\"${jpa.showSql}\">\r\n            </bean>\r\n        </property>\r\n    </bean>\r\n\r\n    <tx:annotation-driven/>\r\n\r\n    <!-- Transaction manager for a single JPA EntityManagerFactory (alternative to JTA) -->\r\n    <bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"\r\n          p:entityManagerFactory-ref=\"entityManagerFactory\"/>\r\n\r\n    <!--\r\n        <context:component-scan base-package=\"ru.javawebinar.**.repository.jdbc\"/>\r\n        <bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\">\r\n            <constructor-arg ref=\"dataSource\"/>\r\n        </bean>\r\n\r\n        <bean id=\"namedJdbcTemplate\" class=\"org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate\">\r\n            <constructor-arg ref=\"jdbcTemplate\"/>\r\n        </bean>\r\n    -->\r\n\r\n    <beans profile=\"hsqldb\">\r\n        <context:property-placeholder location=\"classpath:db/hsqldb.properties\" system-properties-mode=\"OVERRIDE\"/>\r\n\r\n        <!--no pooling-->\r\n        <bean id=\"dataSource\"\r\n              class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"\r\n              p:driverClassName=\"org.hsqldb.jdbcDriver\"\r\n              p:url=\"${database.url}\"\r\n              p:username=\"${database.username}\"\r\n              p:password=\"${database.password}\"/>\r\n    </beans>\r\n\r\n    <beans profile=\"postgres\">\r\n        <!--\r\n            For postgres driver logging\r\n            It uses java.util.logging and logged via jul-to-slf4j bridge\r\n            https://stackoverflow.com/a/27296470/548473\r\n        -->\r\n        <bean class=\"org.springframework.beans.factory.config.MethodInvokingBean\">\r\n            <property name=\"staticMethod\" value=\"org.slf4j.bridge.SLF4JBridgeHandler.install\"/>\r\n        </bean>\r\n\r\n        <context:property-placeholder location=\"classpath:db/postgres.properties\" system-properties-mode=\"OVERRIDE\"/>\r\n\r\n        <bean id=\"dataSource\"\r\n              class=\"org.apache.tomcat.jdbc.pool.DataSource\"\r\n              p:driverClassName=\"org.postgresql.Driver\"\r\n              p:url=\"${database.url}\"\r\n              p:username=\"${database.username}\"\r\n              p:password=\"${database.password}\"/>\r\n    </beans>\r\n\r\n    <beans profile=\"jdbc\">\r\n    </beans>\r\n    <beans profile=\"jpa\">\r\n    </beans>\r\n    <beans profile=\"datajpa\">\r\n    </beans>\r\n</beans>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/resources/spring/spring-db.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/resources/spring/spring-db.xml	(date 1604330164083)
@@ -11,53 +11,12 @@
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">
 
-<!--    <context:component-scan base-package="ru.javawebinar.**.repository.jpa"/>-->
-
-    <context:component-scan base-package="ru.javawebinar.**.repository.datajpa"/>
-    <jpa:repositories base-package="ru.javawebinar.**.repository.datajpa"/>
 
     <jdbc:initialize-database data-source="dataSource" enabled="${database.init}">
         <jdbc:script location="${jdbc.initLocation}"/>
         <jdbc:script encoding="utf-8" location="classpath:db/populateDB.sql"/>
     </jdbc:initialize-database>
 
-    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
-          p:dataSource-ref="dataSource"
-          p:packagesToScan="ru.javawebinar.**.model">
-        <!--p:persistenceUnitName="persistenceUnit">-->
-
-        <property name="jpaPropertyMap">
-            <map>
-                <entry key="#{T(org.hibernate.cfg.AvailableSettings).FORMAT_SQL}" value="${hibernate.format_sql}"/>
-                <entry key="#{T(org.hibernate.cfg.AvailableSettings).USE_SQL_COMMENTS}" value="${hibernate.use_sql_comments}"/>
-                <entry key="#{T(org.hibernate.cfg.AvailableSettings).JPA_PROXY_COMPLIANCE}" value="false"/>
-                <!--<entry key="#{T(org.hibernate.cfg.AvailableSettings).HBM2DDL_AUTO}" value="${hibernate.hbm2ddl.auto}"/>-->
-            </map>
-        </property>
-
-        <property name="jpaVendorAdapter">
-            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
-                  p:showSql="${jpa.showSql}">
-            </bean>
-        </property>
-    </bean>
-
-    <tx:annotation-driven/>
-
-    <!-- Transaction manager for a single JPA EntityManagerFactory (alternative to JTA) -->
-    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
-          p:entityManagerFactory-ref="entityManagerFactory"/>
-
-    <!--
-        <context:component-scan base-package="ru.javawebinar.**.repository.jdbc"/>
-        <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
-            <constructor-arg ref="dataSource"/>
-        </bean>
-
-        <bean id="namedJdbcTemplate" class="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate">
-            <constructor-arg ref="jdbcTemplate"/>
-        </bean>
-    -->
 
     <beans profile="hsqldb">
         <context:property-placeholder location="classpath:db/hsqldb.properties" system-properties-mode="OVERRIDE"/>
@@ -72,6 +31,7 @@
     </beans>
 
     <beans profile="postgres">
+        <context:property-placeholder location="classpath:db/postgres.properties" system-properties-mode="OVERRIDE"/>
         <!--
             For postgres driver logging
             It uses java.util.logging and logged via jul-to-slf4j bridge
@@ -81,8 +41,6 @@
             <property name="staticMethod" value="org.slf4j.bridge.SLF4JBridgeHandler.install"/>
         </bean>
 
-        <context:property-placeholder location="classpath:db/postgres.properties" system-properties-mode="OVERRIDE"/>
-
         <bean id="dataSource"
               class="org.apache.tomcat.jdbc.pool.DataSource"
               p:driverClassName="org.postgresql.Driver"
@@ -92,9 +50,51 @@
     </beans>
 
     <beans profile="jdbc">
+        <context:component-scan base-package="ru.javawebinar.**.repository.jdbc"/>
+
+        <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
+            <constructor-arg ref="dataSource"/>
+        </bean>
+
+        <bean id="namedJdbcTemplate" class="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate">
+            <constructor-arg ref="jdbcTemplate"/>
+        </bean>
+    </beans>
+    <beans profile="jpa, datajpa">
+        <tx:annotation-driven/>
+        <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
+              p:dataSource-ref="dataSource"
+              p:packagesToScan="ru.javawebinar.**.model">
+            <!--p:persistenceUnitName="persistenceUnit">-->
+
+            <property name="jpaPropertyMap">
+                <map>
+                    <entry key="#{T(org.hibernate.cfg.AvailableSettings).FORMAT_SQL}" value="${hibernate.format_sql}"/>
+                    <entry key="#{T(org.hibernate.cfg.AvailableSettings).USE_SQL_COMMENTS}"
+                           value="${hibernate.use_sql_comments}"/>
+                    <entry key="#{T(org.hibernate.cfg.AvailableSettings).JPA_PROXY_COMPLIANCE}" value="false"/>
+                    <!--<entry key="#{T(org.hibernate.cfg.AvailableSettings).HBM2DDL_AUTO}" value="${hibernate.hbm2ddl.auto}"/>-->
+                </map>
+            </property>
+
+            <property name="jpaVendorAdapter">
+                <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
+                      p:showSql="${jpa.showSql}">
+                </bean>
+            </property>
+        </bean>
+
+        <!-- Transaction manager for a single JPA EntityManagerFactory (alternative to JTA) -->
+        <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
+              p:entityManagerFactory-ref="entityManagerFactory"/>
     </beans>
     <beans profile="jpa">
+        <context:component-scan base-package="ru.javawebinar.**.repository.jpa"/>
     </beans>
     <beans profile="datajpa">
+
+        <context:component-scan base-package="ru.javawebinar.**.repository.datajpa"/>
+        <jpa:repositories base-package="ru.javawebinar.**.repository.datajpa"/>
+
     </beans>
 </beans>
\ No newline at end of file
Index: src/main/resources/spring/spring-app.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\"\r\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\">\r\n\r\n<!--\r\n    <bean class=\"ru.javawebinar.topjava.repository.inmemory.InMemoryUserRepository\" id=\"inmemoryUserRepository\"/>\r\n\r\n    <bean class=\"ru.javawebinar.topjava.service.UserService\">\r\n        <constructor-arg name=\"repository\" ref=\"inmemoryUserRepository\"/>\r\n    </bean>\r\n-->\r\n    <import resource=\"spring-cache.xml\"/>\r\n\r\n    <context:component-scan base-package=\"ru.javawebinar.**.service\"/>\r\n\r\n    <context:component-scan base-package=\"ru.javawebinar.**.web\"/>\r\n\r\n</beans>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/resources/spring/spring-app.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/resources/spring/spring-app.xml	(date 1604330164099)
@@ -1,18 +1,22 @@
 <beans xmlns="http://www.springframework.org/schema/beans"
-       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
+       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+       xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd">
 
-<!--
-    <bean class="ru.javawebinar.topjava.repository.inmemory.InMemoryUserRepository" id="inmemoryUserRepository"/>
+    <!--
+        <bean class="ru.javawebinar.topjava.repository.inmemory.InMemoryUserRepository" id="inmemoryUserRepository"/>
 
-    <bean class="ru.javawebinar.topjava.service.UserService">
-        <constructor-arg name="repository" ref="inmemoryUserRepository"/>
-    </bean>
--->
+        <bean class="ru.javawebinar.topjava.service.UserService">
+            <constructor-arg name="repository" ref="inmemoryUserRepository"/>
+        </bean>
+    -->
     <import resource="spring-cache.xml"/>
 
     <context:component-scan base-package="ru.javawebinar.**.service"/>
 
     <context:component-scan base-package="ru.javawebinar.**.web"/>
 
+    <!--    <context:component-scan base-package="ru.javawebinar.topjava.repository.jpa"/>-->
+
+
 </beans>
\ No newline at end of file
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"FrameworkDetectionExcludesConfiguration\">\r\n    <file type=\"web\" url=\"file://$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"MavenProjectsManager\">\r\n    <option name=\"originalFiles\">\r\n      <list>\r\n        <option value=\"$PROJECT_DIR$/pom.xml\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"false\" project-jdk-name=\"11\" project-jdk-type=\"JavaSDK\" />\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/misc.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/misc.xml	(date 1604249896763)
@@ -10,5 +10,5 @@
       </list>
     </option>
   </component>
-  <component name="ProjectRootManager" version="2" languageLevel="JDK_11" default="false" project-jdk-name="11" project-jdk-type="JavaSDK" />
+  <component name="ProjectRootManager" version="2" languageLevel="JDK_15_PREVIEW" default="false" project-jdk-name="15" project-jdk-type="JavaSDK" />
 </project>
\ No newline at end of file
Index: .idea/artifacts/topjava_war_exploded.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><component name=\"ArtifactManager\">\r\n  <artifact type=\"exploded-war\" name=\"topjava:war exploded\">\r\n    <output-path>$PROJECT_DIR$/target/topjava</output-path>\r\n    <properties id=\"maven-jee-properties\">\r\n      <options>\r\n        <exploded>true</exploded>\r\n        <module>topjava</module>\r\n        <packaging>war</packaging>\r\n      </options>\r\n    </properties>\r\n    <root id=\"root\">\r\n      <element id=\"directory\" name=\"WEB-INF\">\r\n        <element id=\"directory\" name=\"classes\">\r\n          <element id=\"module-output\" name=\"topjava\" />\r\n        </element>\r\n        <element id=\"directory\" name=\"lib\">\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.slf4j:slf4j-api:1.7.30\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.slf4j:jul-to-slf4j:1.7.30\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: ch.qos.logback:logback-classic:1.2.3\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: ch.qos.logback:logback-core:1.2.3\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: javax.annotation:javax.annotation-api:1.3.2\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-context:5.2.9.RELEASE\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-aop:5.2.9.RELEASE\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-beans:5.2.9.RELEASE\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-core:5.2.9.RELEASE\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-jcl:5.2.9.RELEASE\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-expression:5.2.9.RELEASE\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-orm:5.2.9.RELEASE\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-jdbc:5.2.9.RELEASE\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-tx:5.2.9.RELEASE\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.postgresql:postgresql:42.2.17\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.checkerframework:checker-qual:3.5.0\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.hsqldb:hsqldb:2.3.4\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.hibernate:hibernate-core:5.4.22.Final\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.jboss.logging:jboss-logging:3.3.2.Final\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: javax.persistence:javax.persistence-api:2.2\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.javassist:javassist:3.24.0-GA\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: net.bytebuddy:byte-buddy:1.10.10\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: antlr:antlr:2.7.7\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.jboss.spec.javax.transaction:jboss-transaction-api_1.2_spec:1.1.1.Final\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.jboss:jandex:2.1.3.Final\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: com.fasterxml:classmate:1.5.1\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: javax.activation:javax.activation-api:1.2.0\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.dom4j:dom4j:2.1.3\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.hibernate.common:hibernate-commons-annotations:5.1.0.Final\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: javax.xml.bind:jaxb-api:2.3.1\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.glassfish.jaxb:jaxb-runtime:2.3.1\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.glassfish.jaxb:txw2:2.3.1\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: com.sun.istack:istack-commons-runtime:3.0.7\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.jvnet.staxex:stax-ex:1.8\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: com.sun.xml.fastinfoset:FastInfoset:1.2.15\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: org.hibernate.validator:hibernate-validator:6.1.6.Final\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: jakarta.validation:jakarta.validation-api:2.0.2\" />\r\n          <element id=\"library\" level=\"project\" name=\"Maven: javax.servlet:jstl:1.2\" />\r\n        </element>\r\n      </element>\r\n      <element id=\"directory\" name=\"META-INF\">\r\n        <element id=\"file-copy\" path=\"$PROJECT_DIR$/target/topjava/META-INF/MANIFEST.MF\" />\r\n      </element>\r\n      <element id=\"javaee-facet-resources\" facet=\"topjava/web/Web\" />\r\n    </root>\r\n  </artifact>\r\n</component>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/artifacts/topjava_war_exploded.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ .idea/artifacts/topjava_war_exploded.xml	(date 1604301150031)
@@ -15,22 +15,22 @@
         </element>
         <element id="directory" name="lib">
           <element id="library" level="project" name="Maven: org.slf4j:slf4j-api:1.7.30" />
-          <element id="library" level="project" name="Maven: org.slf4j:jul-to-slf4j:1.7.30" />
           <element id="library" level="project" name="Maven: ch.qos.logback:logback-classic:1.2.3" />
           <element id="library" level="project" name="Maven: ch.qos.logback:logback-core:1.2.3" />
           <element id="library" level="project" name="Maven: javax.annotation:javax.annotation-api:1.3.2" />
-          <element id="library" level="project" name="Maven: org.springframework:spring-context:5.2.9.RELEASE" />
-          <element id="library" level="project" name="Maven: org.springframework:spring-aop:5.2.9.RELEASE" />
-          <element id="library" level="project" name="Maven: org.springframework:spring-beans:5.2.9.RELEASE" />
-          <element id="library" level="project" name="Maven: org.springframework:spring-core:5.2.9.RELEASE" />
-          <element id="library" level="project" name="Maven: org.springframework:spring-jcl:5.2.9.RELEASE" />
-          <element id="library" level="project" name="Maven: org.springframework:spring-expression:5.2.9.RELEASE" />
-          <element id="library" level="project" name="Maven: org.springframework:spring-orm:5.2.9.RELEASE" />
-          <element id="library" level="project" name="Maven: org.springframework:spring-jdbc:5.2.9.RELEASE" />
-          <element id="library" level="project" name="Maven: org.springframework:spring-tx:5.2.9.RELEASE" />
-          <element id="library" level="project" name="Maven: org.postgresql:postgresql:42.2.17" />
-          <element id="library" level="project" name="Maven: org.checkerframework:checker-qual:3.5.0" />
-          <element id="library" level="project" name="Maven: org.hsqldb:hsqldb:2.3.4" />
+          <element id="library" level="project" name="Maven: org.springframework:spring-context-support:5.3.0" />
+          <element id="library" level="project" name="Maven: org.springframework:spring-beans:5.3.0" />
+          <element id="library" level="project" name="Maven: org.springframework:spring-context:5.3.0" />
+          <element id="library" level="project" name="Maven: org.springframework:spring-expression:5.3.0" />
+          <element id="library" level="project" name="Maven: org.springframework:spring-core:5.3.0" />
+          <element id="library" level="project" name="Maven: org.springframework:spring-jcl:5.3.0" />
+          <element id="library" level="project" name="Maven: org.springframework.data:spring-data-jpa:2.4.0" />
+          <element id="library" level="project" name="Maven: org.springframework.data:spring-data-commons:2.4.0" />
+          <element id="library" level="project" name="Maven: org.springframework:spring-orm:5.3.0" />
+          <element id="library" level="project" name="Maven: org.springframework:spring-jdbc:5.3.0" />
+          <element id="library" level="project" name="Maven: org.springframework:spring-aop:5.3.0" />
+          <element id="library" level="project" name="Maven: org.springframework:spring-tx:5.3.0" />
+          <element id="library" level="project" name="Maven: org.aspectj:aspectjrt:1.9.6" />
           <element id="library" level="project" name="Maven: org.hibernate:hibernate-core:5.4.22.Final" />
           <element id="library" level="project" name="Maven: org.jboss.logging:jboss-logging:3.3.2.Final" />
           <element id="library" level="project" name="Maven: javax.persistence:javax.persistence-api:2.2" />
@@ -44,14 +44,20 @@
           <element id="library" level="project" name="Maven: org.dom4j:dom4j:2.1.3" />
           <element id="library" level="project" name="Maven: org.hibernate.common:hibernate-commons-annotations:5.1.0.Final" />
           <element id="library" level="project" name="Maven: javax.xml.bind:jaxb-api:2.3.1" />
-          <element id="library" level="project" name="Maven: org.glassfish.jaxb:jaxb-runtime:2.3.1" />
-          <element id="library" level="project" name="Maven: org.glassfish.jaxb:txw2:2.3.1" />
+          <element id="library" level="project" name="Maven: org.hibernate.validator:hibernate-validator:6.1.6.Final" />
+          <element id="library" level="project" name="Maven: jakarta.validation:jakarta.validation-api:2.0.2" />
+          <element id="library" level="project" name="Maven: javax.cache:cache-api:1.1.0" />
+          <element id="library" level="project" name="Maven: org.ehcache:ehcache:3.9.0" />
+          <element id="library" level="project" name="Maven: org.glassfish.jaxb:jaxb-runtime:2.4.0-b180830.0438" />
+          <element id="library" level="project" name="Maven: org.glassfish.jaxb:txw2:2.4.0-b180830.0438" />
           <element id="library" level="project" name="Maven: com.sun.istack:istack-commons-runtime:3.0.7" />
           <element id="library" level="project" name="Maven: org.jvnet.staxex:stax-ex:1.8" />
           <element id="library" level="project" name="Maven: com.sun.xml.fastinfoset:FastInfoset:1.2.15" />
-          <element id="library" level="project" name="Maven: org.hibernate.validator:hibernate-validator:6.1.6.Final" />
-          <element id="library" level="project" name="Maven: jakarta.validation:jakarta.validation-api:2.0.2" />
           <element id="library" level="project" name="Maven: javax.servlet:jstl:1.2" />
+          <element id="library" level="project" name="Maven: org.hsqldb:hsqldb:2.3.4" />
+          <element id="library" level="project" name="Maven: org.postgresql:postgresql:42.2.17" />
+          <element id="library" level="project" name="Maven: org.checkerframework:checker-qual:3.5.0" />
+          <element id="library" level="project" name="Maven: org.slf4j:jul-to-slf4j:1.7.30" />
         </element>
       </element>
       <element id="directory" name="META-INF">
Index: log/topjava.log
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>2020-10-20 17:04:19,235 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:09:31,074 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:24:05,756 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:26:15,490 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:28:06,723 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 17:28:17,935 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:28:17,940 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 17:28:17,941 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime]\r\n2020-10-20 17:28:17,945 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:28:17,945 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:28:17,948 DEBUG org.postgresql.Driver.loadDefaultProperties:137 - Loading driver configuration via classloader ParallelWebappClassLoader\r\n  context: topjava_war_exploded\r\n  delegate: false\r\n----------> Parent Classloader:\r\njava.net.URLClassLoader@b44e46\r\n\r\n2020-10-20 17:28:17,949 DEBUG org.postgresql.Driver.connect:252 - Connecting with URL: jdbc:postgresql://localhost:5432/topjava\r\n2020-10-20 17:28:17,955 DEBUG org.postgresql.jdbc.PgConnection.<init>:211 - PostgreSQL JDBC Driver 42.2.17\r\n2020-10-20 17:28:17,956 DEBUG org.postgresql.jdbc.PgConnection.setDefaultFetchSize:1139 -   setDefaultFetchSize = 0\r\n2020-10-20 17:28:17,956 DEBUG org.postgresql.jdbc.PgConnection.setPrepareThreshold:1148 -   setPrepareThreshold = 5\r\n2020-10-20 17:28:17,964 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl:191 - Trying to establish a protocol version 3 connection to localhost:5432\r\n2020-10-20 17:28:17,973 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect:140 - Receive Buffer Size is 65 536\r\n2020-10-20 17:28:17,973 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect:141 - Send Buffer Size is 65 536\r\n2020-10-20 17:28:18,115 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@12e43dd]\r\n2020-10-20 17:28:18,116 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:28:18,116 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:28:18,116 DEBUG org.postgresql.Driver.connect:252 - Connecting with URL: jdbc:postgresql://localhost:5432/topjava\r\n2020-10-20 17:28:18,116 DEBUG org.postgresql.jdbc.PgConnection.<init>:211 - PostgreSQL JDBC Driver 42.2.17\r\n2020-10-20 17:28:18,116 DEBUG org.postgresql.jdbc.PgConnection.setDefaultFetchSize:1139 -   setDefaultFetchSize = 0\r\n2020-10-20 17:28:18,117 DEBUG org.postgresql.jdbc.PgConnection.setPrepareThreshold:1148 -   setPrepareThreshold = 5\r\n2020-10-20 17:28:18,117 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl:191 - Trying to establish a protocol version 3 connection to localhost:5432\r\n2020-10-20 17:28:18,117 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect:140 - Receive Buffer Size is 65 536\r\n2020-10-20 17:28:18,118 DEBUG org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect:141 - Send Buffer Size is 65 536\r\n2020-10-20 17:28:18,153 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found\r\n2020-10-20 17:28:18,153 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@12e43dd]: database product name is 'PostgreSQL'\r\n2020-10-20 17:28:18,154 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: \"ORDERED\")\r\n  Позиция: 38]; SQL was [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime] for task [PreparedStatementCallback]\r\n2020-10-20 17:32:33,490 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 17:32:35,692 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:32:35,697 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 17:32:35,698 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime]\r\n2020-10-20 17:32:35,702 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:32:35,702 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:32:35,869 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@12e43dd]\r\n2020-10-20 17:32:35,869 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:32:35,870 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:32:35,905 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found\r\n2020-10-20 17:32:35,905 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@12e43dd]: database product name is 'PostgreSQL'\r\n2020-10-20 17:32:35,906 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: \"ORDERED\")\r\n  Позиция: 38]; SQL was [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime] for task [PreparedStatementCallback]\r\n2020-10-20 17:37:12,784 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 17:37:14,468 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:37:14,474 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 17:37:14,475 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime]\r\n2020-10-20 17:37:14,482 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:37:14,482 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:37:14,644 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@5bdc79]\r\n2020-10-20 17:37:14,645 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:37:14,645 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:37:14,681 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found\r\n2020-10-20 17:37:14,681 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@5bdc79]: database product name is 'PostgreSQL'\r\n2020-10-20 17:37:14,682 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: \"ORDERED\")\r\n  Позиция: 38]; SQL was [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime] for task [PreparedStatementCallback]\r\n2020-10-20 17:40:42,736 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 17:40:45,636 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:40:45,641 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 17:40:45,642 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime]\r\n2020-10-20 17:40:45,646 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:40:45,646 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:40:45,810 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@5bdc79]\r\n2020-10-20 17:40:45,811 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:40:45,811 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:40:45,846 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found\r\n2020-10-20 17:40:45,847 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@5bdc79]: database product name is 'PostgreSQL'\r\n2020-10-20 17:40:45,847 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: \"ORDERED\")\r\n  Позиция: 38]; SQL was [SELECT * FROM meals WHERE user_id=? ORDERED BY datetime] for task [PreparedStatementCallback]\r\n2020-10-20 17:41:17,378 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 17:41:20,895 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:41:20,901 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 17:41:20,901 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  ORDERED BY datetime WHERE user_id=?]\r\n2020-10-20 17:41:20,905 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:41:20,905 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:41:21,070 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@1c8ae39]\r\n2020-10-20 17:41:21,071 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:41:21,071 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:41:21,107 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found\r\n2020-10-20 17:41:21,107 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@1c8ae39]: database product name is 'PostgreSQL'\r\n2020-10-20 17:41:21,107 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: \"BY\")\r\n  Позиция: 30]; SQL was [SELECT * FROM meals  ORDERED BY datetime WHERE user_id=?] for task [PreparedStatementCallback]\r\n2020-10-20 17:44:54,909 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 17:44:57,141 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:44:57,150 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 17:44:57,150 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=?]\r\n2020-10-20 17:44:57,154 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:44:57,155 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:46:47,741 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 17:46:50,100 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:46:50,106 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 17:46:50,106 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=?]\r\n2020-10-20 17:46:50,114 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:46:50,114 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:46:50,252 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 17:46:50,255 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'datetime' mapped to field 'datetime'\r\n2020-10-20 17:46:50,256 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'description' mapped to field 'description'\r\n2020-10-20 17:46:50,256 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'calories' mapped to field 'calories'\r\n2020-10-20 17:46:50,256 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 17:58:42,624 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 17:58:45,512 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 17:58:45,518 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 17:58:45,519 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=?]\r\n2020-10-20 17:58:45,526 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 17:58:45,526 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 17:58:45,662 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 17:58:45,666 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 17:58:45,667 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 17:58:45,667 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 17:58:45,668 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:04:28,168 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 18:04:31,140 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:04:31,146 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:04:31,146 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDERED BY datetime]\r\n2020-10-20 18:04:31,150 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:04:31,151 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:04:31,418 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@8672e4]\r\n2020-10-20 18:04:31,419 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:04:31,419 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:04:31,455 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found\r\n2020-10-20 18:04:31,455 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@8672e4]: database product name is 'PostgreSQL'\r\n2020-10-20 18:04:31,456 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: \"ORDERED\")\r\n  Позиция: 39]; SQL was [SELECT * FROM meals  WHERE user_id=? ORDERED BY datetime] for task [PreparedStatementCallback]\r\n2020-10-20 18:11:14,858 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 18:11:18,103 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:11:18,109 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:11:18,109 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:11:18,117 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:11:18,117 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:11:18,254 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:11:18,258 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:11:18,259 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:11:18,259 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:11:18,260 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:11:30,302 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100006 for user 100000\r\n2020-10-20 18:11:30,303 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update\r\n2020-10-20 18:11:30,303 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=? user_id=?]\r\n2020-10-20 18:11:30,304 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:11:30,304 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:11:30,377 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@19aa9ee]\r\n2020-10-20 18:11:30,378 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:11:30,378 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:11:30,415 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found\r\n2020-10-20 18:11:30,415 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@19aa9ee]: database product name is 'PostgreSQL'\r\n2020-10-20 18:11:30,415 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.logTranslation:407 - Translating SQLException with SQL state '42601', error code '0', message [ОШИБКА: ошибка синтаксиса (примерное положение: \"user_id\")\r\n  Позиция: 31]; SQL was [DELETE FROM meals WHERE id=? user_id=?] for task [PreparedStatementCallback]\r\n2020-10-20 18:13:53,182 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 18:13:55,003 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:13:55,008 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:13:55,009 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:13:55,013 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:13:55,013 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:13:55,151 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:13:55,155 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:13:55,156 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:13:55,156 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:13:55,157 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:14:03,531 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100006 for user 100000\r\n2020-10-20 18:14:03,532 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update\r\n2020-10-20 18:14:03,532 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=? AND user_id=?]\r\n2020-10-20 18:14:03,533 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:14:03,533 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:14:03,603 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@2da080]\r\n2020-10-20 18:14:03,604 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:14:03,604 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:14:03,640 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found\r\n2020-10-20 18:14:03,640 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@2da080]: database product name is 'PostgreSQL'\r\n2020-10-20 18:14:03,641 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.doTranslate:289 - Unable to translate SQLException with SQL state '42883', error code '0, will now try the fallback translator\r\n2020-10-20 18:14:03,641 DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate:98 - Extracted SQL state class '42' from value '42883'\r\n2020-10-20 18:18:32,833 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 18:18:34,969 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:18:34,975 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:18:34,978 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:18:34,983 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:18:34,983 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:18:35,121 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:18:35,125 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:18:35,126 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:18:35,126 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:18:35,127 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:18:37,362 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100006 for user 100000\r\n2020-10-20 18:18:37,363 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update\r\n2020-10-20 18:18:37,363 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=?]\r\n2020-10-20 18:18:37,363 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:18:37,363 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:18:37,403 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:18:37,403 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:18:37,403 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:18:37,403 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:18:37,403 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:18:37,437 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:18:37,437 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:18:37,437 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:18:37,437 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:18:37,437 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:18:38,873 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100007 for user 100000\r\n2020-10-20 18:18:38,873 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update\r\n2020-10-20 18:18:38,873 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=?]\r\n2020-10-20 18:18:38,874 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:18:38,874 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:18:38,910 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:18:38,910 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:18:38,911 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:18:38,911 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:18:38,911 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:18:38,945 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:18:38,946 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:18:38,946 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:18:38,946 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:18:38,946 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:19:21,672 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 18:19:23,182 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:19:23,188 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:19:23,188 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:19:23,192 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:19:23,193 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:19:23,330 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:19:23,334 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:19:23,335 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:19:23,335 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:19:23,336 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:19:25,148 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100005 for user 100000\r\n2020-10-20 18:19:25,148 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update\r\n2020-10-20 18:19:25,149 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=? AND user_id=?]\r\n2020-10-20 18:19:25,149 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:19:25,149 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:19:25,187 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:19:25,188 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:19:25,188 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:19:25,188 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:19:25,188 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:19:25,222 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:19:25,222 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:19:25,222 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:19:25,222 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:19:25,222 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:19:27,202 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100004 for user 100000\r\n2020-10-20 18:19:27,202 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:860 - Executing prepared SQL update\r\n2020-10-20 18:19:27,202 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [DELETE FROM meals WHERE id=? AND user_id=?]\r\n2020-10-20 18:19:27,203 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:19:27,203 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:19:27,239 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:19:27,239 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:19:27,239 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:19:27,239 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:19:27,239 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:19:27,273 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:19:27,273 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:19:27,274 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:19:27,274 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:19:27,274 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:20:06,520 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-30 - 2020-01-30) time(00:00 - 11:11) for user 100000\r\n2020-10-20 18:20:06,520 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:20:06,520 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:20:06,521 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:20:06,521 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:20:06,555 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:20:06,555 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:20:06,555 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:20:06,555 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:20:06,556 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:21:18,536 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 18:21:20,583 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:21:20,589 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:21:20,589 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:21:20,593 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:21:20,594 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:21:20,730 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:21:20,734 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:21:20,734 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:21:20,735 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:21:20,736 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:21:26,865 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(null - null) time(null - 11:11) for user 100000\r\n2020-10-20 18:21:26,866 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:21:26,866 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:21:26,866 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:21:26,866 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:21:26,901 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:21:26,901 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:21:26,901 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:21:26,901 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:21:26,901 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:21:35,832 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-20T18:21, description='fdgdf', calories=1000} for user 100000\r\n2020-10-20 18:21:35,834 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.checkCompiled:308 - JdbcInsert not compiled before execution - invoking compile\r\n2020-10-20 18:21:35,836 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:21:35,836 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:21:35,874 DEBUG o.s.j.core.metadata.TableMetaDataProviderFactory.lambda$createMetaDataProvider$0:75 - Using PostgresTableMetaDataProvider\r\n2020-10-20 18:21:35,875 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.initializeWithMetaData:150 - GetGeneratedKeys is supported\r\n2020-10-20 18:21:35,875 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.initializeWithMetaData:174 - GeneratedKeysColumnNameArray is supported for PostgreSQL\r\n2020-10-20 18:21:35,883 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:392 - Retrieving meta-data for null/public/meals\r\n2020-10-20 18:21:35,890 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'id', sqlType=4, nullable=false\r\n2020-10-20 18:21:35,890 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'datetime', sqlType=93, nullable=false\r\n2020-10-20 18:21:35,890 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'description', sqlType=12, nullable=false\r\n2020-10-20 18:21:35,890 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'calories', sqlType=4, nullable=false\r\n2020-10-20 18:21:35,890 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'user_id', sqlType=4, nullable=false\r\n2020-10-20 18:21:35,891 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.compileInternal:281 - Compiled insert object: insert string is [INSERT INTO meals (datetime, description, calories, user_id) VALUES(?, ?, ?, ?)]\r\n2020-10-20 18:21:35,891 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.compile:264 - JdbcInsert for table [meals] compiled\r\n2020-10-20 18:21:35,892 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.executeInsertAndReturnKeyHolderInternal:428 - The following parameters are used for call INSERT INTO meals (datetime, description, calories, user_id) VALUES(?, ?, ?, ?) with: [2020-10-20T18:21, fdgdf, 1000, 100000]\r\n2020-10-20 18:21:35,893 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:891 - Executing SQL update and returning generated keys\r\n2020-10-20 18:21:35,893 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement\r\n2020-10-20 18:21:35,893 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:21:35,893 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:21:35,926 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.prepareStatementForGeneratedKeys:523 - Using generated keys support with array of column names.\r\n2020-10-20 18:21:35,935 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:21:35,935 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:21:35,935 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:21:35,935 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:21:35,936 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:21:35,970 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:21:35,970 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:21:35,970 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:21:35,970 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:21:35,970 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:21:42,051 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-20T18:21, description='sdfsffff', calories=1000} for user 100000\r\n2020-10-20 18:21:42,052 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.executeInsertAndReturnKeyHolderInternal:428 - The following parameters are used for call INSERT INTO meals (datetime, description, calories, user_id) VALUES(?, ?, ?, ?) with: [2020-10-20T18:21, sdfsffff, 1000, 100000]\r\n2020-10-20 18:21:42,052 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:891 - Executing SQL update and returning generated keys\r\n2020-10-20 18:21:42,052 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement\r\n2020-10-20 18:21:42,052 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:21:42,052 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:21:42,085 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.prepareStatementForGeneratedKeys:523 - Using generated keys support with array of column names.\r\n2020-10-20 18:21:42,089 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:21:42,089 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:21:42,090 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:21:42,090 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:21:42,090 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:21:42,123 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:21:42,123 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:21:42,123 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:21:42,123 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:21:42,123 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 18:21:53,074 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-20T18:21, description='1', calories=1} for user 100000\r\n2020-10-20 18:21:53,074 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.executeInsertAndReturnKeyHolderInternal:428 - The following parameters are used for call INSERT INTO meals (datetime, description, calories, user_id) VALUES(?, ?, ?, ?) with: [2020-10-20T18:21, 1, 1, 100000]\r\n2020-10-20 18:21:53,074 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:891 - Executing SQL update and returning generated keys\r\n2020-10-20 18:21:53,074 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement\r\n2020-10-20 18:21:53,074 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:21:53,074 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:21:53,208 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.prepareStatementForGeneratedKeys:523 - Using generated keys support with array of column names.\r\n2020-10-20 18:21:53,212 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 18:21:53,212 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 18:21:53,212 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 18:21:53,212 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 18:21:53,212 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 18:21:53,347 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 18:21:53,348 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 18:21:53,348 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 18:21:53,348 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 18:21:53,348 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-20 19:38:28,316 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-20 19:38:30,754 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-20 19:38:30,759 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-20 19:38:30,760 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-20 19:38:30,764 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-20 19:38:30,764 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-20 19:38:30,927 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-20 19:38:30,932 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'datetime' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-20 19:38:30,933 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-20 19:38:30,933 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-20 19:38:30,934 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-22 22:31:23,322 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-22 22:31:25,797 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-22 22:31:25,802 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-22 22:31:25,803 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY datetime DESC]\r\n2020-10-22 22:31:25,807 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-22 22:31:25,807 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-22 22:31:25,999 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.resolveErrorCodes:223 - Looking up default SQLErrorCodes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@1996434]\r\n2020-10-22 22:31:26,000 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-22 22:31:26,000 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-22 22:31:26,137 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.getErrorCodes:181 - SQL error codes for 'PostgreSQL' found\r\n2020-10-22 22:31:26,137 DEBUG o.s.jdbc.support.SQLErrorCodesFactory.registerDatabase:267 - Caching SQL error codes for DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@1996434]: database product name is 'PostgreSQL'\r\n2020-10-22 22:31:26,138 DEBUG o.s.j.support.SQLErrorCodeSQLExceptionTranslator.doTranslate:289 - Unable to translate SQLException with SQL state '42703', error code '0, will now try the fallback translator\r\n2020-10-22 22:31:26,138 DEBUG o.s.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate:98 - Extracted SQL state class '42' from value '42703'\r\n2020-10-22 22:32:08,056 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-22 22:32:10,193 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-22 22:32:10,198 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-22 22:32:10,199 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY date_time DESC]\r\n2020-10-22 22:32:10,203 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-22 22:32:10,203 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-22 22:32:10,344 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-22 22:32:10,348 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'date_time' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-22 22:32:10,349 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-22 22:32:10,349 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-22 22:32:10,350 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-22 22:32:16,197 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-22T22:32, description='hbjjmh', calories=1000} for user 100000\r\n2020-10-22 22:32:16,198 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.checkCompiled:308 - JdbcInsert not compiled before execution - invoking compile\r\n2020-10-22 22:32:16,200 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-22 22:32:16,200 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-22 22:32:16,242 DEBUG o.s.j.core.metadata.TableMetaDataProviderFactory.lambda$createMetaDataProvider$0:75 - Using PostgresTableMetaDataProvider\r\n2020-10-22 22:32:16,242 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.initializeWithMetaData:150 - GetGeneratedKeys is supported\r\n2020-10-22 22:32:16,242 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.initializeWithMetaData:174 - GeneratedKeysColumnNameArray is supported for PostgreSQL\r\n2020-10-22 22:32:16,248 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:392 - Retrieving meta-data for null/public/meals\r\n2020-10-22 22:32:16,254 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'id', sqlType=4, nullable=false\r\n2020-10-22 22:32:16,255 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'date_time', sqlType=93, nullable=false\r\n2020-10-22 22:32:16,255 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'description', sqlType=12, nullable=false\r\n2020-10-22 22:32:16,255 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'calories', sqlType=4, nullable=false\r\n2020-10-22 22:32:16,255 DEBUG o.s.jdbc.core.metadata.TableMetaDataProvider.processTableColumns:418 - Retrieved meta-data: 'user_id', sqlType=4, nullable=false\r\n2020-10-22 22:32:16,256 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.compileInternal:281 - Compiled insert object: insert string is [INSERT INTO meals (date_time, description, calories, user_id) VALUES(?, ?, ?, ?)]\r\n2020-10-22 22:32:16,256 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.compile:264 - JdbcInsert for table [meals] compiled\r\n2020-10-22 22:32:16,257 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.executeInsertAndReturnKeyHolderInternal:428 - The following parameters are used for call INSERT INTO meals (date_time, description, calories, user_id) VALUES(?, ?, ?, ?) with: [2020-10-22T22:32, hbjjmh, 1000, 100000]\r\n2020-10-22 22:32:16,257 DEBUG org.springframework.jdbc.core.JdbcTemplate.update:891 - Executing SQL update and returning generated keys\r\n2020-10-22 22:32:16,258 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement\r\n2020-10-22 22:32:16,258 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-22 22:32:16,258 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-22 22:32:16,290 DEBUG o.s.jdbc.core.simple.SimpleJdbcInsert.prepareStatementForGeneratedKeys:523 - Using generated keys support with array of column names.\r\n2020-10-22 22:32:16,298 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-22 22:32:16,299 DEBUG org.springframework.jdbc.core.JdbcTemplate.query:667 - Executing prepared SQL query\r\n2020-10-22 22:32:16,299 DEBUG org.springframework.jdbc.core.JdbcTemplate.execute:609 - Executing prepared SQL statement [SELECT * FROM meals  WHERE user_id=? ORDER BY date_time DESC]\r\n2020-10-22 22:32:16,299 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-22 22:32:16,299 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-22 22:32:16,333 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'id' to property 'id' of type 'java.lang.Integer'\r\n2020-10-22 22:32:16,333 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'date_time' to property 'dateTime' of type 'java.time.LocalDateTime'\r\n2020-10-22 22:32:16,333 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'description' to property 'description' of type 'java.lang.String'\r\n2020-10-22 22:32:16,333 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:300 - Mapping column 'calories' to property 'calories' of type 'int'\r\n2020-10-22 22:32:16,333 DEBUG o.springframework.jdbc.core.BeanPropertyRowMapper.mapRow:332 - No property found for column 'user_id' mapped to field 'user_id'\r\n2020-10-23 18:16:25,203 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-23 18:16:25,275 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-23 18:16:25,470 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-23 18:16:25,909 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-23 18:16:26,321 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-23 18:16:26,988 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-23 18:16:27,105 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-23 18:16:29,934 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-23 18:26:09,594 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-23 18:26:54,408 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-23 18:26:54,486 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-23 18:26:54,689 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-23 18:26:55,049 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-23 18:26:55,495 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-23 18:26:56,247 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-23 18:26:56,380 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-23 18:36:28,898 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-23 18:36:29,274 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-23 18:36:41,728 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1715d9d\r\n2020-10-23 18:36:41,905 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-23 18:36:41,906 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-23 18:36:41,938 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-23 18:36:41,938 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-23 18:36:41,939 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-23 18:36:41,939 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-23 18:36:41,962 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-23 18:36:41,966 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-23 18:36:41,986 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-23 18:36:42,020 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-23 18:36:42,076 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-23 18:36:42,114 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-23 18:36:42,115 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-23 18:36:42,116 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-23 18:36:42,117 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-23 18:36:42,119 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-23 18:36:42,123 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-23 18:36:42,124 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-23 18:36:42,155 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-23 18:36:42,264 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-23 18:36:42,266 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-23 18:36:42,284 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-23 18:36:42,295 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-23 18:36:42,312 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-23 18:36:42,330 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-23 18:36:42,399 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-23 18:36:42,572 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-23 18:36:42,747 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-23 18:36:42,908 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-23 18:36:43,337 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-23 18:36:43,989 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-23 18:36:44,104 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-23 18:36:44,107 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-23 18:36:44,117 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-23 18:36:44,118 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-23 18:36:44,119 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-23 18:36:44,120 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-23 18:36:44,140 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-23 18:36:44,140 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-23 18:36:44,141 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-23 18:36:44,142 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-23 18:36:44,145 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-23 18:36:44,146 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-23 18:36:44,152 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'\r\n2020-10-23 18:36:44,174 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-23 18:36:44,174 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-23 18:36:44,207 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]\r\n2020-10-23 18:36:44,215 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles\r\n2020-10-23 18:36:44,218 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals\r\n2020-10-23 18:36:44,220 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users\r\n2020-10-23 18:36:44,221 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq\r\n2020-10-23 18:36:44,224 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000\r\n2020-10-23 18:36:44,237 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )\r\n2020-10-23 18:36:44,243 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)\r\n2020-10-23 18:36:44,259 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-23 18:36:44,271 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-23 18:36:44,277 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)\r\n2020-10-23 18:36:44,277 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 70 ms.\r\n2020-10-23 18:36:44,277 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]\r\n2020-10-23 18:36:44,279 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles\r\n2020-10-23 18:36:44,279 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals\r\n2020-10-23 18:36:44,280 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users\r\n2020-10-23 18:36:44,281 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000\r\n2020-10-23 18:36:44,282 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')\r\n2020-10-23 18:36:44,283 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)\r\n2020-10-23 18:36:44,284 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)\r\n2020-10-23 18:36:44,284 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.\r\n2020-10-23 18:36:44,286 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-23 18:36:44,298 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-24 21:57:56,399 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@1715d9d, started on Fri Oct 23 18:36:41 MSK 2020\r\n2020-10-24 21:57:56,404 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-24 21:57:56,405 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 21:57:56,441 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-24 23:10:32,786 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1f9e34c\r\n2020-10-24 23:10:32,946 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-24 23:10:32,946 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-24 23:10:32,980 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-24 23:10:32,980 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-24 23:10:32,981 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-24 23:10:32,981 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-24 23:10:33,003 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-24 23:10:33,008 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-24 23:10:33,027 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-24 23:10:33,063 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-24 23:10:33,113 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-24 23:10:33,149 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-24 23:10:33,151 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-24 23:10:33,151 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-24 23:10:33,152 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-24 23:10:33,154 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-24 23:10:33,158 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-24 23:10:33,158 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-24 23:10:33,190 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-24 23:10:33,298 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-24 23:10:33,300 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-24 23:10:33,318 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-24 23:10:33,329 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-24 23:10:33,347 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-24 23:10:33,365 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-24 23:10:33,456 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-24 23:10:33,630 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-24 23:10:33,807 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:10:34,068 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-24 23:10:34,472 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-24 23:10:35,142 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-24 23:10:35,289 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-24 23:10:35,292 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-24 23:10:35,299 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-24 23:10:35,311 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-24 23:10:35,312 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-24 23:10:35,313 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-24 23:10:35,322 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-24 23:10:35,322 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-24 23:10:35,323 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-24 23:10:35,324 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-24 23:10:35,327 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-24 23:10:35,328 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-24 23:10:35,335 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'\r\n2020-10-24 23:10:35,357 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-24 23:10:35,358 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:10:35,390 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]\r\n2020-10-24 23:10:35,399 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles\r\n2020-10-24 23:10:35,402 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals\r\n2020-10-24 23:10:35,405 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users\r\n2020-10-24 23:10:35,405 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq\r\n2020-10-24 23:10:35,408 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000\r\n2020-10-24 23:10:35,421 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )\r\n2020-10-24 23:10:35,427 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)\r\n2020-10-24 23:10:35,438 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-24 23:10:35,450 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-24 23:10:35,456 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)\r\n2020-10-24 23:10:35,456 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 65 ms.\r\n2020-10-24 23:10:35,456 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]\r\n2020-10-24 23:10:35,457 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles\r\n2020-10-24 23:10:35,458 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals\r\n2020-10-24 23:10:35,459 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users\r\n2020-10-24 23:10:35,460 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000\r\n2020-10-24 23:10:35,461 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')\r\n2020-10-24 23:10:35,462 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)\r\n2020-10-24 23:10:35,463 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)\r\n2020-10-24 23:10:35,463 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.\r\n2020-10-24 23:10:35,465 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-24 23:10:35,476 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-24 23:10:37,594 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-24 23:10:37,601 DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke:305 - Creating new EntityManager for shared EntityManager invocation\r\n2020-10-24 23:10:37,695 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:10:43,455 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100008 for user 100000\r\n2020-10-24 23:10:43,455 DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke:305 - Creating new EntityManager for shared EntityManager invocation\r\n2020-10-24 23:13:23,251 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@1f9e34c, started on Sat Oct 24 23:10:32 MSK 2020\r\n2020-10-24 23:13:23,251 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-24 23:13:23,251 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:13:23,283 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-24 23:13:35,646 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@13bee6c\r\n2020-10-24 23:13:35,805 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-24 23:13:35,806 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-24 23:13:35,838 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-24 23:13:35,838 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-24 23:13:35,839 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-24 23:13:35,839 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-24 23:13:35,865 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-24 23:13:35,866 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-24 23:13:35,885 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-24 23:13:35,920 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-24 23:13:35,971 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-24 23:13:36,006 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-24 23:13:36,008 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-24 23:13:36,008 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-24 23:13:36,009 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-24 23:13:36,011 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-24 23:13:36,015 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-24 23:13:36,016 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-24 23:13:36,045 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-24 23:13:36,154 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-24 23:13:36,157 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-24 23:13:36,173 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-24 23:13:36,186 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-24 23:13:36,202 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-24 23:13:36,220 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-24 23:13:36,289 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-24 23:13:36,461 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-24 23:13:36,660 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:13:36,819 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-24 23:13:37,227 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-24 23:13:37,896 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-24 23:13:38,012 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-24 23:13:38,015 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-24 23:13:38,022 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-24 23:13:38,042 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-24 23:13:38,043 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-24 23:13:38,043 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-24 23:13:38,045 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-24 23:13:38,046 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-24 23:13:38,046 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-24 23:13:38,047 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-24 23:13:38,051 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-24 23:13:38,051 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-24 23:13:38,061 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'\r\n2020-10-24 23:13:38,080 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-24 23:13:38,080 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:13:38,113 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]\r\n2020-10-24 23:13:38,121 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles\r\n2020-10-24 23:13:38,124 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals\r\n2020-10-24 23:13:38,127 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users\r\n2020-10-24 23:13:38,128 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq\r\n2020-10-24 23:13:38,131 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000\r\n2020-10-24 23:13:38,148 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )\r\n2020-10-24 23:13:38,153 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)\r\n2020-10-24 23:13:38,164 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-24 23:13:38,208 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-24 23:13:38,214 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)\r\n2020-10-24 23:13:38,215 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 102 ms.\r\n2020-10-24 23:13:38,215 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]\r\n2020-10-24 23:13:38,216 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles\r\n2020-10-24 23:13:38,217 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals\r\n2020-10-24 23:13:38,218 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users\r\n2020-10-24 23:13:38,219 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000\r\n2020-10-24 23:13:38,220 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')\r\n2020-10-24 23:13:38,221 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)\r\n2020-10-24 23:13:38,222 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)\r\n2020-10-24 23:13:38,222 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.\r\n2020-10-24 23:13:38,223 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-24 23:13:38,235 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-24 23:13:41,725 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-24 23:13:41,736 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-24 23:13:41,788 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29254878<open>)] for JPA transaction\r\n2020-10-24 23:13:41,793 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:13:41,825 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@af0de3] read-only\r\n2020-10-24 23:13:41,829 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@197c956]\r\n2020-10-24 23:13:41,873 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:13:41,873 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(29254878<open>)]\r\n2020-10-24 23:13:41,874 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@af0de3]\r\n2020-10-24 23:13:41,874 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29254878<open>)] after transaction\r\n2020-10-24 23:13:44,203 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100008 for user 100000\r\n2020-10-24 23:13:44,204 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.delete]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-24 23:13:44,204 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(18077078<open>)] for JPA transaction\r\n2020-10-24 23:13:44,204 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:13:44,242 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1ebbee6] read-only\r\n2020-10-24 23:13:44,242 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@e93a3f]\r\n2020-10-24 23:13:44,254 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 25006\r\n2020-10-24 23:13:44,254 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: в транзакции в режиме \"только чтение\" нельзя выполнить DELETE\r\n2020-10-24 23:13:44,260 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback\r\n2020-10-24 23:13:44,260 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(18077078<open>)]\r\n2020-10-24 23:13:44,261 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1ebbee6]\r\n2020-10-24 23:13:44,262 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(18077078<open>)] after transaction\r\n2020-10-24 23:15:30,129 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@13bee6c, started on Sat Oct 24 23:13:35 MSK 2020\r\n2020-10-24 23:15:30,129 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-24 23:15:30,129 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:30,162 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-24 23:15:41,560 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@dcd7bb\r\n2020-10-24 23:15:41,722 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-24 23:15:41,722 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-24 23:15:41,756 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-24 23:15:41,756 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-24 23:15:41,756 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-24 23:15:41,757 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-24 23:15:41,783 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-24 23:15:41,784 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-24 23:15:41,803 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-24 23:15:41,839 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-24 23:15:41,890 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-24 23:15:41,926 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-24 23:15:41,927 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-24 23:15:41,928 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-24 23:15:41,930 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-24 23:15:41,932 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-24 23:15:41,936 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-24 23:15:41,937 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-24 23:15:41,967 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-24 23:15:42,077 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-24 23:15:42,079 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-24 23:15:42,095 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-24 23:15:42,109 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-24 23:15:42,125 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-24 23:15:42,143 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-24 23:15:42,234 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-24 23:15:42,404 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-24 23:15:42,582 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:42,742 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-24 23:15:43,149 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-24 23:15:43,819 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-24 23:15:43,970 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-24 23:15:43,973 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-24 23:15:43,980 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-24 23:15:44,001 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-24 23:15:44,002 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-24 23:15:44,003 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-24 23:15:44,005 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-24 23:15:44,005 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-24 23:15:44,006 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-24 23:15:44,006 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-24 23:15:44,010 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-24 23:15:44,011 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-24 23:15:44,018 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'\r\n2020-10-24 23:15:44,042 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-24 23:15:44,043 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:44,076 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]\r\n2020-10-24 23:15:44,084 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles\r\n2020-10-24 23:15:44,087 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals\r\n2020-10-24 23:15:44,090 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users\r\n2020-10-24 23:15:44,091 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq\r\n2020-10-24 23:15:44,094 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000\r\n2020-10-24 23:15:44,108 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )\r\n2020-10-24 23:15:44,113 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)\r\n2020-10-24 23:15:44,125 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-24 23:15:44,137 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-24 23:15:44,143 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)\r\n2020-10-24 23:15:44,143 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 67 ms.\r\n2020-10-24 23:15:44,143 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]\r\n2020-10-24 23:15:44,144 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles\r\n2020-10-24 23:15:44,145 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals\r\n2020-10-24 23:15:44,146 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users\r\n2020-10-24 23:15:44,147 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000\r\n2020-10-24 23:15:44,148 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')\r\n2020-10-24 23:15:44,149 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)\r\n2020-10-24 23:15:44,150 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)\r\n2020-10-24 23:15:44,150 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.\r\n2020-10-24 23:15:44,151 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-24 23:15:44,163 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-24 23:15:46,409 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-24 23:15:46,421 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-24 23:15:46,466 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23778712<open>)] for JPA transaction\r\n2020-10-24 23:15:46,471 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:46,503 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965] read-only\r\n2020-10-24 23:15:46,507 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d6300a]\r\n2020-10-24 23:15:46,556 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:15:46,556 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(23778712<open>)]\r\n2020-10-24 23:15:46,557 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965]\r\n2020-10-24 23:15:46,557 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23778712<open>)] after transaction\r\n2020-10-24 23:15:48,318 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100008 for user 100000\r\n2020-10-24 23:15:48,318 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.delete]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n2020-10-24 23:15:48,318 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29988437<open>)] for JPA transaction\r\n2020-10-24 23:15:48,318 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:48,452 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@131fd25]\r\n2020-10-24 23:15:48,457 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:15:48,457 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(29988437<open>)]\r\n2020-10-24 23:15:48,458 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29988437<open>)] after transaction\r\n2020-10-24 23:15:48,463 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-24 23:15:48,463 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-24 23:15:48,463 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(17040240<open>)] for JPA transaction\r\n2020-10-24 23:15:48,463 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:48,495 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1c3e1e0] read-only\r\n2020-10-24 23:15:48,496 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1fc6800]\r\n2020-10-24 23:15:48,499 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:15:48,499 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(17040240<open>)]\r\n2020-10-24 23:15:48,500 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1c3e1e0]\r\n2020-10-24 23:15:48,500 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(17040240<open>)] after transaction\r\n2020-10-24 23:15:51,003 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100007 for user 100000\r\n2020-10-24 23:15:51,004 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.delete]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n2020-10-24 23:15:51,004 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(18077078<open>)] for JPA transaction\r\n2020-10-24 23:15:51,004 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:51,036 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d43004]\r\n2020-10-24 23:15:51,038 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:15:51,038 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(18077078<open>)]\r\n2020-10-24 23:15:51,039 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(18077078<open>)] after transaction\r\n2020-10-24 23:15:51,041 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-24 23:15:51,041 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-24 23:15:51,041 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(20346559<open>)] for JPA transaction\r\n2020-10-24 23:15:51,042 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:51,074 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1f19ca9] read-only\r\n2020-10-24 23:15:51,074 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1ce1dcf]\r\n2020-10-24 23:15:51,077 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:15:51,077 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(20346559<open>)]\r\n2020-10-24 23:15:51,078 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1f19ca9]\r\n2020-10-24 23:15:51,078 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(20346559<open>)] after transaction\r\n2020-10-24 23:15:51,800 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100006 for user 100000\r\n2020-10-24 23:15:51,801 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.delete]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n2020-10-24 23:15:51,801 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(18372789<open>)] for JPA transaction\r\n2020-10-24 23:15:51,801 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:51,833 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1e033c5]\r\n2020-10-24 23:15:51,835 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:15:51,836 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(18372789<open>)]\r\n2020-10-24 23:15:51,836 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(18372789<open>)] after transaction\r\n2020-10-24 23:15:51,838 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-24 23:15:51,838 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-24 23:15:51,839 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(3974536<open>)] for JPA transaction\r\n2020-10-24 23:15:51,839 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:51,870 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@fb497f] read-only\r\n2020-10-24 23:15:51,870 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@c4cef8]\r\n2020-10-24 23:15:51,873 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:15:51,873 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(3974536<open>)]\r\n2020-10-24 23:15:51,873 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@fb497f]\r\n2020-10-24 23:15:51,873 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(3974536<open>)] after transaction\r\n2020-10-24 23:15:55,584 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-24T23:15, description='f', calories=1000} for user 100000\r\n2020-10-24 23:15:55,585 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n2020-10-24 23:15:55,585 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(9105496<open>)] for JPA transaction\r\n2020-10-24 23:15:55,585 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:55,617 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@146abe6]\r\n2020-10-24 23:15:55,632 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:15:55,632 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(9105496<open>)]\r\n2020-10-24 23:15:55,666 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(9105496<open>)] after transaction\r\n2020-10-24 23:15:55,668 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-24 23:15:55,668 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-24 23:15:55,668 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23308284<open>)] for JPA transaction\r\n2020-10-24 23:15:55,668 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:15:55,700 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@2dcc7b] read-only\r\n2020-10-24 23:15:55,700 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4cf4b3]\r\n2020-10-24 23:15:55,703 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:15:55,703 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(23308284<open>)]\r\n2020-10-24 23:15:55,703 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@2dcc7b]\r\n2020-10-24 23:15:55,703 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23308284<open>)] after transaction\r\n2020-10-24 23:16:00,613 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-24T23:15, description='ff', calories=1000} for user 100000\r\n2020-10-24 23:16:00,613 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n2020-10-24 23:16:00,613 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(21722998<open>)] for JPA transaction\r\n2020-10-24 23:16:00,613 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:16:00,646 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@fca8b6]\r\n2020-10-24 23:16:00,647 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:16:00,647 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(21722998<open>)]\r\n2020-10-24 23:16:00,661 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 23505\r\n2020-10-24 23:16:00,661 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности \"meals_unique_user_datetime_idx\"\r\n  Подробности: Ключ \"(user_id, date_time)=(100000, 2020-10-24 23:15:00)\" уже существует.\r\n2020-10-24 23:16:00,668 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollbackOnCommitException:890 - Initiating transaction rollback after commit exception\r\norg.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:298)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:255)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:538)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:633)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:386)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy57.save(Unknown Source)\r\n\tat ru.javawebinar.topjava.service.MealService.create(MealService.java:48)\r\n\tat ru.javawebinar.topjava.web.meal.MealRestController.create(MealRestController.java:52)\r\n\tat ru.javawebinar.topjava.web.MealServlet.doPost(MealServlet.java:49)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:660)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:688)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1639)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:109)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3260)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3787)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)\r\n\tat org.hibernate.engine.spi.ActionQueue$$Lambda$217/17775468.accept(Unknown Source)\r\n\tat java.util.LinkedHashMap.forEach(LinkedHashMap.java:676)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:348)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)\r\n\tat org.hibernate.internal.SessionImpl$$Lambda$210/7021866.accept(Unknown Source)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:102)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1362)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:453)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3212)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2380)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:447)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:534)\r\n\t... 35 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности \"meals_unique_user_datetime_idx\"\r\n  Подробности: Ключ \"(user_id, date_time)=(100000, 2020-10-24 23:15:00)\" уже существует.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:473)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:393)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:164)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 57 common frames omitted\r\n2020-10-24 23:16:00,669 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(21722998<open>)]\r\n2020-10-24 23:16:00,669 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(21722998<open>)] after transaction\r\n2020-10-24 23:16:41,081 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-24T23:15, description='ff', calories=1000} for user 100000\r\n2020-10-24 23:16:41,081 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n2020-10-24 23:16:41,081 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(20223114<open>)] for JPA transaction\r\n2020-10-24 23:16:41,081 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:16:41,115 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@101d417]\r\n2020-10-24 23:16:41,115 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:16:41,116 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(20223114<open>)]\r\n2020-10-24 23:16:41,120 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 23505\r\n2020-10-24 23:16:41,120 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности \"meals_unique_user_datetime_idx\"\r\n  Подробности: Ключ \"(user_id, date_time)=(100000, 2020-10-24 23:15:00)\" уже существует.\r\n2020-10-24 23:16:41,121 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollbackOnCommitException:890 - Initiating transaction rollback after commit exception\r\norg.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:298)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:255)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:538)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:633)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:386)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy57.save(Unknown Source)\r\n\tat ru.javawebinar.topjava.service.MealService.create(MealService.java:48)\r\n\tat ru.javawebinar.topjava.web.meal.MealRestController.create(MealRestController.java:52)\r\n\tat ru.javawebinar.topjava.web.MealServlet.doPost(MealServlet.java:49)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:660)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:688)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1639)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:109)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3260)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3787)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)\r\n\tat org.hibernate.engine.spi.ActionQueue$$Lambda$217/17775468.accept(Unknown Source)\r\n\tat java.util.LinkedHashMap.forEach(LinkedHashMap.java:676)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:348)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)\r\n\tat org.hibernate.internal.SessionImpl$$Lambda$210/7021866.accept(Unknown Source)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:102)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1362)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:453)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3212)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2380)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:447)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:534)\r\n\t... 35 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ОШИБКА: повторяющееся значение ключа нарушает ограничение уникальности \"meals_unique_user_datetime_idx\"\r\n  Подробности: Ключ \"(user_id, date_time)=(100000, 2020-10-24 23:15:00)\" уже существует.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:473)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:393)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:164)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:130)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 57 common frames omitted\r\n2020-10-24 23:16:41,121 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(20223114<open>)]\r\n2020-10-24 23:16:41,121 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(20223114<open>)] after transaction\r\n2020-10-24 23:16:53,403 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-24T23:16, description='ff', calories=1000} for user 100000\r\n2020-10-24 23:16:53,403 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n2020-10-24 23:16:53,403 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(22583191<open>)] for JPA transaction\r\n2020-10-24 23:16:53,403 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:16:53,440 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1a76353]\r\n2020-10-24 23:16:53,441 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:16:53,441 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(22583191<open>)]\r\n2020-10-24 23:16:53,444 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(22583191<open>)] after transaction\r\n2020-10-24 23:16:53,446 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-24 23:16:53,446 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-24 23:16:53,446 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(27266316<open>)] for JPA transaction\r\n2020-10-24 23:16:53,447 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:16:53,478 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@16c35f7] read-only\r\n2020-10-24 23:16:53,478 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1e401e]\r\n2020-10-24 23:16:53,480 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:16:53,480 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(27266316<open>)]\r\n2020-10-24 23:16:53,481 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@16c35f7]\r\n2020-10-24 23:16:53,481 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(27266316<open>)] after transaction\r\n2020-10-24 23:17:05,187 INFO  ru.javawebinar.topjava.web.meal.MealRestController.create:51 - create Meal{id=null, dateTime=2020-10-24T23:17, description='bc', calories=1000} for user 100000\r\n2020-10-24 23:17:05,188 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n2020-10-24 23:17:05,188 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(17381245<open>)] for JPA transaction\r\n2020-10-24 23:17:05,188 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:17:05,221 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@507181]\r\n2020-10-24 23:17:05,222 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:17:05,222 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(17381245<open>)]\r\n2020-10-24 23:17:05,225 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(17381245<open>)] after transaction\r\n2020-10-24 23:17:05,227 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-24 23:17:05,227 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-24 23:17:05,227 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23498467<open>)] for JPA transaction\r\n2020-10-24 23:17:05,227 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:17:05,258 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1e94666] read-only\r\n2020-10-24 23:17:05,259 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3317e9]\r\n2020-10-24 23:17:05,262 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-24 23:17:05,262 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(23498467<open>)]\r\n2020-10-24 23:17:05,262 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1e94666]\r\n2020-10-24 23:17:05,262 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23498467<open>)] after transaction\r\n2020-10-24 23:19:33,871 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@dcd7bb, started on Sat Oct 24 23:15:41 MSK 2020\r\n2020-10-24 23:19:33,871 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-24 23:19:33,871 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-24 23:19:33,904 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:16:54,920 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@b38979\r\n2020-10-25 16:16:55,140 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 16:16:55,140 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 16:16:55,173 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 16:16:55,173 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 16:16:55,173 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 16:16:55,174 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 16:16:55,199 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 16:16:55,199 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 16:16:55,213 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 16:16:55,249 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 16:16:55,303 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 16:16:55,342 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 16:16:55,343 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 16:16:55,344 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 16:16:55,345 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 16:16:55,347 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 16:16:55,351 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 16:16:55,352 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 16:16:55,383 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 16:16:55,503 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 16:16:55,504 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 16:16:55,522 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 16:16:55,534 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 16:16:55,550 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:16:55,575 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 16:16:55,665 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 16:16:55,845 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 16:16:56,046 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:16:56,240 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 16:16:56,718 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 16:16:57,446 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-25 16:16:57,576 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:16:57,579 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-25 16:16:57,587 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-25 16:16:57,608 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-25 16:16:57,609 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-25 16:16:57,609 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-25 16:16:57,611 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-25 16:16:57,612 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-25 16:16:57,612 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-25 16:16:57,613 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-25 16:16:57,617 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-25 16:16:57,617 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-25 16:16:57,624 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-25 16:16:57,638 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-25 16:16:59,402 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-25 16:16:59,421 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 16:16:59,475 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23571789<open>)] for JPA transaction\r\n2020-10-25 16:16:59,479 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:16:59,514 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@122aaaa] read-only\r\n2020-10-25 16:16:59,518 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d90f57]\r\n2020-10-25 16:16:59,557 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 42P01\r\n2020-10-25 16:16:59,557 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: отношение \"meals\" не существует\r\n  Позиция: 182\r\n2020-10-25 16:16:59,562 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback\r\n2020-10-25 16:16:59,562 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(23571789<open>)]\r\n2020-10-25 16:16:59,564 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@122aaaa]\r\n2020-10-25 16:16:59,564 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23571789<open>)] after transaction\r\n2020-10-25 16:17:30,257 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@b38979, started on Sun Oct 25 16:16:54 MSK 2020\r\n2020-10-25 16:17:30,258 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:17:43,224 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@f338bf\r\n2020-10-25 16:17:43,384 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 16:17:43,385 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 16:17:43,419 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 16:17:43,419 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 16:17:43,420 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 16:17:43,420 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 16:17:43,446 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 16:17:43,446 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 16:17:43,459 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 16:17:43,496 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 16:17:43,549 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 16:17:43,586 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 16:17:43,587 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 16:17:43,587 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 16:17:43,589 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 16:17:43,590 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 16:17:43,595 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 16:17:43,595 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 16:17:43,627 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 16:17:43,739 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 16:17:43,740 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 16:17:43,757 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 16:17:43,770 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 16:17:43,786 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:17:43,804 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 16:17:43,878 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 16:17:44,072 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 16:17:44,249 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:17:44,421 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 16:17:44,839 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 16:17:45,527 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-25 16:17:45,648 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:17:45,651 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-25 16:17:45,690 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-25 16:17:45,711 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-25 16:17:45,712 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-25 16:17:45,713 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-25 16:17:45,715 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-25 16:17:45,715 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-25 16:17:45,716 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-25 16:17:45,717 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-25 16:17:45,720 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-25 16:17:45,721 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-25 16:17:45,728 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-25 16:17:45,739 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-25 16:17:51,266 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-25 16:17:51,280 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 16:17:51,338 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(13128760<open>)] for JPA transaction\r\n2020-10-25 16:17:51,343 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:17:51,479 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@6fb30f] read-only\r\n2020-10-25 16:17:51,482 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@ef8443]\r\n2020-10-25 16:17:51,513 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 42P01\r\n2020-10-25 16:17:51,513 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: отношение \"meals\" не существует\r\n  Позиция: 182\r\n2020-10-25 16:17:51,517 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback\r\n2020-10-25 16:17:51,517 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(13128760<open>)]\r\n2020-10-25 16:17:51,519 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@6fb30f]\r\n2020-10-25 16:17:51,519 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(13128760<open>)] after transaction\r\n2020-10-25 16:20:17,304 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@f338bf, started on Sun Oct 25 16:17:43 MSK 2020\r\n2020-10-25 16:20:17,305 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:20:29,151 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@c92dba\r\n2020-10-25 16:20:29,312 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 16:20:29,313 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 16:20:29,347 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 16:20:29,347 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 16:20:29,348 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 16:20:29,348 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 16:20:29,371 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 16:20:29,372 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 16:20:29,387 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 16:20:29,421 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 16:20:29,474 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 16:20:29,510 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 16:20:29,511 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 16:20:29,511 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 16:20:29,513 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 16:20:29,514 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 16:20:29,518 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 16:20:29,519 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 16:20:29,550 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 16:20:29,660 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 16:20:29,662 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 16:20:29,678 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 16:20:29,691 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 16:20:29,707 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:20:29,725 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 16:20:29,795 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 16:20:29,990 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 16:20:30,168 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:20:30,329 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 16:20:30,739 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 16:20:31,414 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-25 16:20:31,564 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:20:31,567 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-25 16:20:31,574 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-25 16:20:31,594 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-25 16:20:31,595 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-25 16:20:31,596 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-25 16:20:31,598 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-25 16:20:31,598 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-25 16:20:31,599 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-25 16:20:31,600 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-25 16:20:31,603 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-25 16:20:31,604 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-25 16:20:31,611 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-25 16:20:31,624 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-25 16:20:41,145 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-25 16:20:41,164 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 16:20:41,212 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(13128760<open>)] for JPA transaction\r\n2020-10-25 16:20:41,216 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:20:41,251 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@6fb30f] read-only\r\n2020-10-25 16:20:41,255 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@ef8443]\r\n2020-10-25 16:20:41,289 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 42P01\r\n2020-10-25 16:20:41,289 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: отношение \"meals\" не существует\r\n  Позиция: 182\r\n2020-10-25 16:20:41,293 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback\r\n2020-10-25 16:20:41,293 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(13128760<open>)]\r\n2020-10-25 16:20:41,295 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@6fb30f]\r\n2020-10-25 16:20:41,295 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(13128760<open>)] after transaction\r\n2020-10-25 16:27:32,913 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@c92dba, started on Sun Oct 25 16:20:29 MSK 2020\r\n2020-10-25 16:27:32,914 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:27:44,870 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@19e86a4\r\n2020-10-25 16:27:45,031 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 16:27:45,031 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 16:27:45,065 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 16:27:45,066 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 16:27:45,066 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 16:27:45,066 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 16:27:45,091 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 16:27:45,091 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 16:27:45,104 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 16:27:45,141 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 16:27:45,193 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 16:27:45,229 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 16:27:45,231 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 16:27:45,231 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 16:27:45,232 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 16:27:45,233 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 16:27:45,238 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 16:27:45,238 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 16:27:45,269 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 16:27:45,381 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 16:27:45,383 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 16:27:45,399 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 16:27:45,413 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 16:27:45,429 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:27:45,447 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 16:27:45,518 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 16:27:45,690 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 16:27:45,886 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:27:46,048 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 16:27:46,463 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 16:27:47,136 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-25 16:27:47,254 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:27:47,257 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-25 16:27:47,264 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-25 16:27:47,286 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-25 16:27:47,287 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-25 16:27:47,288 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-25 16:27:47,290 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-25 16:27:47,291 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-25 16:27:47,291 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-25 16:27:47,292 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-25 16:27:47,296 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-25 16:27:47,296 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-25 16:27:47,303 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-25 16:27:47,317 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-25 16:27:49,257 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-25 16:27:49,271 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 16:27:49,353 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(33534878<open>)] for JPA transaction\r\n2020-10-25 16:27:49,358 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:27:49,392 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@18a9cc2] read-only\r\n2020-10-25 16:27:49,395 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@73b35f]\r\n2020-10-25 16:27:49,426 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:137 - SQL Error: 0, SQLState: 42P01\r\n2020-10-25 16:27:49,426 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions:142 - ОШИБКА: отношение \"meals\" не существует\r\n  Позиция: 182\r\n2020-10-25 16:27:49,430 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback\r\n2020-10-25 16:27:49,430 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(33534878<open>)]\r\n2020-10-25 16:27:49,432 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@18a9cc2]\r\n2020-10-25 16:27:49,432 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(33534878<open>)] after transaction\r\n2020-10-25 16:35:33,194 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@19e86a4, started on Sun Oct 25 16:27:44 MSK 2020\r\n2020-10-25 16:35:33,194 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:35:46,513 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@13e7b96\r\n2020-10-25 16:35:46,673 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 16:35:46,673 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 16:35:46,707 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 16:35:46,708 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 16:35:46,708 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 16:35:46,709 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 16:35:46,734 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 16:35:46,735 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 16:35:46,748 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 16:35:46,784 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 16:35:46,835 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 16:35:46,871 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 16:35:46,872 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 16:35:46,873 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 16:35:46,874 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 16:35:46,875 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 16:35:46,880 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 16:35:46,880 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 16:35:46,910 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 16:35:47,021 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 16:35:47,023 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 16:35:47,041 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 16:35:47,052 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 16:35:47,068 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:35:47,090 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 16:35:47,159 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 16:35:47,352 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 16:35:47,525 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:35:47,685 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 16:35:47,972 WARN  o.h.boot.internal.SessionFactoryOptionsBuilder.<init>:409 - Unrecognized hibernate.hbm2ddl.auto value: 'true'.  Supported values include 'create', 'create-drop', 'create-only', 'drop', 'update', 'none' and 'validate'.  Ignoring\r\n2020-10-25 16:35:48,097 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 16:35:48,769 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:559 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [spring/spring-db.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.IllegalArgumentException: Unrecognized legacy `hibernate.hbm2ddl.auto` value : `true`\r\n2020-10-25 16:35:50,849 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1040370\r\n2020-10-25 16:35:50,866 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 16:35:50,866 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 16:35:50,871 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 16:35:50,871 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 16:35:50,871 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 16:35:50,872 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 16:35:50,882 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 16:35:50,882 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 16:35:50,883 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 16:35:50,884 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 16:35:50,889 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 16:35:50,906 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 16:35:50,906 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 16:35:50,907 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 16:35:50,907 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 16:35:50,908 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 16:35:50,908 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 16:35:50,909 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 16:35:50,923 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 16:35:50,941 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 16:35:50,942 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 16:35:50,949 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 16:35:50,955 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 16:35:50,963 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:35:50,963 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 16:35:50,973 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:35:51,005 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 16:35:51,028 WARN  o.h.boot.internal.SessionFactoryOptionsBuilder.<init>:409 - Unrecognized hibernate.hbm2ddl.auto value: 'true'.  Supported values include 'create', 'create-drop', 'create-only', 'drop', 'update', 'none' and 'validate'.  Ignoring\r\n2020-10-25 16:35:51,068 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:559 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [spring/spring-db.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.IllegalArgumentException: Unrecognized legacy `hibernate.hbm2ddl.auto` value : `true`\r\n2020-10-25 16:37:25,199 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1439818\r\n2020-10-25 16:37:25,360 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 16:37:25,360 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 16:37:25,394 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 16:37:25,395 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 16:37:25,395 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 16:37:25,396 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 16:37:25,419 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 16:37:25,420 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 16:37:25,435 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 16:37:25,471 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 16:37:25,522 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 16:37:25,560 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 16:37:25,561 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 16:37:25,561 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 16:37:25,562 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 16:37:25,564 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 16:37:25,568 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 16:37:25,569 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 16:37:25,599 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 16:37:25,710 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 16:37:25,711 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 16:37:25,729 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 16:37:25,741 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 16:37:25,757 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:37:25,777 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 16:37:25,847 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 16:37:26,039 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 16:37:26,214 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:37:26,375 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 16:37:26,663 WARN  o.h.boot.internal.SessionFactoryOptionsBuilder.<init>:409 - Unrecognized hibernate.hbm2ddl.auto value: 'true'.  Supported values include 'create', 'create-drop', 'create-only', 'drop', 'update', 'none' and 'validate'.  Ignoring\r\n2020-10-25 16:37:26,788 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 16:37:27,456 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:559 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [spring/spring-db.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is java.lang.IllegalArgumentException: Unrecognized legacy `hibernate.hbm2ddl.auto` value : `true`\r\n2020-10-25 16:38:03,415 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@127ef92\r\n2020-10-25 16:38:03,575 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 16:38:03,576 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 16:38:03,609 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 16:38:03,610 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 16:38:03,610 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 16:38:03,610 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 16:38:03,634 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 16:38:03,634 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 16:38:03,647 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 16:38:03,683 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 16:38:03,735 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 16:38:03,771 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 16:38:03,772 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 16:38:03,773 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 16:38:03,774 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 16:38:03,775 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 16:38:03,780 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 16:38:03,780 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 16:38:03,812 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 16:38:03,921 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 16:38:03,923 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 16:38:03,939 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 16:38:03,952 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 16:38:03,968 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:38:03,985 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 16:38:04,057 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 16:38:04,252 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 16:38:04,426 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:38:04,583 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 16:38:04,995 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 16:38:05,678 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:38:05,715 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000\r\n2020-10-25 16:38:05,715 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - отношение \"meals\" не существует, пропускается\r\n2020-10-25 16:38:05,716 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000\r\n2020-10-25 16:38:05,716 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - отношение \"user_roles\" не существует, пропускается\r\n2020-10-25 16:38:05,716 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000\r\n2020-10-25 16:38:05,716 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - таблица \"meals\" не существует, пропускается\r\n2020-10-25 16:38:05,717 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000\r\n2020-10-25 16:38:05,717 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - таблица \"user_roles\" не существует, пропускается\r\n2020-10-25 16:38:05,717 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000\r\n2020-10-25 16:38:05,717 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - таблица \"users\" не существует, пропускается\r\n2020-10-25 16:38:05,723 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:38:05,845 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-25 16:38:05,963 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:38:05,966 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-25 16:38:05,974 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-25 16:38:05,997 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-25 16:38:05,998 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-25 16:38:05,999 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-25 16:38:06,001 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-25 16:38:06,001 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-25 16:38:06,002 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-25 16:38:06,003 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-25 16:38:06,006 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-25 16:38:06,007 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-25 16:38:06,014 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-25 16:38:06,058 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-25 16:38:08,238 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-25 16:38:08,251 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 16:38:08,298 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(14234096<open>)] for JPA transaction\r\n2020-10-25 16:38:08,303 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:38:08,342 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1d5d818] read-only\r\n2020-10-25 16:38:08,345 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1628e20]\r\n2020-10-25 16:38:08,369 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 16:38:08,369 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(14234096<open>)]\r\n2020-10-25 16:38:08,370 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1d5d818]\r\n2020-10-25 16:38:08,370 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(14234096<open>)] after transaction\r\n2020-10-25 16:38:46,969 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@127ef92, started on Sun Oct 25 16:38:03 MSK 2020\r\n2020-10-25 16:38:46,969 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:47:02,662 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1e5c4d4\r\n2020-10-25 16:47:02,823 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 16:47:02,823 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 16:47:02,857 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 16:47:02,857 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 16:47:02,858 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 16:47:02,858 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 16:47:02,881 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 16:47:02,882 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 16:47:02,896 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 16:47:02,931 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 16:47:02,983 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 16:47:03,019 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 16:47:03,020 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 16:47:03,020 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 16:47:03,021 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 16:47:03,023 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 16:47:03,027 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 16:47:03,028 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 16:47:03,058 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 16:47:03,169 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 16:47:03,171 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 16:47:03,187 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 16:47:03,200 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 16:47:03,216 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:47:03,233 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 16:47:03,303 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 16:47:03,494 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 16:47:03,668 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:47:03,827 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 16:47:04,238 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 16:47:04,917 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:47:04,953 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000\r\n2020-10-25 16:47:04,953 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - отношение \"meals\" не существует, пропускается\r\n2020-10-25 16:47:04,956 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000\r\n2020-10-25 16:47:04,956 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - таблица \"meals\" не существует, пропускается\r\n2020-10-25 16:47:04,965 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:47:05,045 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-25 16:47:05,196 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:47:05,199 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-25 16:47:05,206 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-25 16:47:05,227 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-25 16:47:05,228 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-25 16:47:05,229 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-25 16:47:05,230 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-25 16:47:05,231 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-25 16:47:05,232 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-25 16:47:05,232 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-25 16:47:05,236 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-25 16:47:05,237 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-25 16:47:05,246 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-25 16:47:05,258 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-25 16:55:28,720 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@1e5c4d4, started on Sun Oct 25 16:47:02 MSK 2020\r\n2020-10-25 16:55:28,721 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:55:39,509 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@c92dba\r\n2020-10-25 16:55:39,671 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 16:55:39,672 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 16:55:39,706 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 16:55:39,706 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 16:55:39,707 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 16:55:39,707 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 16:55:39,730 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 16:55:39,731 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 16:55:39,746 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 12 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 16:55:39,780 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 16:55:39,832 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 16:55:39,868 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 16:55:39,869 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 16:55:39,870 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 16:55:39,871 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 16:55:39,873 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 16:55:39,877 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 16:55:39,877 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 16:55:39,907 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 16:55:40,017 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 16:55:40,019 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 16:55:40,035 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 16:55:40,048 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 16:55:40,064 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:55:40,083 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 16:55:40,152 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 16:55:40,344 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 16:55:40,518 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:55:40,683 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 16:55:41,094 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 16:55:41,774 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:55:41,910 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000\r\n2020-10-25 16:55:41,910 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - ограничение \"fk677c66qpjr7234luomahc1ale\" в таблице \"meals\" не существует, пропускается\r\n2020-10-25 16:55:41,911 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:230 - SQL Warning Code: 0, SQLState: 00000\r\n2020-10-25 16:55:41,911 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logWarning:231 - ограничение \"fkhfh9dx7w3ubf1co1vdev94g3f\" в таблице \"user_roles\" не существует, пропускается\r\n2020-10-25 16:55:41,923 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 16:55:42,006 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-25 16:55:42,156 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 16:55:42,158 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-25 16:55:42,165 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-25 16:55:42,186 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-25 16:55:42,187 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-25 16:55:42,187 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-25 16:55:42,189 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-25 16:55:42,190 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-25 16:55:42,190 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-25 16:55:42,191 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-25 16:55:42,196 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-25 16:55:42,197 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-25 16:55:42,207 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-25 16:55:42,218 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-25 17:26:56,571 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@c92dba, started on Sun Oct 25 16:55:39 MSK 2020\r\n2020-10-25 17:26:56,572 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 17:33:04,884 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@13879c5\r\n2020-10-25 17:33:05,046 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 17:33:05,047 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 17:33:05,083 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 17:33:05,084 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 17:33:05,084 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 17:33:05,084 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 17:33:05,113 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 17:33:05,113 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 17:33:05,132 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 17:33:05,169 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 17:33:05,220 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 17:33:05,257 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 17:33:05,259 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 17:33:05,259 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 17:33:05,260 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 17:33:05,262 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 17:33:05,268 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 17:33:05,268 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 17:33:05,298 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 17:33:05,408 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 17:33:05,410 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 17:33:05,429 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 17:33:05,440 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 17:33:05,459 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 17:33:05,477 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 17:33:05,570 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 17:33:05,743 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 17:33:05,921 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:33:06,087 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 17:33:06,502 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 17:33:07,209 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-25 17:33:07,363 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 17:33:07,366 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-25 17:33:07,373 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-25 17:33:07,394 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-25 17:33:07,395 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-25 17:33:07,395 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-25 17:33:07,397 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-25 17:33:07,398 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-25 17:33:07,398 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-25 17:33:07,399 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-25 17:33:07,403 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-25 17:33:07,403 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-25 17:33:07,410 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'\r\n2020-10-25 17:33:07,434 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-25 17:33:07,434 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:33:07,467 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]\r\n2020-10-25 17:33:07,475 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles\r\n2020-10-25 17:33:07,477 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals\r\n2020-10-25 17:33:07,480 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users\r\n2020-10-25 17:33:07,480 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq\r\n2020-10-25 17:33:07,483 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000\r\n2020-10-25 17:33:07,499 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )\r\n2020-10-25 17:33:07,504 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)\r\n2020-10-25 17:33:07,517 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-25 17:33:07,528 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-25 17:33:07,534 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)\r\n2020-10-25 17:33:07,534 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 67 ms.\r\n2020-10-25 17:33:07,534 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]\r\n2020-10-25 17:33:07,536 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles\r\n2020-10-25 17:33:07,537 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals\r\n2020-10-25 17:33:07,538 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users\r\n2020-10-25 17:33:07,539 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000\r\n2020-10-25 17:33:07,540 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')\r\n2020-10-25 17:33:07,541 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)\r\n2020-10-25 17:33:07,542 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)\r\n2020-10-25 17:33:07,542 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 8 ms.\r\n2020-10-25 17:33:07,543 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-25 17:33:07,556 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-25 17:33:10,349 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-25 17:33:10,361 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:33:10,407 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(2581969<open>)] for JPA transaction\r\n2020-10-25 17:33:10,412 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:33:10,443 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@f8e507] read-only\r\n2020-10-25 17:33:10,447 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1fecbca]\r\n2020-10-25 17:33:10,497 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:33:10,498 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(2581969<open>)]\r\n2020-10-25 17:33:10,499 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@f8e507]\r\n2020-10-25 17:33:10,499 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(2581969<open>)] after transaction\r\n2020-10-25 17:33:12,591 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100008 for user 100000\r\n2020-10-25 17:33:12,592 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.delete]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n2020-10-25 17:33:12,593 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(5676216<open>)] for JPA transaction\r\n2020-10-25 17:33:12,593 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:33:12,625 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@aef7c8]\r\n2020-10-25 17:33:12,630 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:33:12,630 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(5676216<open>)]\r\n2020-10-25 17:33:12,631 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(5676216<open>)] after transaction\r\n2020-10-25 17:33:12,635 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-25 17:33:12,635 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:33:12,636 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29840049<open>)] for JPA transaction\r\n2020-10-25 17:33:12,636 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:33:12,768 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@100b339] read-only\r\n2020-10-25 17:33:12,768 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@13f39c1]\r\n2020-10-25 17:33:12,771 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:33:12,771 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(29840049<open>)]\r\n2020-10-25 17:33:12,771 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@100b339]\r\n2020-10-25 17:33:12,771 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29840049<open>)] after transaction\r\n2020-10-25 17:37:24,003 INFO  ru.javawebinar.topjava.web.meal.MealRestController.get:32 - get meal 100007 for user 100000\r\n2020-10-25 17:37:24,004 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.get]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:37:24,004 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(17193591<open>)] for JPA transaction\r\n2020-10-25 17:37:24,004 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:37:24,037 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1c1ab27] read-only\r\n2020-10-25 17:37:24,037 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1fe3107]\r\n2020-10-25 17:37:24,049 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:37:24,050 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(17193591<open>)]\r\n2020-10-25 17:37:24,050 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1c1ab27]\r\n2020-10-25 17:37:24,050 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(17193591<open>)] after transaction\r\n2020-10-25 17:37:31,894 INFO  ru.javawebinar.topjava.web.meal.MealRestController.update:58 - update Meal{id=100007, dateTime=2020-01-31T13:00, description='Обед', calories=1009} for user 100000\r\n2020-10-25 17:37:31,894 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT\r\n2020-10-25 17:37:31,894 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(32617104<open>)] for JPA transaction\r\n2020-10-25 17:37:31,894 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:37:31,926 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1cdce6d]\r\n2020-10-25 17:37:31,940 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:37:31,940 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(32617104<open>)]\r\n2020-10-25 17:37:31,973 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(32617104<open>)] after transaction\r\n2020-10-25 17:37:31,975 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-25 17:37:31,976 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:37:31,976 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(33229913<open>)] for JPA transaction\r\n2020-10-25 17:37:31,976 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:37:32,007 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@6607cc] read-only\r\n2020-10-25 17:37:32,007 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6f6009]\r\n2020-10-25 17:37:32,010 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:37:32,010 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(33229913<open>)]\r\n2020-10-25 17:37:32,010 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@6607cc]\r\n2020-10-25 17:37:32,011 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(33229913<open>)] after transaction\r\n2020-10-25 17:40:54,564 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@13879c5, started on Sun Oct 25 17:33:04 MSK 2020\r\n2020-10-25 17:40:54,564 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-25 17:40:54,564 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:40:54,597 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 17:41:05,965 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1ebe4ac\r\n2020-10-25 17:41:06,127 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 17:41:06,128 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 17:41:06,160 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 17:41:06,160 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 17:41:06,161 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 17:41:06,161 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 17:41:06,188 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 17:41:06,188 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 17:41:06,209 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 17:41:06,245 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 17:41:06,299 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 17:41:06,335 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 17:41:06,336 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 17:41:06,337 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 17:41:06,338 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 17:41:06,339 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 17:41:06,344 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 17:41:06,344 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 17:41:06,376 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 17:41:06,486 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 17:41:06,488 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 17:41:06,505 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 17:41:06,517 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 17:41:06,533 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 17:41:06,553 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 17:41:06,622 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 17:41:06,814 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 17:41:06,988 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:41:07,152 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 17:41:07,562 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 17:41:08,235 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-25 17:41:08,352 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 17:41:08,355 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-25 17:41:08,362 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-25 17:41:08,382 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-25 17:41:08,383 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-25 17:41:08,383 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-25 17:41:08,385 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-25 17:41:08,386 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-25 17:41:08,386 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-25 17:41:08,387 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-25 17:41:08,391 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-25 17:41:08,391 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-25 17:41:08,401 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'\r\n2020-10-25 17:41:08,420 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-25 17:41:08,421 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:41:08,453 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]\r\n2020-10-25 17:41:08,461 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles\r\n2020-10-25 17:41:08,464 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals\r\n2020-10-25 17:41:08,467 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users\r\n2020-10-25 17:41:08,468 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq\r\n2020-10-25 17:41:08,471 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000\r\n2020-10-25 17:41:08,484 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )\r\n2020-10-25 17:41:08,490 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)\r\n2020-10-25 17:41:08,502 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-25 17:41:08,514 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-25 17:41:08,519 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)\r\n2020-10-25 17:41:08,520 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 67 ms.\r\n2020-10-25 17:41:08,520 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]\r\n2020-10-25 17:41:08,521 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles\r\n2020-10-25 17:41:08,522 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals\r\n2020-10-25 17:41:08,523 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users\r\n2020-10-25 17:41:08,524 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000\r\n2020-10-25 17:41:08,525 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')\r\n2020-10-25 17:41:08,526 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)\r\n2020-10-25 17:41:08,527 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)\r\n2020-10-25 17:41:08,527 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.\r\n2020-10-25 17:41:08,528 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-25 17:41:08,573 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-25 17:41:11,599 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-25 17:41:11,610 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:41:11,662 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23778712<open>)] for JPA transaction\r\n2020-10-25 17:41:11,666 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:41:11,699 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965] read-only\r\n2020-10-25 17:41:11,702 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d6300a]\r\n2020-10-25 17:41:11,747 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:41:11,747 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(23778712<open>)]\r\n2020-10-25 17:41:11,748 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965]\r\n2020-10-25 17:41:11,748 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23778712<open>)] after transaction\r\n2020-10-25 17:41:28,705 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-31 - 2020-01-31) time(null - null) for user 100000\r\n2020-10-25 17:41:28,706 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:41:28,706 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29614560<open>)] for JPA transaction\r\n2020-10-25 17:41:28,706 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:41:28,741 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@feebdb] read-only\r\n2020-10-25 17:41:28,741 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1267237]\r\n2020-10-25 17:41:28,742 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processRollback:833 - Initiating transaction rollback\r\n2020-10-25 17:41:28,742 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doRollback:555 - Rolling back JPA transaction on EntityManager [SessionImpl(29614560<open>)]\r\n2020-10-25 17:41:28,745 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@feebdb]\r\n2020-10-25 17:41:28,745 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29614560<open>)] after transaction\r\n2020-10-25 17:42:00,688 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@1ebe4ac, started on Sun Oct 25 17:41:05 MSK 2020\r\n2020-10-25 17:42:00,688 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-25 17:42:00,688 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:42:00,725 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 17:42:12,074 DEBUG o.s.context.support.ClassPathXmlApplicationContext.prepareRefresh:596 - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@cb156f\r\n2020-10-25 17:42:12,236 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\MealService.class]\r\n2020-10-25 17:42:12,236 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\service\\UserService.class]\r\n2020-10-25 17:42:12,270 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\meal\\MealRestController.class]\r\n2020-10-25 17:42:12,271 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\AdminRestController.class]\r\n2020-10-25 17:42:12,271 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\web\\user\\ProfileRestController.class]\r\n2020-10-25 17:42:12,271 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 11 bean definitions from class path resource [spring/spring-app.xml]\r\n2020-10-25 17:42:12,298 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaMealRepository.class]\r\n2020-10-25 17:42:12,299 DEBUG o.s.c.annotation.ClassPathBeanDefinitionScanner.scanCandidateComponents:435 - Identified candidate component class: file [C:\\dev\\projects\\topjava\\target\\topjava\\WEB-INF\\classes\\ru\\javawebinar\\topjava\\repository\\jpa\\JpaUserRepository.class]\r\n2020-10-25 17:42:12,317 DEBUG o.s.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions:393 - Loaded 13 bean definitions from class path resource [spring/spring-db.xml]\r\n2020-10-25 17:42:12,353 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'\r\n2020-10-25 17:42:12,404 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0'\r\n2020-10-25 17:42:12,439 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'\r\n2020-10-25 17:42:12,441 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'\r\n2020-10-25 17:42:12,441 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionalEventListenerFactory'\r\n2020-10-25 17:42:12,442 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'\r\n2020-10-25 17:42:12,444 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalCommonAnnotationProcessor'\r\n2020-10-25 17:42:12,448 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalPersistenceAnnotationProcessor'\r\n2020-10-25 17:42:12,448 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.aop.config.internalAutoProxyCreator'\r\n2020-10-25 17:42:12,479 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'entityManagerFactory'\r\n2020-10-25 17:42:12,589 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'\r\n2020-10-25 17:42:12,590 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'\r\n2020-10-25 17:42:12,608 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'dataSource'\r\n2020-10-25 17:42:12,619 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.setDriverClassName:134 - Loaded JDBC driver: org.postgresql.Driver\r\n2020-10-25 17:42:12,635 DEBUG o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:361 - Building JPA container EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 17:42:12,653 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2020-10-25 17:42:12,745 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final\r\n2020-10-25 17:42:12,914 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n2020-10-25 17:42:13,089 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:42:13,249 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2020-10-25 17:42:13,660 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final\r\n2020-10-25 17:42:14,333 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2020-10-25 17:42:14,480 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'\r\n2020-10-25 17:42:14,483 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealService'\r\n2020-10-25 17:42:14,489 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaMealRepository'\r\n2020-10-25 17:42:14,510 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealService' via constructor to bean named 'jpaMealRepository'\r\n2020-10-25 17:42:14,511 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'userService'\r\n2020-10-25 17:42:14,511 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'jpaUserRepository'\r\n2020-10-25 17:42:14,513 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'userService' via constructor to bean named 'jpaUserRepository'\r\n2020-10-25 17:42:14,514 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'mealRestController'\r\n2020-10-25 17:42:14,514 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.createArgumentArray:805 - Autowiring by type from bean name 'mealRestController' via constructor to bean named 'mealService'\r\n2020-10-25 17:42:14,515 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'adminRestController'\r\n2020-10-25 17:42:14,519 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'profileRestController'\r\n2020-10-25 17:42:14,519 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.beans.factory.config.MethodInvokingBean#0'\r\n2020-10-25 17:42:14,526 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0'\r\n2020-10-25 17:42:14,548 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-25 17:42:14,548 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:42:14,581 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/initDB.sql]\r\n2020-10-25 17:42:14,594 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS user_roles\r\n2020-10-25 17:42:14,598 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS meals\r\n2020-10-25 17:42:14,601 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users\r\n2020-10-25 17:42:14,602 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DROP SEQUENCE IF EXISTS global_seq\r\n2020-10-25 17:42:14,604 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE SEQUENCE global_seq START WITH 100000\r\n2020-10-25 17:42:14,618 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE users ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), name VARCHAR NOT NULL, email VARCHAR NOT NULL, password VARCHAR NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOL DEFAULT TRUE NOT NULL, calories_per_day INTEGER DEFAULT 2000 NOT NULL )\r\n2020-10-25 17:42:14,624 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX users_unique_email_idx ON users (email)\r\n2020-10-25 17:42:14,635 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR, CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-25 17:42:14,647 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE TABLE meals ( id INTEGER PRIMARY KEY DEFAULT nextval('global_seq'), user_id INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, description TEXT NOT NULL, calories INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE )\r\n2020-10-25 17:42:14,653 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (user_id, date_time)\r\n2020-10-25 17:42:14,653 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/initDB.sql] in 72 ms.\r\n2020-10-25 17:42:14,653 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:572 - Executing SQL script from class path resource [db/populateDB.sql]\r\n2020-10-25 17:42:14,654 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM user_roles\r\n2020-10-25 17:42:14,656 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM meals\r\n2020-10-25 17:42:14,656 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: DELETE FROM users\r\n2020-10-25 17:42:14,658 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 0 returned as update count for SQL: ALTER SEQUENCE global_seq RESTART WITH 100000\r\n2020-10-25 17:42:14,659 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO users (name, email, password) VALUES ('User', 'user@yandex.ru', 'password'), ('Admin', 'admin@gmail.com', 'admin')\r\n2020-10-25 17:42:14,659 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 2 returned as update count for SQL: INSERT INTO user_roles (role, user_id) VALUES ('USER', 100000), ('ADMIN', 100001)\r\n2020-10-25 17:42:14,660 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:604 - 9 returned as update count for SQL: INSERT INTO meals (date_time, description, calories, user_id) VALUES ('2020-01-30 10:00:00', 'Завтрак', 500, 100000), ('2020-01-30 13:00:00', 'Обед', 1000, 100000), ('2020-01-30 20:00:00', 'Ужин', 500, 100000), ('2020-01-31 0:00:00', 'Еда на граничное значение', 100, 100000), ('2020-01-31 10:00:00', 'Завтрак', 500, 100000), ('2020-01-31 13:00:00', 'Обед', 1000, 100000), ('2020-01-31 20:00:00', 'Ужин', 510, 100000), ('2020-01-31 14:00:00', 'Админ ланч', 510, 100001), ('2020-01-31 21:00:00', 'Админ ужин', 1500, 100001)\r\n2020-10-25 17:42:14,660 DEBUG o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:638 - Executed SQL script from class path resource [db/populateDB.sql] in 7 ms.\r\n2020-10-25 17:42:14,662 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'\r\n2020-10-25 17:42:14,673 DEBUG o.s.b.factory.support.DefaultListableBeanFactory.getSingleton:225 - Creating shared instance of singleton bean 'transactionManager'\r\n2020-10-25 17:42:18,166 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-25 17:42:18,178 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:42:18,224 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(23778712<open>)] for JPA transaction\r\n2020-10-25 17:42:18,228 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:42:18,261 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965] read-only\r\n2020-10-25 17:42:18,264 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d6300a]\r\n2020-10-25 17:42:18,313 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:42:18,313 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(23778712<open>)]\r\n2020-10-25 17:42:18,314 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@b4b965]\r\n2020-10-25 17:42:18,314 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(23778712<open>)] after transaction\r\n2020-10-25 17:42:25,531 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(null - 2020-01-31) time(null - null) for user 100000\r\n2020-10-25 17:42:25,532 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:42:25,532 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29614560<open>)] for JPA transaction\r\n2020-10-25 17:42:25,532 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:42:25,665 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@feebdb] read-only\r\n2020-10-25 17:42:25,665 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1267237]\r\n2020-10-25 17:42:25,675 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:42:25,675 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(29614560<open>)]\r\n2020-10-25 17:42:25,676 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@feebdb]\r\n2020-10-25 17:42:25,676 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29614560<open>)] after transaction\r\n2020-10-25 17:42:47,797 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-31 - 2020-01-31) time(null - null) for user 100000\r\n2020-10-25 17:42:47,798 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:42:47,798 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(18372789<open>)] for JPA transaction\r\n2020-10-25 17:42:47,798 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:42:47,830 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1dfba26] read-only\r\n2020-10-25 17:42:47,831 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1e033c5]\r\n2020-10-25 17:42:47,834 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:42:47,834 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(18372789<open>)]\r\n2020-10-25 17:42:47,834 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1dfba26]\r\n2020-10-25 17:42:47,834 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(18372789<open>)] after transaction\r\n2020-10-25 17:43:10,182 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-31 - 2020-01-31) time(null - 13:00) for user 100000\r\n2020-10-25 17:43:10,183 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:43:10,183 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(24716629<open>)] for JPA transaction\r\n2020-10-25 17:43:10,183 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:43:10,320 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@11d028e] read-only\r\n2020-10-25 17:43:10,320 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5dbd8d]\r\n2020-10-25 17:43:10,323 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:43:10,323 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(24716629<open>)]\r\n2020-10-25 17:43:10,323 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@11d028e]\r\n2020-10-25 17:43:10,323 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(24716629<open>)] after transaction\r\n2020-10-25 17:43:18,400 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-31 - 2020-01-31) time(10:00 - 13:00) for user 100000\r\n2020-10-25 17:43:18,400 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:43:18,400 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(4383038<open>)] for JPA transaction\r\n2020-10-25 17:43:18,400 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:43:18,433 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@1c1ee02] read-only\r\n2020-10-25 17:43:18,433 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3aa7f9]\r\n2020-10-25 17:43:18,436 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:43:18,436 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(4383038<open>)]\r\n2020-10-25 17:43:18,437 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@1c1ee02]\r\n2020-10-25 17:43:18,437 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(4383038<open>)] after transaction\r\n2020-10-25 17:43:26,683 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(2020-01-31 - 2020-01-31) time(09:30 - 13:00) for user 100000\r\n2020-10-25 17:43:26,683 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:43:26,683 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(29988437<open>)] for JPA transaction\r\n2020-10-25 17:43:26,684 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:43:26,716 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@131fd25] read-only\r\n2020-10-25 17:43:26,716 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@337927]\r\n2020-10-25 17:43:26,719 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:43:26,719 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(29988437<open>)]\r\n2020-10-25 17:43:26,719 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@131fd25]\r\n2020-10-25 17:43:26,720 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(29988437<open>)] after transaction\r\n2020-10-25 17:43:39,343 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000\r\n2020-10-25 17:43:39,343 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getAll]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:43:39,344 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(17688636<open>)] for JPA transaction\r\n2020-10-25 17:43:39,344 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:43:39,376 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@303030] read-only\r\n2020-10-25 17:43:39,376 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@746347]\r\n2020-10-25 17:43:39,379 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:43:39,379 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(17688636<open>)]\r\n2020-10-25 17:43:39,379 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@303030]\r\n2020-10-25 17:43:39,379 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(17688636<open>)] after transaction\r\n2020-10-25 17:43:56,237 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(null - null) time(10:00 - 13:00) for user 100000\r\n2020-10-25 17:43:56,237 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:43:56,237 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(20822057<open>)] for JPA transaction\r\n2020-10-25 17:43:56,237 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:43:56,270 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@15f07a1] read-only\r\n2020-10-25 17:43:56,270 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1e77d5b]\r\n2020-10-25 17:43:56,273 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:43:56,273 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(20822057<open>)]\r\n2020-10-25 17:43:56,274 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@15f07a1]\r\n2020-10-25 17:43:56,274 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(20822057<open>)] after transaction\r\n2020-10-25 17:44:02,285 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getBetween:71 - getBetween dates(null - null) time(10:00 - 13:05) for user 100000\r\n2020-10-25 17:44:02,286 DEBUG org.springframework.orm.jpa.JpaTransactionManager.getTransaction:370 - Creating new transaction with name [ru.javawebinar.topjava.repository.jpa.JpaMealRepository.getBetweenHalfOpen]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly\r\n2020-10-25 17:44:02,286 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:393 - Opened new EntityManager [SessionImpl(4904827<open>)] for JPA transaction\r\n2020-10-25 17:44:02,286 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:44:02,319 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.prepareConnectionForTransaction:186 - Setting JDBC Connection [org.postgresql.jdbc.PgConnection@4a8f0] read-only\r\n2020-10-25 17:44:02,319 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doBegin:421 - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@284c47]\r\n2020-10-25 17:44:02,322 DEBUG org.springframework.orm.jpa.JpaTransactionManager.processCommit:740 - Initiating transaction commit\r\n2020-10-25 17:44:02,322 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCommit:529 - Committing JPA transaction on EntityManager [SessionImpl(4904827<open>)]\r\n2020-10-25 17:44:02,322 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.resetConnectionAfterTransaction:250 - Resetting read-only flag of JDBC Connection [org.postgresql.jdbc.PgConnection@4a8f0]\r\n2020-10-25 17:44:02,322 DEBUG org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion:620 - Closing JPA EntityManager [SessionImpl(4904827<open>)] after transaction\r\n2020-10-25 17:47:44,359 DEBUG o.s.context.support.ClassPathXmlApplicationContext.doClose:1006 - Closing org.springframework.context.support.ClassPathXmlApplicationContext@cb156f, started on Sun Oct 25 17:42:12 MSK 2020\r\n2020-10-25 17:47:44,359 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource\r\n2020-10-25 17:47:44,359 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]\r\n2020-10-25 17:47:44,392 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- log/topjava.log	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ log/topjava.log	(date 1604312339988)
@@ -1967,3 +1967,183 @@
 2020-10-25 17:47:44,359 DEBUG o.springframework.jdbc.datasource.DataSourceUtils.doGetConnection:115 - Fetching JDBC Connection from DataSource
 2020-10-25 17:47:44,359 DEBUG o.s.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/topjava]
 2020-10-25 17:47:44,392 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
+2020-11-02 11:42:13,896 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 11:42:13,923 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 11:42:13,932 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 11:42:14,001 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 11:42:14,004 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 11:42:17,457 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 11:42:17,458 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 11:42:17,466 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 11:42:17,496 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 11:42:17,497 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 11:49:30,633 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 11:49:30,658 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 11:49:30,667 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 11:49:30,729 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 11:49:30,732 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 11:49:35,198 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 11:49:35,199 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 11:49:35,207 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 11:49:35,238 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 11:49:35,239 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:00:30,883 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:00:30,908 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:00:30,917 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:00:30,979 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:00:30,981 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:00:35,253 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:00:35,255 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:00:35,262 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:00:35,291 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:00:35,292 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:03:40,466 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:03:40,494 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:03:40,504 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:03:40,570 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:03:40,572 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:03:42,702 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:03:42,704 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:03:42,711 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:03:42,745 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:03:42,745 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:06:25,528 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:06:25,554 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:06:25,563 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:06:25,628 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:06:25,630 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:06:27,586 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:06:27,587 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:06:27,594 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:06:27,627 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:06:27,628 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:12:34,732 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:12:34,758 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:12:34,767 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:12:34,829 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:12:34,832 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:12:36,790 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:12:36,792 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:12:36,798 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:12:36,833 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:12:36,833 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:17:11,218 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:17:11,244 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:17:11,252 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:17:11,319 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaMealRepository': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'javax.persistence.EntityManagerFactory' available
+2020-11-02 12:17:11,322 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:17:13,603 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:17:13,604 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:17:13,611 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:17:13,641 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaMealRepository': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'javax.persistence.EntityManagerFactory' available
+2020-11-02 12:17:13,641 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:20:36,690 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:20:36,715 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:20:36,724 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:20:36,790 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaMealRepository': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'javax.persistence.EntityManagerFactory' available
+2020-11-02 12:20:36,793 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:20:38,759 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:20:38,760 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:20:38,768 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:20:38,798 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaMealRepository': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'javax.persistence.EntityManagerFactory' available
+2020-11-02 12:20:38,799 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:26:50,158 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:26:50,185 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:26:50,193 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:26:50,258 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaMealRepository': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'javax.persistence.EntityManagerFactory' available
+2020-11-02 12:26:50,261 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:29:10,731 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:29:10,756 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:29:10,765 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:29:10,832 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaMealRepository': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'javax.persistence.EntityManagerFactory' available
+2020-11-02 12:29:10,835 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:42:41,753 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:42:41,781 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:42:41,790 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:42:41,852 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:42:41,855 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:42:43,872 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:42:43,873 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:42:43,880 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:42:43,911 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:42:43,912 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:51:29,701 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:51:29,726 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:51:29,735 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:51:29,797 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:51:29,800 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 12:55:44,668 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 12:55:44,693 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:55:44,702 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 12:55:44,769 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 12:55:44,772 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 13:00:36,756 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 13:00:36,783 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 13:00:36,793 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 13:00:36,857 WARN  o.s.context.support.ClassPathXmlApplicationContext.refresh:596 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mealService' defined in file [C:\dev\projects\topjava\target\topjava\WEB-INF\classes\ru\javawebinar\topjava\service\MealService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'ru.javawebinar.topjava.repository.MealRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
+2020-11-02 13:00:36,860 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
+2020-11-02 13:07:34,308 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:128 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
+2020-11-02 13:07:34,395 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:188 - Finished Spring Data repository scanning in 72 ms. Found 2 JPA repository interfaces.
+2020-11-02 13:07:35,119 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 13:07:35,149 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 13:07:35,176 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 13:07:35,263 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
+2020-11-02 13:07:35,331 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
+2020-11-02 13:07:35,497 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
+2020-11-02 13:07:36,188 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
+2020-11-02 13:07:36,596 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
+2020-11-02 13:07:37,279 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
+2020-11-02 13:07:37,397 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:434 - Initialized JPA EntityManagerFactory for persistence unit 'default'
+2020-11-02 13:10:09,165 ERROR org.apache.catalina.core.StandardWrapper.log:175 - InstanceManager.destroy() for servlet [mealServlet] threw exception
+java.lang.NullPointerException: Cannot invoke "Object.getClass()" because "instance" is null
+	at org.apache.catalina.core.DefaultInstanceManager.destroyInstance(DefaultInstanceManager.java:197)
+	at org.apache.catalina.core.StandardWrapper.unload(StandardWrapper.java:1309)
+	at org.apache.catalina.core.StandardWrapper.stopInternal(StandardWrapper.java:1592)
+	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
+	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5384)
+	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
+	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1400)
+	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1389)
+	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
+	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
+	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)
+	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:976)
+	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
+	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1400)
+	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1389)
+	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
+	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
+	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)
+	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:976)
+	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
+	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:473)
+	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
+	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:992)
+	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
+	at org.apache.catalina.startup.Catalina.stop(Catalina.java:706)
+	at org.apache.catalina.startup.Catalina.start(Catalina.java:668)
+	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
+	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
+	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
+	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
+	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:343)
+	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:474)
+2020-11-02 13:10:24,063 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:128 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
+2020-11-02 13:10:24,150 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:188 - Finished Spring Data repository scanning in 72 ms. Found 2 JPA repository interfaces.
+2020-11-02 13:10:24,871 INFO  org.ehcache.core.EhcacheManager.createCache:305 - Cache 'users' created in EhcacheManager.
+2020-11-02 13:10:24,894 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 13:10:24,920 INFO  org.ehcache.jsr107.Eh107CacheManager.registerObject:389 - Registering Ehcache MBean javax.cache:type=CacheStatistics,CacheManager=file./C./dev/projects/topjava/target/topjava/WEB-INF/classes/cache/ehcache.xml,Cache=users
+2020-11-02 13:10:25,006 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
+2020-11-02 13:10:25,075 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.22.Final
+2020-11-02 13:10:25,240 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
+2020-11-02 13:10:25,944 INFO  org.hibernate.dialect.Dialect.<init>:170 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
+2020-11-02 13:10:26,371 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.6.Final
+2020-11-02 13:10:27,049 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
+2020-11-02 13:10:27,167 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:434 - Initialized JPA EntityManagerFactory for persistence unit 'default'
+2020-11-02 13:10:29,468 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
+2020-11-02 13:10:35,796 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100008 for user 100000
+2020-11-02 13:10:35,814 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
+2020-11-02 13:10:37,006 INFO  ru.javawebinar.topjava.web.meal.MealRestController.delete:38 - delete meal 100007 for user 100000
+2020-11-02 13:10:37,010 INFO  ru.javawebinar.topjava.web.meal.MealRestController.getAll:44 - getAll for user 100000
+2020-11-02 13:18:59,982 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:648 - Closing JPA EntityManagerFactory for persistence unit 'default'
+2020-11-02 13:18:59,987 INFO  org.ehcache.core.EhcacheManager.removeCache:216 - Cache 'users' removed from EhcacheManager.
Index: src/main/java/ru/javawebinar/topjava/repository/datajpa/CrudMealRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.repository.datajpa;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport ru.javawebinar.topjava.model.Meal;\r\n\r\npublic interface CrudMealRepository extends JpaRepository<Meal, Integer> {\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/repository/datajpa/CrudMealRepository.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/repository/datajpa/CrudMealRepository.java	(date 1604330164076)
@@ -1,7 +1,32 @@
 package ru.javawebinar.topjava.repository.datajpa;
 
+import org.springframework.data.domain.Sort;
+import org.springframework.data.jpa.repository.EntityGraph;
 import org.springframework.data.jpa.repository.JpaRepository;
+import org.springframework.data.jpa.repository.Modifying;
+import org.springframework.data.jpa.repository.Query;
+import org.springframework.data.repository.query.Param;
+import org.springframework.transaction.annotation.Transactional;
 import ru.javawebinar.topjava.model.Meal;
 
+import java.time.LocalDateTime;
+import java.util.List;
+
+@Transactional(readOnly = true)
 public interface CrudMealRepository extends JpaRepository<Meal, Integer> {
+
+    @Transactional
+    @Modifying
+    @Query("DELETE FROM Meal m WHERE m.id=:id AND m.user.id=:userId")
+    int deleteById(@Param("id") int id, @Param("userId") int userId);
+
+    @Query("SELECT m FROM Meal m WHERE m.user.id=:userId")
+    List<Meal> findAll(@Param("userId") int userId, Sort sort);
+
+    @Query("SELECT m FROM Meal m WHERE m.user.id=:userId AND m.dateTime >= :startDateTime AND m.dateTime < :endDateTime ORDER BY m.dateTime DESC")
+    List<Meal> getBetweenHalfOpen(@Param("startDateTime") LocalDateTime startDateTime, @Param("endDateTime") LocalDateTime endDateTime, @Param("userId") int userId);
+
+    @EntityGraph(attributePaths = {"user.roles", "user.meals"})
+    Meal getMealById(int id);
+
 }
Index: src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaUserRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.repository.datajpa;\r\n\r\nimport org.springframework.data.domain.Sort;\r\nimport org.springframework.stereotype.Repository;\r\nimport ru.javawebinar.topjava.model.User;\r\nimport ru.javawebinar.topjava.repository.UserRepository;\r\n\r\nimport java.util.List;\r\n\r\n@Repository\r\npublic class DataJpaUserRepository implements UserRepository {\r\n    private static final Sort SORT_NAME_EMAIL = Sort.by(Sort.Direction.ASC, \"name\", \"email\");\r\n\r\n    private final CrudUserRepository crudRepository;\r\n\r\n    public DataJpaUserRepository(CrudUserRepository crudRepository) {\r\n        this.crudRepository = crudRepository;\r\n    }\r\n\r\n    @Override\r\n    public User save(User user) {\r\n        return crudRepository.save(user);\r\n    }\r\n\r\n    @Override\r\n    public boolean delete(int id) {\r\n        return crudRepository.delete(id) != 0;\r\n    }\r\n\r\n    @Override\r\n    public User get(int id) {\r\n        return crudRepository.findById(id).orElse(null);\r\n    }\r\n\r\n    @Override\r\n    public User getByEmail(String email) {\r\n        return crudRepository.getByEmail(email);\r\n    }\r\n\r\n    @Override\r\n    public List<User> getAll() {\r\n        return crudRepository.findAll(SORT_NAME_EMAIL);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaUserRepository.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaUserRepository.java	(date 1604330164112)
@@ -41,4 +41,9 @@
     public List<User> getAll() {
         return crudRepository.findAll(SORT_NAME_EMAIL);
     }
+
+    @Override
+    public User gerUserWithMeals(int userId) {
+        return crudRepository.getUserById(userId);
+    }
 }
Index: src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaMealRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.repository.datajpa;\r\n\r\nimport org.springframework.stereotype.Repository;\r\nimport ru.javawebinar.topjava.model.Meal;\r\nimport ru.javawebinar.topjava.repository.MealRepository;\r\n\r\nimport java.time.LocalDateTime;\r\nimport java.util.List;\r\n\r\n@Repository\r\npublic class DataJpaMealRepository implements MealRepository {\r\n\r\n    private final CrudMealRepository crudRepository;\r\n\r\n    public DataJpaMealRepository(CrudMealRepository crudRepository) {\r\n        this.crudRepository = crudRepository;\r\n    }\r\n\r\n    @Override\r\n    public Meal save(Meal meal, int userId) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public boolean delete(int id, int userId) {\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public Meal get(int id, int userId) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public List<Meal> getAll(int userId) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public List<Meal> getBetweenHalfOpen(LocalDateTime startDateTime, LocalDateTime endDateTime, int userId) {\r\n        return null;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaMealRepository.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/repository/datajpa/DataJpaMealRepository.java	(date 1604325365018)
@@ -1,6 +1,8 @@
 package ru.javawebinar.topjava.repository.datajpa;
 
+import org.springframework.data.domain.Sort;
 import org.springframework.stereotype.Repository;
+import org.springframework.transaction.annotation.Transactional;
 import ru.javawebinar.topjava.model.Meal;
 import ru.javawebinar.topjava.repository.MealRepository;
 
@@ -12,32 +14,48 @@
 
     private final CrudMealRepository crudRepository;
 
-    public DataJpaMealRepository(CrudMealRepository crudRepository) {
+    private final CrudUserRepository crudUserRepository;
+
+    public DataJpaMealRepository(CrudMealRepository crudRepository, CrudUserRepository crudUserRepository) {
         this.crudRepository = crudRepository;
+        this.crudUserRepository = crudUserRepository;
     }
 
     @Override
+    @Transactional
     public Meal save(Meal meal, int userId) {
-        return null;
+        if (meal.isNew()) {
+            meal.setUser(crudUserRepository.getOne(userId));
+            return crudRepository.saveAndFlush(meal);
+        }
+        Meal mealDb = crudRepository.findById(meal.getId()).orElse(null);
+        meal.setUser(mealDb.getUser());
+        return mealDb != null && mealDb.getUser().getId() == userId ? crudRepository.saveAndFlush(meal) : null;
     }
 
     @Override
     public boolean delete(int id, int userId) {
-        return false;
+        return crudRepository.deleteById(id, userId) != 0;
     }
 
     @Override
     public Meal get(int id, int userId) {
-        return null;
+        Meal one = crudRepository.findById(id).orElse(null);
+        return one != null && one.getUser().getId() == userId ? one : null;
     }
 
     @Override
     public List<Meal> getAll(int userId) {
-        return null;
+        return crudRepository.findAll(userId, Sort.by(Sort.Direction.DESC, "dateTime"));
     }
 
     @Override
     public List<Meal> getBetweenHalfOpen(LocalDateTime startDateTime, LocalDateTime endDateTime, int userId) {
-        return null;
+        return crudRepository.getBetweenHalfOpen(startDateTime, endDateTime, userId);
+    }
+
+    @Override
+    public Meal getMealWithUser(int id, int UserId) {
+        return crudRepository.getMealById(id);
     }
 }
Index: src/main/java/ru/javawebinar/topjava/repository/datajpa/CrudUserRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.javawebinar.topjava.repository.datajpa;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.data.jpa.repository.Modifying;\r\nimport org.springframework.data.jpa.repository.Query;\r\nimport org.springframework.data.repository.query.Param;\r\nimport org.springframework.transaction.annotation.Transactional;\r\nimport ru.javawebinar.topjava.model.User;\r\n\r\n@Transactional(readOnly = true)\r\npublic interface CrudUserRepository extends JpaRepository<User, Integer> {\r\n    @Transactional\r\n    @Modifying\r\n//    @Query(name = User.DELETE)\r\n    @Query(\"DELETE FROM User u WHERE u.id=:id\")\r\n    int delete(@Param(\"id\") int id);\r\n\r\n    User getByEmail(String email);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/repository/datajpa/CrudUserRepository.java	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/java/ru/javawebinar/topjava/repository/datajpa/CrudUserRepository.java	(date 1604330164044)
@@ -1,5 +1,6 @@
 package ru.javawebinar.topjava.repository.datajpa;
 
+import org.springframework.data.jpa.repository.EntityGraph;
 import org.springframework.data.jpa.repository.JpaRepository;
 import org.springframework.data.jpa.repository.Modifying;
 import org.springframework.data.jpa.repository.Query;
@@ -16,4 +17,7 @@
     int delete(@Param("id") int id);
 
     User getByEmail(String email);
+
+    @EntityGraph(attributePaths = {"meals"})
+    User getUserById(int userId);
 }
Index: src/main/resources/spring/spring-cache.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n       xmlns:cache=\"http://www.springframework.org/schema/cache\"\r\n       xmlns:p=\"http://www.springframework.org/schema/p\"\r\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\r\n         http://www.springframework.org/schema/beans/spring-beans.xsd\r\n         http://www.springframework.org/schema/cache\r\n         http://www.springframework.org/schema/cache/spring-cache.xsd\">\r\n\r\n    <!-- enables scanning for @Cacheable annotation -->\r\n    <cache:annotation-driven cache-manager=\"ehCacheManager\"/>\r\n\r\n    <!--https://imhoratiu.wordpress.com/2017/01/26/spring-4-with-ehcache-3-how-to/-->\r\n    <bean id=\"ehCacheManager\" class=\"org.springframework.cache.jcache.JCacheCacheManager\">\r\n        <property name=\"cacheManager\">\r\n            <bean class=\"org.springframework.cache.jcache.JCacheManagerFactoryBean\" p:cacheManagerUri=\"classpath:cache/ehcache.xml\"/>\r\n        </property>\r\n    </bean>\r\n</beans>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/resources/spring/spring-cache.xml	(revision e5a593a3b75ea791bbe5a8cd8ceff89a755865fb)
+++ src/main/resources/spring/spring-cache.xml	(date 1604330164079)
@@ -14,7 +14,8 @@
     <!--https://imhoratiu.wordpress.com/2017/01/26/spring-4-with-ehcache-3-how-to/-->
     <bean id="ehCacheManager" class="org.springframework.cache.jcache.JCacheCacheManager">
         <property name="cacheManager">
-            <bean class="org.springframework.cache.jcache.JCacheManagerFactoryBean" p:cacheManagerUri="classpath:cache/ehcache.xml"/>
+            <bean class="org.springframework.cache.jcache.JCacheManagerFactoryBean"
+                  p:cacheManagerUri="classpath:cache/ehcache.xml"/>
         </property>
     </bean>
 </beans>
\ No newline at end of file
